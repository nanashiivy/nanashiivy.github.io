if (self.CavalryLogger) { CavalryLogger.start_js(["TxK5z"]); }

__d("ChooseLove",["cx","Arbiter","DOM","DOMVector","FeedbackReactionType","Random","Style","UFIUIEvents"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=null;function j(m){__p&&__p();var n=c("DOM").create("div",{className:"_7nz"}),o=c("DOM").create("div",{className:"_7n-"}),p=c("DOM").create("div",{className:"_7n_"});o.appendChild(p);n.appendChild(o);var q=parseInt(c("Random").random()*90-45,10),r=parseInt(c("Random").random()*250+150,10),s=c("Random").random()+.25,t=m/100+.25;c("Style").set(n,"transform","rotate("+q+"deg)");c("Style").set(o,"transition-duration",t+"s");var u=function u(){c("Style").set(n,"transform","rotate("+q+"deg) translateY("+-r+"px)");c("Style").set(o,"transform","scale(0)");c("Style").set(p,"transform","scale("+s+")")};return[n,u]}var k=function k(m,n){__p&&__p();if(n.reaction_type!=c("FeedbackReactionType").LOVE)return;var o=c("DOMVector").getElementPosition(n.target),p=c("DOMVector").getElementDimensions(n.target),q=c("DOM").create("div"),r=[];for(var s=0;s<50;s++){var t=j(s);q.appendChild(t[0]);r.push(t[1])}var u=o.add(p.div(2)),v=c("DOM").create("div",{className:"_lqb",style:"left: "+(u.x-24)+"px;top: "+(u.y-14)+"px"},[q]);document.body.appendChild(v);setTimeout(function(){while(r.length)r.shift()();setTimeout(function(){c("DOM").remove(v)},2125)},0)},l={enableExplosions:function m(){if(i)return;i=c("Arbiter").subscribe(c("UFIUIEvents").ReactionButtonClicked,k)},disableExplosions:function m(){i&&i.unsubscribe();i=null}};f.exports=l}),null);
__d("UFIReactionsDialogLayerImpl.react",["cx","csx","BrowserSupport","ChooseLove","CSS","DataStore","DOM","DOMQuery","Focus","Layer","Locale","Parent","React","ReactDOM","ReactTransitionEvents","RTLKeys","Style","SubscriptionsHandler","TabbableElements","UFIConfig","Vector","ViewportBounds","ge","getElementPosition","getOverlayZIndex","memoize","renderSubtreeIntoContainer","requestAnimationFrame"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l,m,n=c("React").PropTypes,o="_1oxh",p="_2r6k",q="_2r6j",r=c("BrowserSupport").hasCSSAnimations(),s="_22uo",t={};j=babelHelpers.inherits(u,c("Layer"));k=j&&j.prototype;u.prototype.updatePosition=function(){"use strict";__p&&__p();var w=this.getInsertParent(),x=this.getCausalElement(),y=c("Vector").getElementPosition(x),z=c("Vector").getElementPosition(w),A=y.sub(z),B=c("Vector").getElementDimensions(w).x;if(c("Locale").isRTL())A.x=B-A.x;var C=c("Vector").getViewportDimensions().x,D=c("Vector").getElementDimensions(this.getContentRoot()).x;A.x=Math.min(A.x,C-D);if(c("Locale").isRTL())t.right=A.x+"px";else t.left=A.x+"px";t.top=A.y+"px";t.zIndex=this._getZIndex(x,w);c("Style").apply(this.getRoot(),t);return true};u.prototype._getZIndex=function(w,x){"use strict";__p&&__p();var y=c("getOverlayZIndex")(w,x),z=c("Parent").byClass(x,"fbPhotoSnowliftContainer"),A=z&&c("DOMQuery").scry(z,".stageWrapper")[0];if(A)y=Math.max(y,c("getOverlayZIndex")(A,z));var B=c("ge")("pagelet_sidebar");if(B){var C=c("DOMQuery").scry(B,".fbChatSidebar")[0];if(C)y=Math.max(y,parseInt(c("Style").get(C,"z-index"),10)+1)}return y};u.prototype.getContentRoot=function(){"use strict";return this.contentRoot};u.prototype._buildWrapper=function(w,x){"use strict";c("CSS").addClass(x,"_49v-");this.contentRoot=x;if(c("UFIConfig").showChooseLoveAnimation)c("ChooseLove").enableExplosions();var y=document.createElement("div");c("CSS").addClass(y,"_1oxj");y.appendChild(x);return y};function u(){"use strict";j.apply(this,arguments)}l=babelHelpers.inherits(v,c("React").Component);m=l&&l.prototype;function v(w,x){"use strict";__p&&__p();m.constructor.call(this,w,x);this.onTransitionHide=function(){c("ReactTransitionEvents").removeEndEventListener(this.layer.getContentRoot(),this.onTransitionHide);this.finishHide()}.bind(this);this.onTransitionShow=function(){var y=this.layer.getContentRoot();c("ReactTransitionEvents").removeEndEventListener(y,this.onTransitionShow);c("requestAnimationFrame")(function(){c("CSS").removeClass(y,q)})}.bind(this);this.onKeyDown=function(event){__p&&__p();var y=event.keyCode;if(this.props.isScreenReader)return;if(y===c("RTLKeys").ESC||y===c("RTLKeys").RETURN||y===c("RTLKeys").TAB){this.props.onLayerBlur&&this.props.onLayerBlur(event);var z=c("ReactDOM").findDOMNode(this.refs.root),A=c("TabbableElements").find(this.getContextualLayerParent()),B=null,C=[],D=y===c("RTLKeys").TAB&&event.shiftKey;for(var E=0;E<A.length;E++)if(A[E].tabIndex>-1){if(z.compareDocumentPosition(A[E])&4){B=A[E];break}if(D)C.push(A[E])}if(C.length)B=C[C.length-1];if(B){c("Focus").set(B);event.preventDefault();event.stopPropagation()}}}.bind(this);this.getGlobalContainer=c("memoize")(function(){return c("ge")("globalContainer")});this.onParentLayerHide=this.finishHide.bind(this);this.dockAnimation=s}v.prototype.componentDidMount=function(){"use strict";__p&&__p();var w=c("ReactDOM").findDOMNode(this.refs.root);this.layer=new u({causalElement:w,insertParent:w},document.createElement("div"));c("DOM").appendContent(w,this.layer.getRoot());this.handler=new(c("SubscriptionsHandler"))();if(this.props.onLayerBlur)this.handler.addSubscriptions(this.layer.subscribe("blur",this.props.onLayerBlur));this.handler.addSubscriptions(this.layer.subscribe("beforeshow",this.beforeShow.bind(this)),this.layer.subscribe("aftershow",this.afterShow.bind(this)),this.layer.subscribe("starthide",this.startHide.bind(this)));if(this.isInDocument())this.renderLayer()};v.prototype.componentDidUpdate=function(w){"use strict";this.renderLayer()};v.prototype.componentWillUnmount=function(){"use strict";__p&&__p();if(this.layer){var w=this.layer.getContentRoot();c("ReactDOM").unmountComponentAtNode(this.layer.getContentRoot());c("ReactTransitionEvents").removeEndEventListener(w,this.onTransitionHide);c("ReactTransitionEvents").removeEndEventListener(w,this.onTransitionShow);this.handler.release();this.handler=null;this.layer.destroy();this.layer=null}};v.prototype.isInDocument=function(){"use strict";var w=c("ReactDOM").findDOMNode(this.refs.root);return w&&document.body.contains(w)};v.prototype.afterShow=function(){"use strict";__p&&__p();c("CSS").removeClass(this.refs.root,"accessible_elem");var w=this.layer.getContentRoot(),x=c("getElementPosition")(w).y,y=c("ViewportBounds").getTop();c("CSS").conditionClass(w,o,x&&x<y);if(r){c("ReactTransitionEvents").addEndEventListener(w,this.onTransitionShow);c("CSS").addClass(w,this.dockAnimation);c("CSS").addClass(w,q)}var z=c("TabbableElements").find(this.layer.getContentRoot())[0];z&&z.focus()};v.prototype.beforeShow=function(){"use strict";var w=this.getContextualLayerParent();if(this.props.isScreenReader)this.layer.setInsertParent(this.layer.getCausalElement());else if(w!==this.layer.getInsertParent()){this.layer.setInsertParent(w);this.setParentLayerSubscription(w)}};v.prototype.setParentLayerSubscription=function(w){"use strict";__p&&__p();if(w!==this.getGlobalContainer()){this.parentLayerSubscription&&this.parentLayerSubscription.unsubscribe();this.parentLayer=null;return}var x=w,y=null;while(x!==null){y=c("DataStore").get(x,"layer");if(y)break;x=x.parentNode}if(y&&y!==this.parentLayer){this.parentLayerSubscription&&this.parentLayerSubscription.unsubscribe();this.parentLayerSubscription=y.subscribe("hide",this.onParentLayerHide);this.parentLayer=y}};v.prototype.startHide=function(){"use strict";if(r&&this.isInDocument()){var w=this.layer.getContentRoot();c("ReactTransitionEvents").addEndEventListener(w,this.onTransitionHide);c("CSS").addClass(w,p)}else this.finishHide();return false};v.prototype.finishHide=function(){"use strict";__p&&__p();c("CSS").addClass(this.refs.root,"accessible_elem");var w=this.layer.getContentRoot();if(r){c("CSS").removeClass(w,o);c("CSS").removeClass(w,p);c("CSS").removeClass(w,this.dockAnimation)}this.layer.setInsertParent(this.layer.getCausalElement());this.layer.finishHide()};v.prototype.getContextualLayerParent=function(){"use strict";var w=c("ReactDOM").findDOMNode(this.refs.root);if(w instanceof Element){var x=c("Parent").byClass(w,"uiContextualLayerParent");if(x instanceof HTMLElement)return x}return document.body};v.prototype.renderLayer=function(){"use strict";c("renderSubtreeIntoContainer")(this,c("React").createElement("div",babelHelpers["extends"]({},this.props,{className:"_1oxk",onKeyDown:this.onKeyDown,role:"presentation"}),this.props.children,c("React").createElement("div",{className:"_41nt"+(this.props.isDarkBackground?" _3_jc":"")+(this.props.noBackground?" hidden_elem":""),style:{height:this.props.height}})),this.layer.getContentRoot(),function(){this.props.onLayerRender&&this.props.onLayerRender()}.bind(this));this.layer.conditionShow(this.props.shown)};v.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_2r6l accessible_elem",ref:"root"})};v.propTypes={shown:n.bool,isScreenReader:n.bool,onLayerRender:n.func};f.exports=v}),null);
__d("SpatialReactionClickAnimation",["SphericalVideoComponentActions","SphericalVideoComponent","SphericalViewportControlStore","curry"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("SphericalVideoComponent"));i=h&&h.prototype;function j(k,l,m){i.constructor.call(this,k);this.$SpatialReactionClickAnimation1=l;this.$SpatialReactionClickAnimation2=m}j.prototype.getInitialState=function(k){var l=c("SphericalViewportControlStore").getState().get("sphericalViewportControlStates").get(k),m=l.yaw,n=l.pitch,o=l.fieldOfView,p=l.viewportWidth,q=l.viewportHeight;return{viewportFieldOfView:o,viewportHeight:q,viewportPitch:n,viewportWidth:p,viewportYaw:m}};j.prototype.calculateState=function(k){return this.getInitialState(this.id)};j.prototype.click=function(event){var k=this.id;c("SphericalVideoComponentActions").clickReaction(k,this.$SpatialReactionClickAnimation1);c("SphericalVideoComponentActions").togglePlay(k,true);c("SphericalVideoComponentActions").dropReaction(k,this.$SpatialReactionClickAnimation1,false,false,this.state.viewportWidth,this.state.viewportHeight,this.state.viewportYaw,this.state.viewportPitch,this.state.viewportFieldOfView,c("curry")(this.$SpatialReactionClickAnimation2,event))};f.exports=j}),null);
__d("SpatialReactionDragPositioner",["SpatialReactionAnimationConfig","Vector","VelocityTracker","getElementPosition","Scroll"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("SpatialReactionAnimationConfig").DRAG.FRICTION_COEFFICIENT;function i(j){this.$SpatialReactionDragPositioner1=j;this.$SpatialReactionDragPositioner3=new(c("VelocityTracker"))()}i.prototype.updateMousePosition=function(j){if(!this.$SpatialReactionDragPositioner2){var k=c("getElementPosition")(this.$SpatialReactionDragPositioner1),l=k.x,m=k.y,n=c("Scroll").getTop(document.body);this.$SpatialReactionDragPositioner2=new(c("Vector"))(l,m+n,"document")}this.$SpatialReactionDragPositioner2.x+=(j.x-this.$SpatialReactionDragPositioner2.x)*h;this.$SpatialReactionDragPositioner2.y+=(j.y-this.$SpatialReactionDragPositioner2.y)*h;this.$SpatialReactionDragPositioner4(this.$SpatialReactionDragPositioner2)};i.prototype.$SpatialReactionDragPositioner4=function(j){j.setElementPosition(this.$SpatialReactionDragPositioner1);this.$SpatialReactionDragPositioner3.update(j.x,j.y)};i.prototype.getVelocityVector=function(){return new(c("Vector"))(this.$SpatialReactionDragPositioner3.getVelocityX(),this.$SpatialReactionDragPositioner3.getVelocityY())};i.prototype.getVelocityMagnitude=function(){return this.$SpatialReactionDragPositioner3.getSpeed()};f.exports=i}),null);
__d("SpatialReactionDraggable",["cx","SphericalVideoComponentActions","SpatialReactionAnimationConfig","CSS","DOM","Draggable","SpatialReactionDragPositioner","SpatialReactionsProductionStore","SphericalVideoComponent","SphericalViewportControlStore","Style","Vector","VideoPlayerControllerStore","throttle","curry","SpatialReactionsUtils","SpatialReactionAnimationUtils"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("SpatialReactionsUtils").getReactionCenterVector,l=c("SpatialReactionsUtils").insertOnTop,m=c("SpatialReactionAnimationUtils").addAnimationEndListener,n=c("SpatialReactionAnimationUtils").addTemporaryAnimation,o=c("SpatialReactionAnimationUtils").addTransitionEndListener,p=c("SpatialReactionAnimationUtils").getPercentageWithMax,q=c("SpatialReactionAnimationUtils").moveElementToPosition,r=c("SpatialReactionAnimationUtils").pollForAnimationProgress,s=10,t=c("SpatialReactionAnimationConfig").DRAG.FACE.OFFSET.LOVE.PX,u=c("SpatialReactionAnimationConfig").DRAG.FACE.SCALE.MIN;i=babelHelpers.inherits(v,c("SphericalVideoComponent"));j=i&&i.prototype;function v(x,y,z,A,B){j.constructor.call(this,y);w.call(this);this.$SpatialReactionDraggable2=this.$SpatialReactionDraggable8(this.$SpatialReactionDraggable9());this.$SpatialReactionDraggable3=this.$SpatialReactionDraggable2.getDOM();this.$SpatialReactionDraggable7=z;this.$SpatialReactionDraggable1=A;this.$SpatialReactionDraggable4=B}v.prototype.getInitialState=function(x){var y=c("SphericalViewportControlStore").getState().get("sphericalViewportControlStates").get(x),z=y.yaw,A=y.pitch,B=y.fieldOfView,C=y.viewportWidth,D=y.viewportHeight;return{viewportFieldOfView:B,viewportHeight:D,viewportPitch:A,viewportWidth:C,viewportYaw:z}};v.prototype.calculateState=function(x){return this.getInitialState(this.id)};v.prototype.onStateChange=function(x,y){return};v.prototype.getDOMNode=function(){return this.$SpatialReactionDraggable3};v.prototype.insertIntoDOM=function(x){l(x,this.$SpatialReactionDraggable3,s);n(this.$SpatialReactionDraggable3,"_2khb","dragStartAnimation")};v.prototype.startDragging=function(){this.$SpatialReactionDraggable2.triggerMouseDown(this.$SpatialReactionDraggable1.nativeEvent)};v.prototype.$SpatialReactionDraggable9=function(){var x=c("DOM").create("span",{className:"_5_0x"}),y=c("DOM").create("span",{className:"_5_0y"});this.$SpatialReactionDraggable6=y;c("DOM").appendContent(x,y);return x};v.prototype.$SpatialReactionDraggable8=function(x){this.$SpatialReactionDraggable5=new(c("SpatialReactionDragPositioner"))(x);return new(c("Draggable"))(x).setNamespace("SpatialReactionDraggable").setUseAbsolute(true).setManualPositioner(this.$SpatialReactionDraggable5).setGrabHandler(this.$SpatialReactionDraggable10).setDragHandler(c("throttle")(this.$SpatialReactionDraggable11,c("SpatialReactionAnimationConfig").DRAG.THROTTLE_INTERVAL.MS)).setDropHandler(c("curry")(this.$SpatialReactionDraggable12,this.$SpatialReactionDraggable5))};v.prototype.$SpatialReactionDraggable14=function(){return p(this.$SpatialReactionDraggable5.getVelocityMagnitude(),c("SpatialReactionAnimationConfig").DRAG.VELOCITY.MAX)};v.prototype.$SpatialReactionDraggable13=function(){var x=this.$SpatialReactionDraggable5.getVelocityVector(),y=x.x,z=x.y,A=Math.max(Math.abs(y),Math.abs(z));return new(c("Vector"))(A>0?y/A:0,A>0?z/A:0)};v.prototype.$SpatialReactionDraggable15=function(x,y){var z=x.x*y*t,A=x.y*y*t,B=1-u,C=1-y*B;c("Style").set(this.$SpatialReactionDraggable6,"transform","translate("+z+"px, "+A+"px) scale("+C+")")};var w=function w(){__p&&__p();this.removeFromDOM=function(){return c("DOM").remove(this.$SpatialReactionDraggable3)}.bind(this);this.$SpatialReactionDraggable10=function(x){var y=c("VideoPlayerControllerStore").getIsPlaying(this.id),z=k(this.$SpatialReactionDraggable3);c("SphericalVideoComponentActions").setMouseDown(this.id,z,y);c("SphericalVideoComponentActions").setShouldLeaveReactionMenuOpen(this.id,true)}.bind(this);this.$SpatialReactionDraggable11=function(){c("SphericalVideoComponentActions").setIsDragging(this.id,true);var x=this.$SpatialReactionDraggable13(),y=this.$SpatialReactionDraggable14();this.$SpatialReactionDraggable15(x,y)}.bind(this);this.$SpatialReactionDraggable12=function(x){__p&&__p();var y=this.state,z=y.viewportYaw,A=y.viewportPitch,B=y.viewportFieldOfView,C=y.viewportWidth,D=y.viewportHeight,E=this.$SpatialReactionDraggable3,F=c("curry")(c("CSS").addClass,E),G=c("curry")(c("Style").set,E),H=k(E),I=c("curry")(this.$SpatialReactionDraggable4,this.$SpatialReactionDraggable1),J=function(){return c("SphericalVideoComponentActions").setShouldLeaveReactionMenuOpen(this.id,false)}.bind(this);c("SphericalVideoComponentActions").setIsDragging(this.id,false,H);c("SphericalVideoComponentActions").setMouseUp(this.id,H);var K=!c("SpatialReactionsProductionStore").getIsReactionWithinViewport(C,D),L=function(){c("SphericalVideoComponentActions").dropReaction(this.id,this.$SpatialReactionDraggable7,K,true,C,D,z,A,B,I)}.bind(this);if(K){o(E,"top").then(function(){L();this.removeFromDOM();J()}.bind(this)).done();F("_1b5r");q(E,c("SpatialReactionsProductionStore").getOriginalMousePosition());G("transform",c("SpatialReactionAnimationConfig").DRAG.ORIGINAL_SCALE_VALUE)}else{J();m(E,"dragSuccessAnimation").then(this.removeFromDOM).done();var M=function M(){var N=E.getBoundingClientRect().width/E.offsetWidth;return N<c("SpatialReactionAnimationConfig").SCALES.COIN_FLIP_MORPH_START};r(M).then(L).done();F("_3peq")}}.bind(this)};f.exports=v}),null);
__d("UFIReactionsSpatialReactionIconContainer.react",["cx","React","ReactDOM","SpatialReactionAnimationConfig","SpatialReactionClickAnimation","SpatialReactionDraggable","SpatialReactionsProductionStore","SphericalVideoExperiments"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("SpatialReactionsProductionStore").getVideoPlayerController,l=c("SphericalVideoExperiments").spatialReactionsDragEnabled;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.onMouseDown=function(event){__p&&__p();if(!l)return true;event.persist();event.preventDefault();var s=k(this.props.instanceId);if(s){var t=function(){this.$SpatialReactionIconContainer1=new(c("SpatialReactionDraggable"))(this.$SpatialReactionIconContainer2,s,this.props.reactionType,event,this.props.onDrop);this.$SpatialReactionIconContainer1.insertIntoDOM(this.$SpatialReactionIconContainer2);this.$SpatialReactionIconContainer1.startDragging()}.bind(this);clearTimeout(this.$SpatialReactionIconContainer3);this.$SpatialReactionIconContainer3=setTimeout(t,c("SpatialReactionAnimationConfig").DRAG.THRESHOLD.MS)}return false}.bind(this),this.onClick=function(event){__p&&__p();clearTimeout(this.$SpatialReactionIconContainer3);event.persist();event.preventDefault();event.stopPropagation();if(!this.$SpatialReactionIconContainer4){var s=k(this.props.instanceId);if(s)this.$SpatialReactionIconContainer4=new(c("SpatialReactionClickAnimation"))(s,this.props.reactionType,this.props.onDrop);else return}this.$SpatialReactionIconContainer4.click(event)}.bind(this),o}m.prototype.componentDidMount=function(){this.$SpatialReactionIconContainer2=c("ReactDOM").findDOMNode(this)};m.prototype.componentWillUnmount=function(){clearTimeout(this.$SpatialReactionIconContainer3)};m.prototype.onMouseUp=function(event){event.stopPropagation()};m.prototype.render=function(){var n="_1fq9";return c("React").createElement("span",{className:n,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},this.props.children)};f.exports=m}),null);
__d("UFIReactionsMenuImpl.react",["cx","fbt","Event","Locale","React","ReactDOM","RTLKeys","SubscriptionsHandler","UFIConfig","UFIReactionIconImpl.react","UFIReactionsDialogLayerImpl.react","UFIReactionsSpatialReactionIconContainer.react","UFIReactionTypes","addFocusEvents","getVendorPrefixedName","joinClasses","shallowCompare"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=8,m=96,n=48,o=44,p=39,q=c("UFIReactionTypes").reactions,r=c("getVendorPrefixedName")("transform"),s=i._("Reactions"),t=c("addFocusEvents")("span");j=babelHelpers.inherits(u,c("React").Component);k=j&&j.prototype;function u(v,w){"use strict";__p&&__p();k.constructor.call(this);this.focusSelected=function(){var z=c("ReactDOM").findDOMNode(this.refs[this.state.selectedIndex]);if(z)z.focus()}.bind(this);this.onLayerRender=function(){if(this.state.hasKeyboardFocus)this.focusSelected()}.bind(this);this.onKeyDown=function(event){__p&&__p();switch(event.keyCode){case c("RTLKeys").RETURN:event.preventDefault();var z=this.state.supportedReactions[this.state.selectedIndex];if(this.props.initialReaction===z)z=c("UFIReactionTypes").NONE;if(z!==null&&z!==undefined&&this.props.onReactionClick)this.props.onReactionClick(z,event);break;case c("RTLKeys").getLeft():case c("RTLKeys").getRight():event.preventDefault();this.setState({selectedIndex:Math.max(0,Math.min(this.state.selectedIndex+(event.keyCode===c("RTLKeys").getLeft()?-1:1),this.state.supportedReactions.length-1))},this.focusSelected);break}}.bind(this);var x=v.supportedReactions.filter(function(z){return q[z]}),y=v.allowKeyboardFocus?Math.max(0,x.indexOf(v.initialReaction)):-1;this.state={hasKeyboardFocus:v.allowKeyboardFocus,shouldRenderMenu:v.shown,selectedIndex:y,supportedReactions:x};this.hasStaticSVGDock=c("UFIConfig").reactionsHasStaticFileVectorDock;this.hasAnimatedIcons=c("UFIConfig").reactionsHasAnimatedIcons;this.onlyAnimateIconsOnHover=c("UFIConfig").reactionsOnlyAnimateIconsOnHover;this.animatedIconSizing=c("UFIConfig").reactionsAnimatedIconSizing||"original";this.animatedIconsUsePackage=c("UFIConfig").reactionsAnimatedIconsUsePackage||false}u.prototype.componentWillReceiveProps=function(v){"use strict";if(!this.state.shouldRenderMenu&&v.shown)this.setState({shouldRenderMenu:true});if(!v.shown&&this.props.shown)this.setState({hasKeyboardFocus:v.allowKeyboardFocus,selectedIndex:-1});this.setState({supportedReactions:v.supportedReactions.filter(function(w){return q[w]})})};u.prototype.componentDidMount=function(){"use strict";if(this.props.allowKeyboardFocus)this.focusSelected()};u.prototype.componentDidUpdate=function(v,w){"use strict";__p&&__p();if(this.props.allowKeyboardFocus&&!v.allowKeyboardFocus)this.focusSelected();if(this.props.isLongPressing&&!v.isLongPressing){var x,y=new(c("SubscriptionsHandler"))();y.addSubscriptions(c("Event").listen(document.documentElement,"touchmove",function(event){__p&&__p();event.preventDefault();var z=event.touches[0],A=document.elementFromPoint(z.clientX,z.clientY);if(!A.getAttribute("data-reaction")&&A.parentElement)A=A.parentElement;var B=parseInt(A.getAttribute("data-reaction"),10)||null;if(B!==x){if(x)this.onReactionMouseLeave(x,event);if(B)this.onReactionMouseEnter(B,event);x=B}}.bind(this)),c("Event").listen(document.documentElement,"touchend",function(event){if(x)this.onReactionClick(x,event);if(y){y.release();y=null}}.bind(this)))}};u.prototype.shouldComponentUpdate=function(v,w){"use strict";return c("shallowCompare")(this,v,w)};u.prototype.onDragStart=function(event){"use strict";event.preventDefault()};u.prototype.onKeyboardFocus=function(v,event){"use strict";this.setState({hasKeyboardFocus:true,selectedIndex:v});this.props.onFocus&&this.props.onFocus(event)};u.prototype.onReactionClick=function(v,event){var w,x=arguments.length<=2||arguments[2]===undefined?null:arguments[2],y=arguments.length<=3||arguments[3]===undefined?null:arguments[3];"use strict";event.preventDefault();this.props.onReactionClick&&(w=this.props).onReactionClick.apply(w,arguments)};u.prototype.onReactionMouseEnter=function(v,event){"use strict";this.setState({selectedIndex:this.props.supportedReactions.indexOf(v)});this.props.onReactionMouseEnter&&this.props.onReactionMouseEnter(v)};u.prototype.onReactionMouseLeave=function(v,event){"use strict";this.setState({selectedIndex:-1});this.props.onReactionMouseLeave&&this.props.onReactionMouseLeave(v)};u.prototype.render=function(){"use strict";__p&&__p();var v=this.state.supportedReactions.length,w=this.props.showSpatialReactions,x=(v*n-m)/(v-1),y=this.state.selectedIndex,z=this.state.supportedReactions.map(function(A,B){var C=q[A].display_name,D=this.onReactionClick.bind(this,A),E=Math.max(0,this.state.supportedReactions.indexOf(this.props.initialReaction))===B,F=this.props.icon,G=this.hasAnimatedIcons&&F&&F.supportsReaction&&F.supportsReaction(A),H=void 0;if(G){var I=y===B,J=this.props.allowAnimationPlayback&&this.props.shown&&(!this.onlyAnimateIconsOnHover||I),K=this.animatedIconSizing==="native-small"?p:this.animatedIconSizing==="native-both"?I?n:p:n;H=c("React").createElement(F,{animate:J,className:"_1ef0",selectedIndex:this.state.selectedIndex,maxSize:K,reactionID:A,usePackage:this.animatedIconsUsePackage})}else H=c("React").createElement(c("UFIReactionIconImpl.react"),{className:"_2jry",reaction:A,size:"48",hasStaticSVGDock:this.hasStaticSVGDock});if(w)H=c("React").createElement(c("UFIReactionsSpatialReactionIconContainer.react"),{instanceId:this.props.instanceId,reactionType:A,onDrop:D},H);return c("React").createElement(t,{"aria-pressed":this.props.initialReaction===A,"aria-label":C,className:"_iuw"+(y===B?" _iuy":""),href:"#",key:"reaction_"+A,onClick:D,onDragStart:this.onDragStart,onKeyboardFocus:this.onKeyboardFocus.bind(this,B),onMouseUp:this.props.onReactionMouseUp,onMouseDown:this.props.onReactionMouseDown,onMouseEnter:this.onReactionMouseEnter.bind(this,A),onMouseLeave:this.onReactionMouseLeave.bind(this,A),onTouchStart:this.onDragStart,onTouchEnd:D,ref:B,role:"button",tabIndex:E&&(!this.props.shown||y===B)?0:-1},c("React").createElement("div",{className:"_39m"+(w?" _4x7a":"")+(G?" _1ef2":""),"data-reaction":A},c("React").createElement("div",{className:"_39n"},H,c("React").createElement("div",{className:"_d6l"},c("React").createElement("div",{className:"_4sm1"},C)))))}.bind(this));if(!this.state.shouldRenderMenu)return null;return c("React").createElement(c("UFIReactionsDialogLayerImpl.react"),{height:o+l,isDarkBackground:this.props.isDarkBackground,isScreenReader:this.props.isScreenReader,onLayerBlur:this.props.onBlur,onLayerRender:this.onLayerRender,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,noBackground:this.props.noBackground,shown:this.props.shown},c("React").createElement("div",{className:c("joinClasses")("_iu-"+(this.state.hasKeyboardFocus?" _5wkt":"")+(this.animatedIconSizing==="native-small"?" _628b":"")+(this.animatedIconSizing==="native-both"?" _628c":""),this.props.className),onKeyDown:this.onKeyDown,"aria-label":s,ref:"root",role:"toolbar"},z))};f.exports=u}),null);
__d("TahoeStreamingReactionsToggle",["Arbiter","StreamingReactionsTrayEvents"],(function a(b,c,d,e,f,g){"use strict";var h={registerMenuListener:function i(j){j.subscribe("itemclick",function(event,k){switch(k.item.getValue()){case"enable_streaming_reactions":c("Arbiter").inform(c("StreamingReactionsTrayEvents").EnableReactions);break;case"disable_streaming_reactions":c("Arbiter").inform(c("StreamingReactionsTrayEvents").DisableReactions);break}})}};f.exports=h}),null);