if (self.CavalryLogger) { CavalryLogger.start_js(["Wk6On"]); }

__d("WebAfro",["csx","cx","Arbiter","AsyncDialog","AsyncRequest","CSS","DesktopHscrollUnit","DesktopHscrollUnitEventConstants","DOM","DOMEvent","DOMEventListener","DOMQuery","Parent","ScrollAwareDOM","URI","$"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j={isTicker:function k(l){var m=c("Parent").byClass(l,"fbFeedTicker");return m!=null},isTimeline:function k(l){var m=c("Parent").byClass(l,"fbTimelineUnit");return m!=null},isTimelineReview:function k(l){return c("Parent").byClass(l,"profileApprovalList")!=null},isFbFeed:function k(l){return j.findFbFeedRoot(l)!=null},isAdHScroll:function k(l){var m=j.findFbFeedRoot(l),n=c("DesktopHscrollUnit").getFirstAdsHscrollElement(m),o=c("CSS").matchesSelector(m,"._i6m");return n&&!o},findFbFeedRoot:function k(l){__p&&__p();var m=null,n=l.getAttribute("ajaxify");if(n){var o=new(c("URI"))(n),p=o.getQueryData().options_button_id;if(!p)return null;var q=c("$")(p);m=c("Parent").bySelector(q,"._5pat")}else m=c("Parent").bySelector(l,"._5pat");return m},findFbFeedCardedChild:function k(l){return c("DOM").scry(l,"._5v3q")[0]},updateCurationContent:function k(l,m){c("DOM").insertAfter(c("$")(l),m);c("CSS").hide(c("$")(l));c("CSS").show(m)},listenForCurationUndo:function k(l,m,n){c("DOMEventListener").add(l,"click",function(o){c("DOM").remove(c("$")(n));c("CSS").show(c("$")(m))})},listenForCurationStartUndo:function k(l){__p&&__p();c("DOMEventListener").add(l,"click",function(m){__p&&__p();var n=j.findFbFeedRoot(l);if(n){c("CSS").removeClass(n,"_5y7m");c("CSS").removeClass(n,"_i6m");var o=j.findFbFeedCardedChild(n);c("CSS").removeClass(o?o:n,"_57uu")}else j.unhideStoryFeed(l);var p=c("DOM").find(n,"._57uy");c("DOM").remove(p)})},listenForCurationCloseButton:function k(l){c("DOMEventListener").add(l,"click",function(m){j.hideDialogRoot(l.getAttribute("id"))})},hideDialogRoot:function k(l){var m=c("$")(l);if(j.isFbFeed(m))j.closeForFbFeed(m);else j.closeForFeed(m)},listenForUnhideLinkClicks:function k(l,m){__p&&__p();var n={context:m};c("DOMEventListener").add(l,"click",function(o){__p&&__p();new(c("DOMEvent"))(o).kill();var p=j.findStoryElement(l);p=j.findHscrollInnerStoryElementIfAvailable(p);var q=new(c("AsyncRequest"))().setURI("/ajax/feed/filter_action/nfx_unhide").setMethod("POST").setRelativeTo(p).setData(n);if(j.isTimeline(l)){j.unhideTimelineStory(l);q.send()}else if(j.isTicker(l)){j.unhideStoryTicker(l);q.send()}else if(j.isFbFeed(l)){var r=c("DesktopHscrollUnit").handleOptimisticUnhideInUnit(l);if(r){j.unhideAdHScrollItem(l);p=j.findStoryElement(l);p=j.findHscrollInnerStoryElementIfAvailable(p);q.setRelativeTo(p).send()}else{q.send();j.unhideStoryFbFeed(l)}}else{q.send();j.unhideStoryFeed(l)}j.removeAfroUI(l);c("Arbiter").inform("reflow")})},unhideTimelineStory:function k(l){var m=c("Parent").byClass(l,"fbTimelineUnit");c("CSS").show(c("DOM").find(m,".timelineUnitContainer"));c("CSS").hide(c("DOM").find(m,".topBorder"));c("CSS").hide(c("DOM").find(m,".bottomBorder"))},unhideStoryFeed:function k(l){__p&&__p();var m=c("DOMQuery").find(l,"^.genericStreamStory");c("CSS").removeClass(m,"uiStreamStoryHide");var n=m.getAttribute("data-entity-id");if(n){var o=j.getAllStoriesForEntity(l,n);for(var p=0;p<o.length;++p)c("ScrollAwareDOM").monitor(o[p],function(){c("CSS").removeClass(o[p],"uiStreamStoryHidden")});m.removeAttribute("data-entity-id",n)}},unhideStoryTicker:function k(l){var m=c("Parent").bySelector(l,"._5wvy"),n=c("$")(m.getAttribute("data-story-id"));c("DOM").remove(m);c("CSS").show(n)},unhideAdHScrollItem:function k(l){var m=j.findFbFeedRoot(l),n=c("DesktopHscrollUnit").getFirstAdsHscrollElement(m);c("Arbiter").inform(c("DesktopHscrollUnitEventConstants").HSCROLL_ITEM_UNHIDE_EVENT,n.id)},unhideStoryFbFeed:function k(l){var m=j.findFbFeedRoot(l);c("CSS").removeClass(m,"_5y7m");c("CSS").removeClass(m,"_i6m")},removeAfroUI:function k(l){var m=c("DOMQuery").scry(l,"^._5wvy")[0];if(!m)m=c("DOMQuery").find(l,"^._578c");c("DOM").remove(m)},removeStoryHiddenNotice:function k(l){var m=c("DOMQuery").find(l,"^._578c"),n=c("DOMQuery").scry(m,"._564z");if(n.length>0)c("DOM").remove(n[0]);var o=c("DOMQuery").scry(m,"._5p_6");if(o.length>0)c("DOM").remove(o[0])},findStoryElement:function k(l){__p&&__p();var m;if(j.isTicker(l)){var n=c("Parent").bySelector(l,"._5wvy"),o=n.getAttribute("data-story-id");m=c("$")(o)}else if(j.isFbFeed(l)){var p=j.findFbFeedRoot(l);m=p}else if(j.isTimeline(l))m=c("Parent").byClass(l,"fbTimelineUnit");else if(j.isTimelineReview(l))m=c("Parent").bySelector(l,"._5pat");else m=c("DOMQuery").find(l,"^.genericStreamStory");return m},findHscrollInnerStoryElementIfAvailable:function k(l){var m=l,n=c("DOM").scry(m,".desktop_hscroll_onscreen")[0];if(n)m=c("DOM").find(n,"._170y");return m},updateCloseButtonContextData:function k(l,m){var n=c("DOMQuery").find(l,"^._578c"),o=c("DOMQuery").find(n,"._5c0l");o.setAttribute("data-context",m)},listenForCloseButtonClicks:function k(l,m){__p&&__p();var n=c("DOMQuery").scry(l,"._5c0l");if(n.length===0)return;var o=n[0];o.setAttribute("data-context",m);c("DOMEventListener").add(o,"click",function(p){new(c("DOMEvent"))(p).kill();var q=o.getAttribute("data-context"),r=j.findStoryElement(o);r=j.findHscrollInnerStoryElementIfAvailable(r);var s={context:q,action:"close"},t=new(c("AsyncRequest"))().setURI("/ajax/feed/filter_action/nfx_client_log").setMethod("POST").setRelativeTo(r).setData(s);if(j.isTimeline(l))j.closeForTimeline(l);t.send();j.closeAfro(l,o)})},closeAfro:function k(l,m){__p&&__p();if(j.isTimeline(l))j.closeForTimeline(l);else if(j.isTimelineReview(l))j.closeForTimelineReview(l);else if(j.isTicker(l))j.closeForTicker(m);else if(j.isFbFeed(m))if(j.isAdHScroll(m))j.closeForAdHScroll(m);else j.closeForFbFeed(m);else j.closeForFeed(m)},closeForTimeline:function k(l){c("DOM").remove(c("Parent").byClass(l,"fbTimelineUnit"))},closeForTimelineReview:function k(l){var m=c("Parent").byClass(l,"profileApprovalList");c("DOM").remove(c("Parent").byClass(l,"profileApprovalStoryContainer"));if(!m.children.length)c("DOM").remove(c("Parent").byClass(m,"fbTimelineSection"))},closeForFeed:function k(l){var m=c("DOMQuery").find(l,"^.genericStreamStory");c("DOM").remove(m)},closeForTicker:function k(l){var m=c("Parent").bySelector(l,"._5wvy"),n=m.getAttribute("data-story-id");c("DOM").remove(m);c("DOM").remove(c("$")(n))},closeForFbFeed:function k(l){c("DOM").remove(j.findFbFeedRoot(l))},closeForAdHScroll:function k(l){c("DOM").remove(c("Parent").bySelector(l,"._5wvy"))},openDialog:function k(l,m){var n=new(c("AsyncRequest"))().setURI(l);if(m)n.setRelativeTo(m);c("AsyncDialog").send(n)},hideStoryAndInjectAfroTimeline:function k(l,m){__p&&__p();var n;if(j.isTimeline(l)){n=c("Parent").byClass(l,"fbTimelineUnit");c("DOM").prependContent(n,m);c("CSS").hide(c("DOM").find(n,".topBorder"));c("CSS").hide(c("DOM").find(n,".bottomBorder"));c("CSS").hide(c("DOM").find(n,".timelineUnitContainer"))}else if(j.isTimelineReview(l)){n=c("Parent").byClass(l,"profileApprovalRow");var o=c("DOM").find(n,"._5pcr").parentNode;c("CSS").hide(o);c("DOM").setContent(c("DOM").find(n,".actionButtons"),null);c("DOM").insertBefore(o,m)}},injectAfroFbFeed:function k(l,m,n){__p&&__p();var o=j.findFbFeedRoot(l);if(c("CSS").matchesSelector(o,"._170y"))o=j.findFbFeedRoot(o.parentNode);var p=null;if(!n){c("CSS").addClass(o,"_5y7m");p=c("DOMQuery").scry(o,"._5lum")}else{var q=j.findFbFeedCardedChild(o);c("CSS").addClass(q?q:o,"_57uu");p=c("DOMQuery").scry(q?q:o,"._5lum")}if(!p.length)p=c("DOM").scry(o.parentNode,"._5lum");c("DOM").replace(p[0],m);j.insertKeyboardTabFocusRetainer(m)},injectAfroForFeedAds:function k(l,m){__p&&__p();var n=j.findFbFeedRoot(l);if(c("CSS").matchesSelector(n,"._170y"))n=j.findFbFeedRoot(n.parentNode);c("CSS").addClass(n,"_5y7m");var o=c("DOMQuery").scry(n,"._5lum");if(!o.length)o=c("DOM").scry(n.parentNode,"._5lum");var p=c("DOMQuery").scry(n,"._5wvy");if(p[0])c("DOM").remove(p[0]);var q=c("DesktopHscrollUnit").getFirstAdsHscrollElement(n);if(q)c("DesktopHscrollUnit").removeHeaderMargin(n);c("DOM").replace(o[0],m);j.insertKeyboardTabFocusRetainer(m)},injectAfroForInstreamVideoAds:function k(l,m){var n=j.findFbFeedRoot(l),o=c("DOMQuery").scry(n,"._211q");c("CSS").removeClass(o[0],"_jz1");c("DOM").setContent(o[0],m);j.insertKeyboardTabFocusRetainer(m)},hideAfroForInstreamVideoAds:function k(l){var m=j.findFbFeedRoot(l),n=c("DOMQuery").scry(m,"._211q");c("CSS").addClass(n[0],"_jz1")},insertKeyboardTabFocusRetainer:function k(l){var m=c("DOM").create("div",{style:"width: 0; height: 0; outline: 0;",tabindex:"-1","class":"keyboard_tab_focus_retainer"});c("DOM").insertBefore(l,m);m.focus()},hideAllStoriesAuthoredBy:function k(l,m){if(!j.isTimeline(l)&&!j.isTicker(l)&&!j.isFbFeed(l)){var n=c("DOMQuery").find(l,"^.genericStreamStory"),o=j.getAllStoriesForEntity(l,m);for(var p=0;p<o.length;++p)if(o[p]!==n)c("ScrollAwareDOM").monitor(o[p],function(){c("CSS").addClass(o[p],"uiStreamStoryHidden")});n.setAttribute("data-entity-id",m)}},getAllStoriesForEntity:function k(l,m){var n=c("DOMQuery").find(l,"^.uiStream"),o=".aid_"+m;return c("DOM").scry(n,o)},removeTimelineReviewActionButtons:function k(l){var m=j.findFbFeedRoot(l);if(j.isTimelineReview(m)){var n=c("DOMQuery").scry(m,"^.profileApprovalRow .actionButtons");if(n.length)c("DOM").setContent(n[0],null)}}};g.listenForCurationCloseButton=j.listenForCurationCloseButton;g.listenForCurationUndo=j.listenForCurationUndo;g.updateCurationContent=j.updateCurationContent;g.listenForCurationStartUndo=j.listenForCurationStartUndo;g.listenForUnhideLinkClicks=j.listenForUnhideLinkClicks;g.openDialog=j.openDialog;g.hideAllStoriesAuthoredBy=j.hideAllStoriesAuthoredBy;g.injectAfroFbFeed=j.injectAfroFbFeed;g.injectAfroForFeedAds=j.injectAfroForFeedAds;g.injectAfroForInstreamVideoAds=j.injectAfroForInstreamVideoAds;g.hideAfroForInstreamVideoAds=j.hideAfroForInstreamVideoAds;g.hideStoryAndInjectAfroTimeline=j.hideStoryAndInjectAfroTimeline;g.hideDialogRoot=j.hideDialogRoot;g.removeTimelineReviewActionButtons=j.removeTimelineReviewActionButtons;g.findStoryElement=j.findStoryElement;g.closeAfro=j.closeAfro;f.exports=j}),null);
__d("AfroCardFollowup",["csx","AsyncRequest","DOM","Event","WebAfro"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(j){"use strict";this.$AfroCardFollowup1=j;this.$AfroCardFollowup2=c("DOM").find(j,"._5xsl");c("Event").listen(this.$AfroCardFollowup2,"click",this.$AfroCardFollowup3.bind(this));var k=c("DOM").scry(this.$AfroCardFollowup1,"._5xyg")[0];if(k)c("Event").listen(k,"click",this.$AfroCardFollowup4.bind(this))}i.prototype.$AfroCardFollowup3=function(){"use strict";var j=this.$AfroCardFollowup2.getAttribute("data-context"),k=c("DOM").scry(this.$AfroCardFollowup1,"^.fbTimelineUnit")>0;if(!j||k){c("WebAfro").closeAfro(this.$AfroCardFollowup1,this.$AfroCardFollowup2);return}var l=c("WebAfro").findStoryElement(this.$AfroCardFollowup2),m={context:j,action:"close"},n=new(c("AsyncRequest"))().setURI("/ajax/feed/filter_action/nfx_client_log").setMethod("POST").setRelativeTo(l).setData(m);n.send();c("WebAfro").closeAfro(this.$AfroCardFollowup1,this.$AfroCardFollowup2)};i.prototype.$AfroCardFollowup4=function(){"use strict";this.$AfroCardFollowup2.setAttribute("data-context","")};f.exports=i}),null);