if (self.CavalryLogger) { CavalryLogger.start_js(["eJiOC"]); }

__d("MessengerEmojiConfig",[],(function a(b,c,d,e,f,g){f.exports={emoji_colors:[0,127995,127996,127997,127998,127999]}}),null);
__d("EmojiDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("ExplicitRegistrationDispatcher"))({strict:false})}),null);
__d("EmojiActions",["EmojiDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({CHANGE_CURRENT_CATEGORY:null,CHANGE_EMOJI_COLOR:null,EMOJI_COLOR_READY:null,GET_EMOJI_COLOR:null,TRAY_DATA_READY:null,UPDATE_TRAY_DATA:null}),i={Types:h,loadedTrayData:function j(){c("EmojiDispatcher").dispatch({type:i.Types.TRAY_DATA_READY})},updateTrayData:function j(){c("EmojiDispatcher").dispatch({type:i.Types.UPDATE_TRAY_DATA})},changeEmojiColor:function j(k){c("EmojiDispatcher").dispatch({type:i.Types.CHANGE_EMOJI_COLOR,color:k})},changeCurrentCategory:function j(k){c("EmojiDispatcher").dispatch({type:i.Types.CHANGE_CURRENT_CATEGORY,currentCategory:k})},getEmojiColor:function j(){c("EmojiDispatcher").dispatch({type:i.Types.GET_EMOJI_COLOR})},emojiColorReady:function j(k){c("EmojiDispatcher").dispatch({type:i.Types.EMOJI_COLOR_READY,color:k})}};f.exports=i}),null);
__d("XMessagingGetEmojiRecentUsageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/emoji_recent_usage/",{})}),null);
__d("EmojiServerRequests",["Promise","AsyncRequest","XMessagingGetEmojiRecentUsageController"],(function a(b,c,d,e,f,g){"use strict";var h={fetchTrayData:function j(k){return i(c("XMessagingGetEmojiRecentUsageController").getURIBuilder().getURI(),k,true)}};function i(j,k,l){return new(c("Promise"))(function(m,n){return new(c("AsyncRequest"))(j).setHandler(function(o){return m(o.getPayload())}).setAllowCrossPageTransition(l).send()}).then(k)}f.exports=h}),null);
__d("XMessagingGetEmojiColorPrefController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/get_emoji_color/",{})}),null);
__d("XMessagingSetEmojiColorPrefController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/set_emoji_color/",{})}),null);
__d("EmojiState",["fbt","AsyncRequest","EmojiActions","EmojiServerRequests","MessengerSupportedEmojiUtils","XMessagingGetEmojiColorPrefController","XMessagingSetEmojiColorPrefController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=null,j=null,k=void 0,l={onTrayDataReady:function m(n){if(!k)k=c("EmojiServerRequests").fetchTrayData(function(o){j=o});k.then(function(){n();c("EmojiActions").loadedTrayData()});k.done()},getEmojiColor:function m(){var n=c("XMessagingGetEmojiColorPrefController").getURIBuilder().getURI();new(c("AsyncRequest"))(n).setMethod("POST").setHandler(function(o){c("EmojiActions").emojiColorReady(o.payload)}).send()},changeEmojiColor:function m(n){var o=c("XMessagingSetEmojiColorPrefController").getURIBuilder().getURI();new(c("AsyncRequest"))(o).setMethod("POST").setData({color:n}).send()},addMRUCategory:function m(){if(j){var n=j.map(function(o){return c("MessengerSupportedEmojiUtils").getSupportedEmojiCodesArray(o)}).filter(function(o){return!!o});i={name:h._("Recently Sent"),emojis:n,icon:[128340]};c("EmojiActions").updateTrayData();j=null}},_addRecentlyUsedEmoji:function m(n){__p&&__p();var o,p=i&&i.emojis;if(!p)return;var q=function q(r){var s=n[r];for(var t=0;t<p.length;++t)if(p[t].length==s.length&&p[t].every(function(u,v){return u===s[v]})){p.splice(t,1);break}p.unshift(s)};for(var r=0;r<n.length;++r)q(r);c("EmojiActions").updateTrayData()},getMRUCategory:function m(){if(!i)this.addMRUCategory();return i},updateRecentlyUsed:function m(n){if(!i){this.addMRUCategory();return}this._addRecentlyUsedEmoji(n)}};f.exports=l}),null);
__d("EmojiStateStore",["EmojiActions","EmojiDispatcher","EmojiState","FluxStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("EmojiDispatcher"));this.$EmojiStateStore2=false}j.prototype.getState=function(){var k=c("EmojiState").getMRUCategory();return{currentCategory:this.$EmojiStateStore4,emojiColor:this.$EmojiStateStore3,mruCategory:[k],threadID:this.$EmojiStateStore1,trayDataReady:this.$EmojiStateStore2}};j.prototype.__onDispatch=function(k){__p&&__p();var l=c("EmojiActions").Types;switch(k.type){case l.GET_EMOJI_COLOR:c("EmojiState").getEmojiColor();break;case l.EMOJI_COLOR_READY:this.$EmojiStateStore3=k.color;break;case l.CHANGE_EMOJI_COLOR:c("EmojiState").changeEmojiColor(k.color);this.$EmojiStateStore3=k.color;break;case l.CHANGE_CURRENT_CATEGORY:this.$EmojiStateStore4=k.currentCategory;break;case l.UPDATE_TRAY_DATA:break;case l.TRAY_DATA_READY:this.$EmojiStateStore2=true;break}this.__emitChange()};f.exports=new j()}),null);
__d("MessagingThreadEventTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessagingThreadEventLoggerConfig",this.$MessagingThreadEventTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessagingThreadEventLoggerConfig",this.$MessagingThreadEventTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MessagingThreadEventTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MessagingThreadEventTypedLogger1=babelHelpers["extends"]({},this.$MessagingThreadEventTypedLogger1,j);return this};h.prototype.setActiveTimeMs=function(j){this.$MessagingThreadEventTypedLogger1.active_time_ms=j;return this};h.prototype.setClientEventTimeMs=function(j){this.$MessagingThreadEventTypedLogger1.client_event_time_ms=j;return this};h.prototype.setEvent=function(j){this.$MessagingThreadEventTypedLogger1.event=j;return this};h.prototype.setPageData=function(j){this.$MessagingThreadEventTypedLogger1.page_data=c("GeneratedLoggerUtils").serializeMap(j);return this};h.prototype.setPageID=function(j){this.$MessagingThreadEventTypedLogger1.page_id=j;return this};h.prototype.setScriptPath=function(j){this.$MessagingThreadEventTypedLogger1.script_path=j;return this};h.prototype.setSource=function(j){this.$MessagingThreadEventTypedLogger1.source=j;return this};h.prototype.setThreadID=function(j){this.$MessagingThreadEventTypedLogger1.thread_id=j;return this};h.prototype.setVC=function(j){this.$MessagingThreadEventTypedLogger1.vc=j;return this};var i={active_time_ms:true,client_event_time_ms:true,event:true,page_data:true,page_id:true,script_path:true,source:true,thread_id:true,vc:true};f.exports=h}),null);
__d("ChatEmojiPickerButton.react",["cx","fbt","Image.react","ImmutableObject","Keys","React","MessengerHotLikePreviewEvents","MessengerHotLikeUtils","MercuryMessageObject","MercuryTriodeSourceUtil","StickerConstants","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MercuryMessageObject").get(),m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$ChatEmojiPickerButton1=null,this.$ChatEmojiPickerButton2=null,this.$ChatEmojiPickerButton3=null,this.$ChatEmojiPickerButton5=function(t){t.stopPropagation();this.props.onClick(this.props.emojiData.emojiCodes,this.refs.div)}.bind(this),this.$ChatEmojiPickerButton6=function(t){if(t.keyCode===c("Keys").RETURN){t.preventDefault();this.props.onClick(this.props.emojiData.emojiCodes,this.refs.div)}}.bind(this),this.$ChatEmojiPickerButton7=function(t){__p&&__p();t.preventDefault();t.stopPropagation();if(t.button!==0)return;if(!this.props.enableHotEmoji)this.$ChatEmojiPickerButton1=setTimeout(this.$ChatEmojiPickerButton9,1e3);else{this.$ChatEmojiPickerButton1=setTimeout(function(){this.$ChatEmojiPickerButton3=Date.now();this.$ChatEmojiPickerButton10();this.$ChatEmojiPickerButton11()}.bind(this),500);this.props.onMouseDown&&this.props.onMouseDown()}}.bind(this),this.$ChatEmojiPickerButton10=function(){this.$ChatEmojiPickerButton9();if(!this.props.threadID)return;var t=this.$ChatEmojiPickerButton12();c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").START,t,this.props.threadID,this.props.emojiData.emojiCodes)}.bind(this),this.$ChatEmojiPickerButton8=function(t){t.stopPropagation();clearTimeout(this.$ChatEmojiPickerButton1);if(this.props.enableHotEmoji){if(!(this.props.threadID&&this.$ChatEmojiPickerButton3))return;this.$ChatEmojiPickerButton3=0;this.$ChatEmojiPickerButton13();this.$ChatEmojiPickerButton14()}}.bind(this),this.$ChatEmojiPickerButton9=function(){this.props.onLongPress(this.props.emojiData.emojiCodes,this.refs.div)}.bind(this),this.$ChatEmojiPickerButton14=function(){if(!this.props.threadID)return;c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").STOP_EMOJI,this.props.threadID,true)}.bind(this),this.$ChatEmojiPickerButton15=function(){if(!this.props.threadID)return;c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").POP,this.props.threadID)}.bind(this),this.$ChatEmojiPickerButton11=function(){this.$ChatEmojiPickerButton13();this.$ChatEmojiPickerButton2=c("setTimeoutAcrossTransitions")(this.$ChatEmojiPickerButton15,c("MessengerHotLikeUtils").SizeTimes.large)}.bind(this),this.$ChatEmojiPickerButton13=function(){clearTimeout(this.$ChatEmojiPickerButton2)}.bind(this),this.$ChatEmojiPickerButton4=function(){if(this.$ChatEmojiPickerButton3){this.$ChatEmojiPickerButton3=0;this.$ChatEmojiPickerButton13();this.$ChatEmojiPickerButton15()}}.bind(this),p}n.prototype.componentWillUnmount=function(){this.$ChatEmojiPickerButton4();clearTimeout(this.$ChatEmojiPickerButton1);clearTimeout(this.$ChatEmojiPickerButton2)};n.prototype.render=function(){return c("React").createElement("div",{"aria-label":i._("Pick an Emoji"),onClick:this.$ChatEmojiPickerButton5,onKeyDown:this.$ChatEmojiPickerButton6,onMouseDown:this.$ChatEmojiPickerButton7,onMouseLeave:this.$ChatEmojiPickerButton4,onMouseUp:this.$ChatEmojiPickerButton8,ref:"div",role:"button",tabIndex:"1"},c("React").createElement(c("Image.react"),{className:"_1lih _1ift _1ifu",style:{margin:0},src:this.props.emojiData.uri}))};n.prototype.$ChatEmojiPickerButton12=function(){if(!this.props.threadID)return null;var o=l.constructStickerMessageObject(c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID,c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),this.props.threadID);l.normalizeNewMessage(o);o.is_like_preview=true;o.like_preview_since=this.$ChatEmojiPickerButton3;o.customLike=this.props.emojiData;o.body="";return new(c("ImmutableObject"))(o)};n.propTypes={emojiData:m.object.isRequired,enableHotEmoji:m.bool,onClick:m.func.isRequired,onLongPress:m.func.isRequired,threadID:m.string};f.exports=n}),null);
__d("emojiFormatRe",["EmojiFormat"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(m){return m.length}var i=c("EmojiFormat").codeStringToCodeArray;function j(m){return c("EmojiFormat").codeArrayToCodeString(m)}var k=c("EmojiFormat").codeArrayToUnicode,l=c("EmojiFormat").codeStringToUnicode;g.numSegments=h;g.codeStringToCodeArray=i;g.codeArrayToCodeString=j;g.codeArrayToUnicode=k;g.codeStringToUnicode=l}),null);
__d("skinToneEmojiRe",["bs_caml_array","emojiFormatRe","MessengerEmojiConfig"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(s){switch(s){case"1f385":case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f442":case"1f443":case"1f446":case"1f447":case"1f448":case"1f449":case"1f44a":case"1f44b":case"1f44c":case"1f44d":case"1f44e":case"1f44f":case"1f450":case"1f466":case"1f467":case"1f468":case"1f469":case"1f46e":case"1f470":case"1f471":case"1f472":case"1f473":case"1f474":case"1f475":case"1f476":case"1f477":case"1f478":case"1f47c":case"1f481":case"1f482":case"1f483":case"1f485":case"1f486":case"1f487":case"1f4aa":case"1f575":case"1f590":case"1f595":case"1f596":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64c":case"1f64d":case"1f64e":case"1f64f":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"1f6c0":case"1f918":case"261d":case"26f9":case"270a":case"270b":case"270c":case"270d":return 1;default:return 0}}function i(s){var t=+(c("bs_caml_array").caml_array_get(s,s.length-1|0)===65039);if(t!==0)return c("bs_caml_array").caml_array_get(s,s.length-1|0);else return 0}function j(s){if(c("bs_caml_array").caml_array_get(s,s.length-1|0)===65039)return s;else{var t=s.slice(0);return t.concat(65039)}}function k(s){var t=+(i(s)===0);if(t!==0)return s;else return s.slice(0,s.length-1|0)}function l(s){var t=c("MessengerEmojiConfig").emoji_colors,u=t.filter(function(v){return+(v===s)});return+(u.length!==0)}function m(s){var t=k(s);if(t.length<=1||!l(c("bs_caml_array").caml_array_get(t,t.length-1|0)))return 0;else return c("bs_caml_array").caml_array_get(t,t.length-1|0)}function n(s){var t=i(s),u=+(t===0),v=u!==0?m(s):m(s.slice(0,s.length-1|0));if(v!==0){var w=+(t===0);if(w!==0)return s.slice(0,s.length-1|0);else return j(s.slice(0,s.length-2|0))}else return s}function o(s,t){__p&&__p();if(t!==0){var u=i(s),v=+(u===0),w=v!==0?s.slice(0):s.slice(0,s.length-1|0),x=m(w);if(x!==0)return s;else{var y=w.concat(t),z=+(u===0);if(z!==0)return y;else return y.concat(u)}}else return s}function p(s){return n(k(s))}function q(s){return h(c("emojiFormatRe").codeArrayToCodeString(n(k(s))))}var r=65039;g.emoji_modifier_code=r;g.emoji=h;g.getEmojiModifier=i;g.addEmojiModifier=j;g.removeEmojiModifier=k;g.isToneModifier=l;g.getTone=m;g.removeTone=n;g.applyTone=o;g.removeAllModifiers=p;g.hasVariations=q}),null);
__d("ChatEmojiPicker.react",["cx","ChatEmojiPickerButton.react","ChatEmojiSkinToneSelector.react","EmojiActions","EmojiFormat","EmojiLikeConstants","Grid.react","MessengerHotLikePreviewEvents","MessengerScrollableArea.react","MessengerSupportedEmojiUtils","React","skinToneEmojiRe","SubscriptionsHandler"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("Grid.react").GridItem,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$ChatEmojiPicker1=false,this.$ChatEmojiPicker2=null,this.state={clickedEmoji:null,selectedEmoji:[],toneSelectorShown:false,toneSelectorContext:null},this.componentWillUnmount=function(){this.$ChatEmojiPicker2&&this.$ChatEmojiPicker2.release()}.bind(this),this.scrollToTop=function(s){this.refs.scrollable.scrollToTop(s)}.bind(this),this.$ChatEmojiPicker7=function(s){if(this.props.shouldSaveEmojiColorChoice){var t=c("skinToneEmojiRe").getTone(s);c("EmojiActions").changeEmojiColor(t)}this.props.onSelect&&this.props.onSelect(s)}.bind(this),this.$ChatEmojiPicker4=function(s,t){if(this.props.shouldSaveEmojiColorChoice&&this.props.useSkinToneSelector&&c("skinToneEmojiRe").hasVariations(s)){this.$ChatEmojiPicker8(s,t);this.$ChatEmojiPicker1=false}else if(this.$ChatEmojiPicker1)this.$ChatEmojiPicker1=false;else this.$ChatEmojiPicker7(s)}.bind(this),this.$ChatEmojiPicker5=function(s,t){if(this.props.useSkinToneSelector&&c("skinToneEmojiRe").hasVariations(s))this.$ChatEmojiPicker8(s,t);else this.setState({clickedEmoji:s});this.$ChatEmojiPicker1=true}.bind(this),this.$ChatEmojiPicker6=function(){if(!this.$ChatEmojiPicker1)this.$ChatEmojiPicker3()}.bind(this),this.$ChatEmojiPicker3=function(){this.setState({toneSelectorShown:false})}.bind(this),o}m.prototype.componentDidMount=function(){this.$ChatEmojiPicker2=new(c("SubscriptionsHandler"))();this.$ChatEmojiPicker2.addSubscriptions(c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").START,function(n,o,p){if(p&&this.props.useSkinToneSelector&&!c("skinToneEmojiRe").hasVariations(p)&&this.state.toneSelectorShown)this.$ChatEmojiPicker3()}.bind(this)),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(n,o,p){if(n===this.props.threadID)if(p&&this.state.clickedEmoji&&this.props.sendCustomEmoji){this.props.sendCustomEmoji({emoji:c("EmojiFormat").codeArrayToUnicode(this.state.clickedEmoji)},p,c("EmojiLikeConstants").source.PICKER);this.setState({clickedEmoji:null})}}.bind(this)))};m.prototype.render=function(){var n=this.props.emojiChoices.map(function(o){var p=String.fromCodePoint.apply(String,o),q=c("MessengerSupportedEmojiUtils").getUrl(c("EmojiFormat").codeArrayToCodeString(o),c("EmojiLikeConstants").size.SMALL),r=this.props.enableHotEmoji||!c("skinToneEmojiRe").hasVariations(o);return q?c("React").createElement(k,{key:o.join("_"),className:"_3-sy"},c("React").createElement("div",{className:(p===this.props.currentEmoji?"_4rlt":"")+" _4rlu"},c("React").createElement(c("ChatEmojiPickerButton.react"),{emojiData:{emojiCodes:o,uri:q},enableHotEmoji:r,onClick:this.$ChatEmojiPicker4,onLongPress:this.$ChatEmojiPicker5,threadID:this.props.threadID}))):null}.bind(this)).filter(function(o){return!!o});return c("React").createElement(c("MessengerScrollableArea.react"),{className:this.props.className,height:this.props.height,onScroll:this.$ChatEmojiPicker3,ref:"scrollable"},c("React").createElement(c("Grid.react"),{cols:this.props.columns,className:"_3-s_"},n),this.props.useSkinToneSelector?c("React").createElement(c("ChatEmojiSkinToneSelector.react"),{context:this.state.toneSelectorContext,emojiCodes:this.state.selectedEmoji,onBlur:this.$ChatEmojiPicker6,onSelect:this.$ChatEmojiPicker7,sendCustomEmoji:this.props.sendCustomEmoji,shouldSaveEmojiColorChoice:this.props.shouldSaveEmojiColorChoice,shown:this.state.toneSelectorShown,threadID:this.props.threadID}):null)};m.prototype.$ChatEmojiPicker8=function(n,o){this.setState({toneSelectorShown:true,selectedEmoji:n,toneSelectorContext:o})};m.propTypes={className:l.string,columns:l.number,currentEmoji:l.string,emojiChoices:l.arrayOf(l.arrayOf(l.number)).isRequired,enableHotEmoji:l.bool,height:l.string,onSelect:l.func,sendCustomEmoji:l.func,shouldSaveEmojiColorChoice:l.bool,threadID:l.string,useSkinToneSelector:l.bool};m.defaultProps={columns:7,useSkinToneSelector:false};f.exports=m}),null);
__d("ChatEmojiSkinToneFlyout.react",["cx","fbt","ChatEmojiPicker.react","MessengerEmojiConfig","React","skinToneEmojiRe"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;m.prototype.render=function(){__p&&__p();var n,o=this,p=[];if(this.props.emojiCodes.length>0)(function(){var r=c("skinToneEmojiRe").removeTone(o.props.emojiCodes);p=c("MessengerEmojiConfig").emoji_colors.map(function(s){return c("skinToneEmojiRe").applyTone(r,s)})})();var q=null;if(this.props.shouldSaveEmojiColorChoice)q=c("React").createElement("div",{className:"_4gww"},i._("Pick one. You can change it anytime in Settings."));return c("React").createElement("div",null,q,c("React").createElement(c("ChatEmojiPicker.react"),{className:this.props.className,columns:6,emojiChoices:p,enableHotEmoji:true,onSelect:this.props.onSelect,sendCustomEmoji:this.props.sendCustomEmoji,threadID:this.props.threadID}))};function m(){j.apply(this,arguments)}m.propTypes={className:l.string,emojiCodes:l.arrayOf(l.number).isRequired,onSelect:l.func.isRequired,sendCustomEmoji:l.func,shouldSaveEmojiColorChoice:l.bool,threadID:l.string};f.exports=m}),null);
__d("ChatEmojiSkinToneSelector.react",["cx","ChatEmojiSkinToneFlyout.react","ContextualLayerAutoFlip","React","XUIContextualDialog.react","emptyFunction"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=220;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;m.prototype.render=function(){return c("React").createElement(c("XUIContextualDialog.react"),{behaviors:{ContextualLayerAutoFlip:c("ContextualLayerAutoFlip")},context:this.props.context,contextRef:c("emptyFunction"),onBlur:this.props.onBlur,onToggle:this.$ChatEmojiSkinToneSelector1,shown:this.props.shown,width:l},c("React").createElement(c("ChatEmojiSkinToneFlyout.react"),{className:"_2ejf",emojiCodes:this.props.emojiCodes,onSelect:this.props.onSelect,sendCustomEmoji:this.props.sendCustomEmoji,shouldSaveEmojiColorChoice:this.props.shouldSaveEmojiColorChoice,threadID:this.props.threadID}))};function m(){i.apply(this,arguments)}m.propTypes={context:k.instanceOf(HTMLElement),emojiCodes:k.arrayOf(k.number).isRequired,onBlur:k.func.isRequired,onSelect:k.func.isRequired,sendCustomEmoji:k.func,shouldSaveEmojiColorChoice:k.bool,shown:k.bool,threadID:k.string};f.exports=m}),null);
__d("ChatEmojiSkinTonePreferencePicker.react",["ChatEmojiPicker.react","MessengerEmojiConfig","React","skinToneEmojiRe"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes,k=128077;h=babelHelpers.inherits(l,c("React").PureComponent);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$ChatEmojiSkinTonePreferencePicker1=function(r){var s=c("skinToneEmojiRe").getTone(r);this.props.onSelect&&this.props.onSelect(s)}.bind(this),n}l.prototype.render=function(){var m=null;try{m=this.props.currentPreference?String.fromCodePoint.apply(String,c("skinToneEmojiRe").applyTone([k],this.props.currentPreference)):String.fromCodePoint(k)}catch(n){m=String.fromCodePoint(k)}return c("React").createElement(c("ChatEmojiPicker.react"),{className:this.props.className,columns:this.props.columns,currentEmoji:m,emojiChoices:c("MessengerEmojiConfig").emoji_colors.map(function(o){return c("skinToneEmojiRe").applyTone([k],o)}),onSelect:this.$ChatEmojiSkinTonePreferencePicker1})};l.propTypes={className:j.string,columns:j.number,currentPreference:j.number,onSelect:j.func};l.defaultProps={columns:6};f.exports=l}),null);
__d("MontageThreadViewContainer.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("MontageThreadViewContainerImpl.react").__setRef("MontageThreadViewContainer.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MessengerDesktopNotificationPermissions",[],(function a(b,c,d,e,f,g){var h=Object.freeze({DEFAULT:"default",DENIED:"denied",GRANTED:"granted"});f.exports=h}),null);
__d("MessengerDesktopNotifications",["Map","MessengerDesktopNotificationPermissions","Run","UserAgent"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=5e3,i=new(c("Map"))();function j(){i.forEach(function(l,m,n){l.close&&l.close()})}var k={_closeTimer:null,isSupported:function l(){return!!window.Notification},checkPermission:function l(){if(window.Notification)return window.Notification.permission},hasDefaultSound:function l(){return c("UserAgent").isBrowser("FireFox")&&c("UserAgent").isPlatform("Mac OS X")},isDenied:function l(){return this.checkPermission()===c("MessengerDesktopNotificationPermissions").DENIED},isGranted:function l(){return this.checkPermission()===c("MessengerDesktopNotificationPermissions").GRANTED},requestPermission:function l(m){if(window.Notification)window.Notification.requestPermission(m)},showNotification:function l(m){__p&&__p();if(this.isGranted()){var n=window.Notification?new window.Notification(m.title,{body:m.body,icon:m.icon,tag:m.tag}):{};i.set(m.tag,n);n.onclick=m.onClick;n.onclose=function(){i["delete"](m.tag)};this._closeTimer=setTimeout(function(){n.close()},m.closeTime||h);return n}else return null}};c("Run").onUnload(j);f.exports=k}),null);
__d("ComposedEntityMutability",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MUTABLE:0,IMMUTABLE:1,SEGMENTED:2})}),null);
__d("MessengerEditorStateManager",["CacheStorage","ComposedEntityMutability","ComposedEntityMutabilityToName","ComposedEntityTypeToName","DraftEntityInstance","EditorState","MessengerConstants","SelectionState","decodeBlocks","encodeBlocks","mapObject"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("CacheStorage"))("localstorage"),i=c("ComposedEntityMutability").IMMUTABLE,j=void 0,k={get:function l(m){__p&&__p();if(!m)return this._getEmptyEditorState();if(m===c("MessengerConstants").NEW_THREAD_KEY)return j||this._getEmptyEditorState();var n=h.get(m,false);if(!n)return this._getEmptyEditorState();var o=n.encodedBlocks,p=c("mapObject")(o.entityMap,function(s,t){return new(c("DraftEntityInstance"))({type:c("ComposedEntityTypeToName")[s.type],mutability:c("ComposedEntityMutabilityToName")[i],data:s.data})}),q=c("decodeBlocks")(o.blocks,p),r=c("EditorState").createWithContent(q);return c("EditorState").acceptSelection(r,new(c("SelectionState"))(n.selection))},set:function l(m,n){if(m===c("MessengerConstants").NEW_THREAD_KEY){j=n;return}var o=c("encodeBlocks")(n.getCurrentContent()),p=n.getSelection().toJS();h.set(m,{encodedBlocks:o,selection:p})},_getEmptyEditorState:function l(){var m=c("EditorState").createEmpty();return c("EditorState").forceSelection(m,m.getSelection())}};f.exports=k}),null);
__d("MessengerPresenceStatusUtils",["fbt","AvailableListConstants","CurrentUser","LastActiveTimes","MercuryIDs","PresenceStatus"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={getStatusFromCanonicalThread:function j(k,l){__p&&__p();var m=null;if(l&&l.is_canonical){var n=k.get(c("MercuryIDs").getParticipantIDFromFromThreadID(l.thread_id));if(n){var o=void 0;if(n.is_messenger_user)o=c("CurrentUser").isWorkUser()?h._("Workplace Chat"):h._("Messenger");else o=c("CurrentUser").isWorkUser()?h._("Workplace"):h._("Facebook");var p=c("PresenceStatus").get(n.fbid),q=void 0,r=void 0;if(p!==c("AvailableListConstants").ACTIVE){q=c("LastActiveTimes").get(n.fbid);r=c("LastActiveTimes").getShortDisplay(n.fbid)}m={contact:n,platform:o,isUserActive:p===c("AvailableListConstants").ACTIVE,lastActiveTS:q,lastActive:r}}}return m}};f.exports=i}),null);
__d("MessagingThreadEventType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ACTIVE:"active",INACTIVE:"inactive"})}),null);
__d("MessagingThreadSourceName",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHAT_NUB:"chat_nub",MESSENGER:"messenger"})}),null);
__d("MessengerLoggerUtils",["MercuryIDs","MessagingThreadEventType","MessagingThreadEventTypedLogger","MessagingThreadSourceName","ScriptPath","pageID"],(function a(b,c,d,e,f,g){var h={logThreadChangeEvent:function i(j,k,l,m){if(l.activeThreadID&&j)this.log({activeThreadID:l.activeThreadID,event:c("MessagingThreadEventType").INACTIVE,clientEventTimeMs:k,activeTimeMs:k-j});if(m.activeThreadID)this.log({activeThreadID:m.activeThreadID,event:c("MessagingThreadEventType").ACTIVE,clientEventTimeMs:k,activeTimeMs:0})},log:function i(j){var k=c("MercuryIDs").tokenize(j.activeThreadID.toString()),l=c("ScriptPath").getPageInfo();new(c("MessagingThreadEventTypedLogger"))().setEvent(j.event).setClientEventTimeMs(j.clientEventTimeMs).setActiveTimeMs(j.activeTimeMs).setPageID(c("pageID")).setPageData(l?l.extraData:{}).setThreadID(k.value).setSource(c("MessagingThreadSourceName").MESSENGER).log()}};f.exports=h}),null);
__d("MessengerStateStore",["MessengerActions","MessengerLoggerUtils","MessengerStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("MessengerStore"));i=h&&h.prototype;function j(){i.constructor.call(this);this.$MessengerStateStore1={activeThreadID:null,detailView:null,filter:null,folder:null,masterView:null,query:null,mid:null,serverThreadID:null,extraQueryParams:null,threadIDs:null};this.$MessengerStateStore2=babelHelpers["extends"]({},this.$MessengerStateStore1);this.$MessengerStateStore4=this.$MessengerStateStore3=null}j.prototype.getState=function(){return this.$MessengerStateStore1};j.prototype.getPrevState=function(){return this.$MessengerStateStore2};j.prototype.__onDispatch=function(k){switch(k.type){case c("MessengerActions").Types.REPLACE_STATE:this.$MessengerStateStore2=this.$MessengerStateStore1;this.$MessengerStateStore4=this.$MessengerStateStore3;this.$MessengerStateStore1=babelHelpers["extends"]({activeThreadID:null,detailView:null,filter:null,folder:null,masterView:null,query:null,mid:null,serverThreadID:null,extraQueryParams:null,threadsIDs:null},k.nextState);var l=Date.now();this.$MessengerStateStore3=l;c("MessengerLoggerUtils").logThreadChangeEvent(this.$MessengerStateStore4,l,this.$MessengerStateStore2,this.$MessengerStateStore1);this.emitChange();break}};f.exports=new j()}),null);
__d("MessengerComposerActions",["MessengerDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({ADD_TOKEN:null,REMOVE_TOKEN:null,FOCUS_COMPOSER:null,FOCUS_TYPEAHEAD:null,EXIT_COMPOSE_STATE:null,MOVE_DRAFT:null}),i={Types:h,addToken:function j(k){c("MessengerDispatcher").dispatch({type:h.ADD_TOKEN,entry:k})},moveDraftToNextThread:function j(k){c("MessengerDispatcher").dispatch({type:h.MOVE_DRAFT,threadID:k})},removeToken:function j(k){c("MessengerDispatcher").dispatch({type:h.REMOVE_TOKEN,entry:k})},focusComposer:function j(){c("MessengerDispatcher").dispatch({type:h.FOCUS_COMPOSER})},focusTypeahead:function j(){c("MessengerDispatcher").dispatch({type:h.FOCUS_TYPEAHEAD})},exitComposeState:function j(){c("MessengerDispatcher").dispatch({type:h.EXIT_COMPOSE_STATE})}};f.exports=i}),null);
__d("XMessengerDotComSettingsEditController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/settings/edit/",{})}),null);
__d("MessengerSettingsActions",["AsyncRequest","CurrentEnvironment","MessengerDispatcher","MessengerDesktopNotifications","MessengerDesktopNotificationPermissions","MessengerURIConstants","XMessengerDotComSettingsEditController","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({CHANGE_SETTINGS:null,CHANGE_DESKTOP_NOTIFS:null}),i={Types:h,changeSettings:function j(k){var l=c("XMessengerDotComSettingsEditController").getURIBuilder().getURI();if(c("CurrentEnvironment").facebookdotcom)l.setPath(c("MessengerURIConstants").FACEBOOK_PREFIX+l.getPath());new(c("AsyncRequest"))().setData({settings:k}).setURI(l).send();c("MessengerDispatcher").dispatch({type:h.CHANGE_SETTINGS,newSettings:k})},changeDesktopNotifs:function j(k,l){if(k&&!c("MessengerDesktopNotifications").isGranted())c("MessengerDesktopNotifications").requestPermission(function(m){if(m!==c("MessengerDesktopNotificationPermissions").GRANTED){if(c("MessengerDesktopNotifications").checkPermission()===c("MessengerDesktopNotificationPermissions").DENIED)l&&l();return}c("MessengerDispatcher").dispatch({type:h.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:k})});else c("MessengerDispatcher").dispatch({type:h.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:k})}};f.exports=i}),null);
__d("LinkWithHiddenURLBar.react",["Link.react","React","ReactDOM","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(){__p&&__p();var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.link=null,this.$LinkWithHiddenURLBar5=function(p){this.link=p}.bind(this),this.$LinkWithHiddenURLBar4=function(p){this.$LinkWithHiddenURLBar6();this.props.onFocus&&this.props.onFocus(p)}.bind(this),this.$LinkWithHiddenURLBar2=function(p){this.$LinkWithHiddenURLBar1();this.props.onBlur&&this.props.onBlur(p)}.bind(this),this.$LinkWithHiddenURLBar3=function(p){this.$LinkWithHiddenURLBar6();if(!p.metaKey&&this.props.onClick){this.props.onClick(p);p.preventDefault()}this.props.onAllClicks&&this.props.onAllClicks(p);c("setImmediate")(function(){return this.$LinkWithHiddenURLBar1()}.bind(this))}.bind(this),l}j.prototype.componentDidMount=function(){this.$LinkWithHiddenURLBar1()};j.prototype.render=function(){var k=this.props,l=k.label,m=k.onBlur,n=k.onAllClicks,o=k.onClick,p=k.onFocus,q=babelHelpers.objectWithoutProperties(k,["label","onBlur","onAllClicks","onClick","onFocus"]);return c("React").createElement(c("Link.react"),babelHelpers["extends"]({},q,{label:l,onBlur:this.$LinkWithHiddenURLBar2,onClick:this.$LinkWithHiddenURLBar3,onFocus:this.$LinkWithHiddenURLBar4,ref:this.$LinkWithHiddenURLBar5}))};j.prototype.$LinkWithHiddenURLBar1=function(){if(this.link){var k=c("ReactDOM").findDOMNode(this.link);if(k.href){k.setAttribute("data-href",k.href);k.removeAttribute("href")}}};j.prototype.$LinkWithHiddenURLBar6=function(){if(this.link){var k=c("ReactDOM").findDOMNode(this.link),l=k.getAttribute("data-href");if(l){k.setAttribute("href",l);k.removeAttribute("data-href")}}};f.exports=j}),null);
__d("MessengerAddIconSVG.react",["React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=function i(j){return c("React").createElement("div",{className:j.className},c("React").createElement("svg",{viewBox:"-8 -8 48 48"},c("React").createElement("title",null,"add to group"),c("React").createElement("path",{d:"M16,0 V32 M0,16 H32",fillRule:"evenodd",clipRule:"evenodd",fill:"none",stroke:j.customColor,strokeWidth:2,strokeMiterlimit:10,strokeLinecap:"round"})))};i.propTypes={className:h.string,customColor:h.string.isRequired};f.exports=i}),null);
__d("MessengerBootloadedLogMessage.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("MessengerLogMessage.react").__setRef("MessengerBootloadedLogMessage.react"),placeholder:c("React").createElement("div",{className:"_497p"},"...")})};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MessageThreadAssociatedObjectKey",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ACTION_LINK:"action_link",APPROVAL_MODE_TOGGLEABLE:"approval_mode_toggleable",EVENT_PLACE:"event_place",ID:"id",IS_WORKPLACE_COMMUNITY:"is_workplace_community",NAME:"name",PRIVACY_MODE:"privacy_mode",PROFILE_PICTURE:"profile_picture",ROOM_TYPE:"room_type",START_TIMESTAMP:"start_timestamp"})}),null);
__d("TimeSpentRoomTypeEnum$FbtEnum",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({GROUP:"Group",EVENT:"Event"});f.exports=h}),null);
__d("MessengerContextBanner.react",["cx","fbt","Badge.react","CurrentUser","Image.react","ImageBlock.react","immutable","Link.react","MercuryParticipantsConstants","MercuryParticipantsImage.react","MercuryThreadImage.react","MessageThreadAssociatedObjectKey","React","MercuryShareAttachmentRenderLocations","TimeSpentRoomTypeEnum","TimeSpentRoomTypeEnum$FbtEnum","requireWeak"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=void 0;c("requireWeak")("messengerThreadImageReact",function(o){m=o.jsComponent});j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;n.prototype.render=function(){var o=c("React").createElement(c("ImageBlock.react"),{className:"_llj"+(this.props.location===c("MercuryShareAttachmentRenderLocations").MESSENGER?" _2eu-":"")+(this.props.location===c("MercuryShareAttachmentRenderLocations").CHAT?" _2eu_":""),spacing:"large",style:this.props.style},this.$MessengerContextBanner1(),c("React").createElement("div",{className:"_lll"},this.$MessengerContextBanner2(),this.$MessengerContextBanner3(),this.$MessengerContextBanner4())),p=this.props.associatedObject;if(p&&p[c("MessageThreadAssociatedObjectKey").ACTION_LINK])o=c("React").createElement(c("Link.react"),{href:p[c("MessageThreadAssociatedObjectKey").ACTION_LINK],target:"_blank",style:{textDecoration:"none"}},o);return o};n.prototype.$MessengerContextBanner1=function(){__p&&__p();var o=this.props.location===c("MercuryShareAttachmentRenderLocations").MESSENGER,p=this.props.associatedObject,q=null;if(!this.props.contactName&&p&&o)q=c("React").createElement(c("Image.react"),{className:"_4ld- _1wrc",src:p[c("MessageThreadAssociatedObjectKey").PROFILE_PICTURE]});else if(this.props.thread){var r=m&&o?m:c("MercuryThreadImage.react");q=c("React").createElement(r,{showBadge:false,participants:this.props.participants,size:o?60:null,thread:this.props.thread,viewer:this.props.viewer})}else if(this.props.participantIDs)q=c("React").createElement(c("MercuryParticipantsImage.react"),{participants:this.props.participantIDs,size:c("MercuryParticipantsConstants").BIG_IMAGE_SIZE});return c("React").createElement("div",{className:"_llk"},q)};n.prototype.$MessengerContextBanner2=function(){if(this.props.location!==c("MercuryShareAttachmentRenderLocations").MESSENGER)return null;var o=this.props.isVerified?c("React").createElement(c("Badge.react"),{size:"medium",type:"verified"}):null,p=this.props.contactName;if(!p){var q=this.props.associatedObject;p=q?q[c("MessageThreadAssociatedObjectKey").NAME]:null}return c("React").createElement("div",{className:"_llq"},c("React").createElement("span",{className:"_3oh-"},p,o))};n.prototype.$MessengerContextBanner3=function(){return c("React").createElement("div",{className:"_1n-e _36zg"},this.props.connectionContext)};n.prototype.$MessengerContextBanner4=function(){__p&&__p();if(!this.props.contextItems.length){var o=this.props.associatedObject;if(o){var p=c("TimeSpentRoomTypeEnum")[o[c("MessageThreadAssociatedObjectKey").ROOM_TYPE]],q=c("CurrentUser").isWorkUser()?"Workplace":"Facebook";return c("React").createElement("div",{className:"_1n-e"},i._({"EVENT":"Go to {productName} Event","GROUP":"Go to {productName} Group"},[i.param("productName",q),i["enum"](p,c("TimeSpentRoomTypeEnum$FbtEnum"))]))}return null}return c("React").createElement("div",null,this.props.contextItems.map(function(r,s){return c("React").createElement("div",{className:"_1n-e",key:"item:"+s},r)}))};function n(){j.apply(this,arguments)}n.propTypes={contactName:l.string,associatedObject:l.object,connectionContext:l.string,contextItems:l.arrayOf(l.string).isRequired,isVerified:l.bool,location:l.string.isRequired,participantIDs:l.arrayOf(l.string),participants:l.instanceOf(c("immutable").Map),thread:l.object,viewer:l.string.isRequired};f.exports=n}),null);
__d("XMessengerContextBannerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/messenger/context_banner/",{profile_id:{type:"Int",required:true},max_context_items:{type:"Int",defaultValue:3}})}),null);
__d("MessengerContextInformationStore",["AsyncRequest","EventEmitter","Map","TimeSlice","XMessengerContextBannerController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=new(c("Map"))(),k=new(c("Map"))();h=babelHelpers.inherits(l,c("EventEmitter"));i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$MessengerContextInformationStore1=function(r){if(k.get(r))return;var s=c("XMessengerContextBannerController").getURIBuilder().setInt("profile_id",r).getURI(),t=new(c("AsyncRequest"))().setAllowCrossPageTransition(true).setURI(s).setHandler(this.$MessengerContextInformationStore2.bind(this,r));k.set(r,t);t.send()}.bind(this),n}l.prototype.getOrFetch=function(m){var n=j.get(m);n||c("TimeSlice").guard(this.$MessengerContextInformationStore1,"Chat Tab Messenger Context Banner Fetch",{isContinuation:false})(m);return n};l.prototype.$MessengerContextInformationStore2=function(m,n){j.set(m,{connectionContext:n.payload.connection_context||"",contextItems:n.payload.context_items||[]});k["delete"](m);this.emit("change")};f.exports=new l()}),null);
__d("PagesMessengerContextBanner.react",["cx","MercuryThreadImage.react","ProfileHeaderCoverPhoto.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=83,l=260,m=60;i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;n.prototype.render=function(){var o=this.props.coverPhotoData?c("React").createElement(c("ProfileHeaderCoverPhoto.react"),{coverPhotoData:this.props.coverPhotoData,height:k,width:l}):null;return c("React").createElement("div",{className:"_fj3",style:this.props.style},o,c("React").createElement("div",{className:"_2-0o"},c("React").createElement(c("MercuryThreadImage.react"),{size:m,thread:this.props.thread,viewer:this.props.viewer})))};function n(){i.apply(this,arguments)}f.exports=n}),null);
__d("MessengerContextBannerContainer.react",["DOMDimensions","immutable","MercuryIDs","MercuryParticipants","MercuryThreads","MessengerContextBanner.react","MessengerContextInformationStore","PagesMessagingMercuryChatTabStore","PagesMessengerContextBanner.react","ReactComponentWithPureRenderMixin","React","ReactDOM","MercuryShareAttachmentRenderLocations","StoreAndPropBasedStateMixin"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"MessengerContextBannerContainer",mixins:[c("ReactComponentWithPureRenderMixin"),c("StoreAndPropBasedStateMixin")(c("MercuryParticipants"),c("MercuryThreads"),c("MessengerContextInformationStore"),c("PagesMessagingMercuryChatTabStore"))],propTypes:{location:h.string.isRequired,onResize:h.func,otherUserFBIDs:h.arrayOf(h.string),threadID:h.string,viewer:h.string.isRequired},statics:{calculateState:function j(k){__p&&__p();var l=null,m=null;if(k.threadID){l=c("MercuryThreads").getForFBID(k.viewer).getOrFetch(k.threadID);m=l&&l.participants}else if(k.otherUserFBIDs&&k.otherUserFBIDs.length===1)m=k.otherUserFBIDs.map(function(s){return c("MercuryParticipants").getIDFromVanityOrFBID(s)});var n=c("immutable").Map();if(m)n=n.withMutations(function(s){m&&m.forEach(function(t){s.set(t,c("MercuryParticipants").getOrFetch(t))})});var o=null,p=null;if(l){o=n.get(c("MercuryIDs").getParticipantIDFromFromThreadID(l.thread_id));p=l.associated_object}else o=m&&n.get(m[0]);var q=c("PagesMessagingMercuryChatTabStore").getStateByThread(k.threadID),r=q.coverPhotoData;return babelHelpers["extends"]({associatedObject:p,contact:o,coverPhotoData:r,participantIDs:m,participants:n,thread:l},i.getContextInformation(o&&o.fbid&&o.fbid.toString()))},getContextInformation:function j(k){var l=void 0;if(k)l=c("MessengerContextInformationStore").getOrFetch(k.toString());return l||{connectionContext:"",contextItems:[]}}},componentDidUpdate:function j(){var k=c("ReactDOM").findDOMNode(this);if(!k)return;var l=c("DOMDimensions").getElementDimensions(k).height;if(this.props.onResize)this.props.onResize(l)},render:function j(){__p&&__p();if(!this.state.contact){if(this.state.associatedObject&&this.props.location==c("MercuryShareAttachmentRenderLocations").MESSENGER)return c("React").createElement(c("MessengerContextBanner.react"),{associatedObject:this.state.associatedObject,contextItems:this.state.contextItems,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer});return null}if(this.state.contact.type==="page"){if(!this.state.connectionContext&&!this.state.contextItems.length)return null;if(this.props.location===c("MercuryShareAttachmentRenderLocations").CHAT)return c("React").createElement(c("PagesMessengerContextBanner.react"),{coverPhotoData:this.state.coverPhotoData,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer})}return c("React").createElement(c("MessengerContextBanner.react"),{contactName:this.state.contact.name,connectionContext:this.state.connectionContext,contextItems:this.state.contextItems,isVerified:this.state.contact.is_verified,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer})}});f.exports=i}),null);
__d("MessengerPlatformSubscriptionMessageClassification",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({EXEMPTED_TEMPLATE_MESSAGE:"exempted_template_message",MESSAGE_WITHIN_24HRS:"message_within_24hrs",SUBSCRIPTION_MESSAGE:"subscription_message",ACCEPTABLE_EXTRA_MESSAGE:"acceptable_extra_message",UNACCEPTABLE_EXTRA_MESSAGGE:"unacceptable_extra_message",AD_MESSAGE:"ad_message"})}),null);
__d("messengerNewMessagesNoticeReact",["cx","ix","fbt","React","linkReact","imageReact","bs_js_boolean","ReasonReact"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=i("86939"),l=j._("New Messages"),m=c("ReasonReact").statelessComponent("MessengerNewMessagesNoticeReact");function n(p,q,r,s){var t=r?r[0]:l,u=m.slice();u[9]=function(){return c("React").cloneElement(c("React").createElement("div",{className:"_4wzq"+(c("bs_js_boolean").to_js_boolean(p)?" _4wzr":"")+(c("bs_js_boolean").to_js_boolean(1-p)?" _4-je":"")},c("ReasonReact").element(0,0,c("linkReact").make(0,["_5f0v _4wzs"],0,0,0,0,0,[q],0,0,0,0,[p!==0?0:-1],0,0,[c("ReasonReact").element(0,0,c("imageReact").make(["_4wzt"],0,[k],0,0,0,0,[])),c("React").createElement("div",{className:"_1bqr"},t)]))),{"aria-hidden":c("bs_js_boolean").to_js_boolean(1-p)})};return u}var o=c("ReasonReact").wrapReasonForJs(m,function(p){return n(+p.isOpen,p.onClick,[p.label],[])});g.newMessageSrc=k;g.defaultLabel=l;g.component=m;g.make=n;g.jsComponent=o}),null);
__d("MessengerConversation.react",["cx","csx","fbt","Bootloader","BootloadOnRender.react","ChatTypingIndicators.react","CSS","DOM","DOMDimensions","Event","FluxContainer","ifRequired","immutable","ImmutableObject","JSReliabilityFixesGatingConfig","JSResource","KeyEventController","LazyComponent.react","MercuryActionType","MercuryIDs","MercuryDeliveryReceiptsRe","mercuryRogerRe","MercuryShareAttachmentRenderLocations","MessageList.react","MessengerAttachmentRenderer","messengerButtonReact","MessengerCollapsedLogMessageGroup.react","MessengerContextBannerContainer.react","MessengerConfig","MessengerDateBreak.react","MessengerFlexScrollableArea.react","MessengerBootloadedLogMessage.react","MessengerMessageGroup.react","messengerNewMessagesNoticeReact","MessengerPlatformSubscriptionMessageClassification","MessengerQuickCamButtonHTML5.react","MessengerQuickCamOrigins","MessengerSpinner.react","MessengerTypingIndicator.react","MessengerVideoAutoplayActions","MessengerVideoAutoplayStore","MessengerViewerContactMethodsWebGraphQLQuery","MNOmniMConstants","OmniMStore","Parent","React","ReactDOM","Set","SubscriptionsHandler","UserActivity","WebGraphQL","WebMessengerConstants","convertMIGColorToFIGColor","gkx","idx","joinClasses","setImmediate","throttle"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("MercuryDeliveryReceiptsRe").get(),n=c("mercuryRogerRe").get(),o=c("messengerButtonReact").jsComponent,p=c("messengerNewMessagesNoticeReact").jsComponent,q=c("immutable").OrderedMap,r=c("React").PropTypes,s=20,t=100;function u(event,y){return!!(c("KeyEventController").filterEventTypes(event,y)&&c("KeyEventController").filterEventModifiers(event,y)&&event.target instanceof Element&&c("Parent").bySelector(event.target,"._4_j4"))}k=babelHelpers.inherits(v,c("React").PureComponent);l=k&&k.prototype;function v(){__p&&__p();var y,z;for(var A=arguments.length,B=Array(A),C=0;C<A;C++)B[C]=arguments[C];return z=(y=l.constructor).call.apply(y,[this].concat(B)),this.state={readReceipts:w(this.props),deliveryTimestamp:0,scrollingToUnreadMessage:false,showUnreadNotice:false,unreadCount:this.props.thread?this.props.thread.unread_count:0,width:0,suggestions:null,omniMPrefs:null,viewerEmail:null,viewerPhone:null},this.$MessengerConversation1=null,this.$MessengerConversation2=0,this.$MessengerConversation3=0,this.$MessengerConversation4=null,this.$MessengerConversation6=function(){var D=this.$MessengerConversation14();D&&D.pageUp();return false}.bind(this),this.$MessengerConversation7=function(){var D=this.$MessengerConversation14();D&&D.pageDown();return false}.bind(this),this.$MessengerConversation8=function(D){if(D.target===document.body){this.scrollToTop();return false}return null}.bind(this),this.$MessengerConversation9=function(D){if(D.target===document.body){this.scrollToBottom();return false}return null}.bind(this),this.$MessengerConversation12=function(){__p&&__p();if(c("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;if(!this.refs.scrollable)return;var D=this.$MessengerConversation14(),E=this.refs.quickReply;E&&c("CSS").conditionClass(E,"_1mzg",!this.isScrolledToBottom());this.$MessengerConversation10();this.$MessengerConversation11();if(D&&this.state.unreadCount&&this.$MessengerConversation19(D))this.setState({showUnreadNotice:false,unreadCount:0});this.$MessengerConversation27(D);this.$MessengerConversation28(D)}.bind(this),this.$MessengerConversation26=function(D){D.preventDefault();this.setState({showUnreadNotice:false});this.$MessengerConversation16()}.bind(this),this.$MessengerConversation11=function(){__p&&__p();if(!this.isScrolledToBottom()||this.props.messages.size===0)return;if(c("UserActivity").isOnTab()&&c("UserActivity").isActive())this.props.onRead(this.props.threadID);else if(!this.$MessengerConversation4)this.$MessengerConversation4=c("UserActivity").subscribe(function(){if(c("UserActivity").isOnTab()){this.$MessengerConversation13();this.props.onRead(this.props.threadID)}}.bind(this))}.bind(this),this.handleResize=function(){__p&&__p();if(c("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;if(this.refs.scrollable){this.refs.scrollable.handleResize();var D=c("DOMDimensions").getElementDimensions(c("ReactDOM").findDOMNode(this.refs.scrollable)).width;if(D!==this.state.width)this.setState({width:D})}var E=this.refs.quickReply;E&&c("CSS").conditionClass(E,"_1mzg",!this.isScrolledToBottom());this.trackBottomIfRequired()}.bind(this),z}v.getStores=function(){return[c("OmniMStore")]};v.calculateState=function(y,z){if(!c("MercuryIDs").isValid(z.threadID))return babelHelpers["extends"]({},y);return{suggestions:c("OmniMStore").suggestionsForThread(z.threadID),omniMPrefs:c("OmniMStore").prefs()}};v.prototype.componentDidMount=function(){var y=new(c("SubscriptionsHandler"))();y.addSubscriptions(c("Event").listen(window,"resize",c("throttle")(this.handleResize,50)),c("KeyEventController").registerKey("PAGE_UP",this.$MessengerConversation6,u),c("KeyEventController").registerKey("PAGE_DOWN",this.$MessengerConversation7,u),c("KeyEventController").registerKey("HOME",this.$MessengerConversation8,u),c("KeyEventController").registerKey("END",this.$MessengerConversation9,u),n.subscribe("change",function(z,A){A[this.props.threadID]&&this.setState({readReceipts:w(this.props)})}.bind(this)),m.subscribe("change",function(z,A){this.setState({deliveryTimestamp:this.props.threadID?m.getDeliveryTime(this.props.threadID):0})}.bind(this)));this.$MessengerConversation1=y;this.$MessengerConversation10();this.handleResize();this.$MessengerConversation11();this.$MessengerConversation5=c("throttle")(this.$MessengerConversation12,t)};v.prototype.componentWillReceiveProps=function(y){var z=y.threadID!==this.props.threadID;if(z){this.$MessengerConversation13();this.setState({scrollingToUnreadMessage:false,showUnreadNotice:false,unreadCount:y.thread?y.thread.unread_count:0})}if(z||y.messages!==this.props.messages)this.setState({readReceipts:w(y),deliveryTimestamp:y.threadID?m.getDeliveryTime(y.threadID):0})};v.prototype.componentWillUnmount=function(){this.$MessengerConversation13();this.$MessengerConversation1&&this.$MessengerConversation1.release()};v.prototype.componentWillUpdate=function(){var y=this.$MessengerConversation14();if(y){this.$MessengerConversation2=y.getScrollHeight();this.$MessengerConversation3=y.getScrollTop()}};v.prototype.componentDidUpdate=function(y){__p&&__p();if(c("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;if(!this.refs.scrollable)return;if(this.props.threadID!==y.threadID||x(y,this.props)){this.scrollToBottom();this.$MessengerConversation15()}else{var z=this.$MessengerConversation14();if(z){var A=z.getScrollHeight();if(A!==this.$MessengerConversation2){var B=z.getScrollHeight()-this.$MessengerConversation2+this.$MessengerConversation3;this.refs.scrollable.scrollToPosition(B)}else this.$MessengerConversation15()}}if(this.props.messages!==y.messages){this.$MessengerConversation11();if(this.state.scrollingToUnreadMessage)this.$MessengerConversation16();this.$MessengerConversation17()}this.$MessengerConversation18();setTimeout(function(){var C=this.$MessengerConversation14();this.trackBottomIfRequired();if(C&&this.state.unreadCount&&!this.state.scrollingToUnreadMessage&&!this.props.isLoading)if(this.$MessengerConversation19(C))this.setState({showUnreadNotice:false,unreadCount:0});else this.setState({showUnreadNotice:true});this.$MessengerConversation10()}.bind(this),0)};v.prototype.render=function(){__p&&__p();if(this.props.isLoading&&this.props.messages.isEmpty())return this.$MessengerConversation20();var y=this.props.messages.last(),z=c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),A=null,B=null,C=this.state.suggestions||{},D=C.quickReplies,E=C.agentSuggestions;if(!D||!D.length)D=this.$MessengerConversation21(y);if(D&&D.length&&y&&y.author!==z){A=D;B=c("MNOmniMConstants").QUICKREPLIES}else if(E&&E.length&&c("gkx")("AT4E-H2IF55T_cfJfVFc0DIJ5Zc0x6Ksd6rrKuinf7B4BwJUeLW2H-a3HWX5xDBokJhpUd0lJcH9_F8HOyg9KFc8")){A=E;B=c("MNOmniMConstants").OMNIM}var F=y&&A&&A.length&&!A.every(function(O){return O.content_type==="user_email"&&this.state.viewerEmail===null||O.content_type==="user_phone_number"&&this.state.viewerPhone===null}.bind(this))&&A.filter(function(O){return!O.dismissed}).length?c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{options:A,threadID:y.thread_id,onVoiceClipCreate:this.props.onVoiceClipCreate,source:B,viewer:this.props.viewer,quickCamOriginLocation:c("MessengerQuickCamOrigins").MESSENGER,omniMPrefs:this.state.omniMPrefs,messageId:y.message_id,pageId:c("MercuryIDs").getUserIDFromParticipantID(y.author),isSponsored:y.is_sponsored,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone}),loader:c("JSResource")("MessengerBotsQuickReplyButtonList.react").__setRef("MessengerConversation.react"),placeholder:c("React").createElement("div",null)}):null,G=null;if(y&&y.message_source&&y.author!==z&&c("gkx")("AT7Fdvvof3gB21NGh8Fo7o5af68El03cTnUDtqQrI_yHQbziWN3MyQvvj6iMavHBZ0fTg3S3rpHTM9337zgjjUnM")){var H=y.message_source;if(H==="camera"){var I=this.props.thread?c("convertMIGColorToFIGColor")(this.props.thread.custom_color):null,J=c("React").createElement("div",{className:"_1gc5",style:I&&{color:I}},j._("Send a photo reply"));G=c("React").createElement("div",{className:"_1gc6"},c("React").createElement(c("MessengerQuickCamButtonHTML5.react"),{className:"_4rv5 _1gcb",location:c("MessengerQuickCamOrigins").MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer,textChild:J}))}}var K=null,L=null;if(G||F){K=c("React").createElement("div",{className:"_51op"},c("React").createElement("div",{className:"_51oq",onResize:this.handleResize}));L=c("React").createElement("div",{ref:"quickReply"},c("React").createElement("div",{className:"_1mzb",onResize:this.handleResize},G,F))}var M=j._("Messages"),N=j._("Load more...");return c("React").createElement(c("MessengerFlexScrollableArea.react"),{className:this.props.className,flexChildren:this.$MessengerConversation22(),footerChildren:L,onMount:function(){return c("setImmediate")(this.$MessengerConversation11)}.bind(this),onScroll:this.props.useManualFetch?undefined:this.$MessengerConversation5,ref:"scrollable",shouldStickToBottom:true,tabIndex:0,useScrollProtection:c("MessengerConfig").ChatScrollInterval},c("React").createElement("div",{"aria-label":M,className:c("joinClasses")("__i_",this.props.innerClassName),role:"region"},c("React").createElement("h3",{className:"accessible_elem"},M),this.$MessengerConversation23(),this.props.useManualFetch&&!this.props.upExhausted?c("React").createElement(o,{className:"_41jf",label:N,onClick:function(){return this.props.fetchMessages(c("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP)}.bind(this),type:"primary",use:"default"}):null,this.$MessengerConversation24(),c("React").createElement(c("MessageList.react"),{DateBreak:c("MessengerDateBreak.react"),deliveryTimestamp:this.state.deliveryTimestamp,isCanonical:this.props.isCanonical,LogMessage:c("MessengerBootloadedLogMessage.react"),CollapsedLogMessageGroup:c("MessengerCollapsedLogMessageGroup.react"),MessageGroup:c("MessengerMessageGroup.react"),messages:this.props.messages,onAttachmentLoad:this.$MessengerConversation25(this.props.threadID),readReceipts:this.state.readReceipts,ref:"messageList",location:c("MercuryShareAttachmentRenderLocations").MESSENGER,viewer:this.props.viewer,thread:this.props.thread}),this.props.useManualFetch&&!this.props.downExhausted?c("React").createElement(o,{className:"_41jf",label:N,onClick:function(){return this.props.fetchMessages(c("WebMessengerConstants").MORE_SEARCH_CONTEXT_DOWN)}.bind(this),type:"primary",use:"default"}):null,c("React").createElement(c("ChatTypingIndicators.react"),{indicatorClass:c("MessengerTypingIndicator.react"),indicatorsDidShow:function(){this.trackBottomIfRequired()}.bind(this),rootClassName:"clearfix _17pz",threadID:this.props.threadID,viewer:this.props.viewer}),K))};v.prototype.$MessengerConversation21=function(y){var z=null,A=y&&y.platform_xmd&&JSON.parse(y.platform_xmd),B=A&&A.message_classification===c("MessengerPlatformSubscriptionMessageClassification").AD_MESSAGE;if(B)z=A&&A.quick_replies;return z};v.prototype.$MessengerConversation10=function(){if(this.props.useManualFetch)return;var y=this.$MessengerConversation14();if(y&&y.getScrollTop()<s){this.props.fetchMessages(c("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP);this.$MessengerConversation17()}};v.prototype.$MessengerConversation18=function(){__p&&__p();var y=this.state.suggestions||{},z=y.quickReplies;if(!z||z.length===0)return;var A=c("gkx")("AT6b68OqbLsWJQlJTGZqwlCTZJ0z0taRGUXqOzuQVRDoLPO2Dnjh-maTANaNF_FUgpVzi4qt9-S_T7GMqZpzzd99"),B=c("gkx")("AT70ApPO8u4r9N24CdWkIiFYZMdcnAaeV9BaXzLxdBmkmVf60X7teW8bfJTrYYnPlB7TPT4_aBOsOQDbCdO-mpJj4JY2rmmLkTH2jaDU2xAiSg");if(z.some(function(C){return C.content_type==="user_email"&&A||C.content_type==="user_phone"&&B}))c("WebGraphQL").exec(new(c("MessengerViewerContactMethodsWebGraphQLQuery"))({})).done(function(C){var D,E,F,G,H=B?(D=C)!=null?(D=D.viewer)!=null?(D=D.user)!=null?D.all_phones:D:D:D:null,I=A?(E=C)!=null?(E=E.viewer)!=null?E.all_emails:E:E:null,J=!H?null:H.find(function(L){return L.is_preferred});if(!J&&H)J=H[0];var K=!I?null:I.find(function(L){return L.is_primary});this.setState({viewerEmail:(F=K)!=null?(F=F.email_address)!=null?F.deduplicated_email_address:F:F,viewerPhone:(G=J)!=null?(G=G.phone_number)!=null?G.universal_number:G:G})}.bind(this))};v.prototype.isScrolledToBottom=function(){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottom())};v.prototype.isScrolledToBottomWithHeight=function(y){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottomWithHeight(y))};v.prototype.$MessengerConversation22=function(){return c("React").createElement(p,{isOpen:this.state.showUnreadNotice,label:j._({"*":"{number} unread messages","_1":"1 unread message"},[j.plural(this.state.unreadCount,"number")]),onClick:this.$MessengerConversation26})};v.prototype.$MessengerConversation23=function(){if(!this.props.isLoaded)return null;return c("React").createElement(c("MessengerContextBannerContainer.react"),{location:c("MercuryShareAttachmentRenderLocations").MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer})};v.prototype.$MessengerConversation24=function(){if(this.props.isLoaded)return null;return c("React").createElement("div",{className:"_2k8v"},this.props.isLoading?c("React").createElement(c("MessengerSpinner.react"),null):null)};v.prototype.$MessengerConversation20=function(){return c("React").createElement("div",{className:"_4xu0"},c("React").createElement(c("MessengerSpinner.react"),{className:"_4xu1",size:c("MessengerSpinner.react").large_size}))};v.prototype.trackBottomIfRequired=function(){if(c("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;this.refs.scrollable&&this.refs.scrollable.trackBottomIfRequired()};v.prototype.scrollToBottom=function(){if(c("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToBottom()};v.prototype.scrollToTop=function(y){if(c("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToTop(y)};v.prototype.$MessengerConversation25=function(y){return function(){if(this.props.threadID!==y)return;this.trackBottomIfRequired()}.bind(this)};v.prototype.$MessengerConversation15=function(){c("DOM").scry(c("ReactDOM").findDOMNode(this),"img").forEach(function(y){if(y.complete)return;var z=this.props.threadID,A=c("Event").listen(y,"load",function(){if(this.props.threadID===z)this.trackBottomIfRequired();A.remove()}.bind(this))}.bind(this))};v.prototype.$MessengerConversation29=function(){var y=this.props.messages,z=this.state.unreadCount;if(!z||z>y.size)return null;return y.get(y.size-z)};v.prototype.$MessengerConversation19=function(y){__p&&__p();var z=this.$MessengerConversation29();if(!z)return false;var A=this.refs.messageList.getMessageElement(z.message_id);if(!A)return false;var B=A.getBoundingClientRect().top,C=y.getElement().getBoundingClientRect().top;if(B-C<0)return false;return true};v.prototype.$MessengerConversation30=function(y){return!!this.props.messages.find(function(z){return z.message_id===y})};v.prototype.$MessengerConversation16=function(){__p&&__p();if(!this.state.unreadCount)return;this.setState({scrollingToUnreadMessage:true});var y=this.$MessengerConversation29();if(!y){this.scrollToTop(false);return}this.$MessengerConversation31(y.message_id,function(){this.setState({scrollingToUnreadMessage:false,unreadCount:0})}.bind(this))};v.prototype.$MessengerConversation31=function(y,z){var A=this.refs.messageList.getMessageElement(y,true),B=this.$MessengerConversation14();if(!A||!B)return;var C=A.getBoundingClientRect().top,D=c("ReactDOM").findDOMNode(this.refs.messageList).getBoundingClientRect().top,E=B.getElement().getBoundingClientRect().top,F=C+Math.abs(D)+E;B.setScrollTop(F,true,{callback:z})};v.prototype.$MessengerConversation14=function(){if(c("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;return this.refs.scrollable&&this.refs.scrollable.getArea()};v.prototype.$MessengerConversation13=function(){this.$MessengerConversation4&&this.$MessengerConversation4.unsubscribe();this.$MessengerConversation4=null};v.prototype.$MessengerConversation32=function(){return this.props.messages.filter(function(y){return c("MessengerAttachmentRenderer").isSingleVideoAttachment(y)||c("MessengerAttachmentRenderer").isSharedVideoAttachmentMessage(y)}).reverse().map(function(y){return y.message_id})};v.prototype.$MessengerConversation27=function(y){__p&&__p();var z=this.refs.messageList;if(!z||!y)return;var A=[],B=y.getElement().getBoundingClientRect(),C=c("MessengerVideoAutoplayStore").getMessageIDs(this.props.threadID),D=C||this.$MessengerConversation32()||c("immutable").List();D.map(function(E){var F=c("MessengerAttachmentRenderer").getVideoElem(E,z);if(F)A.push([E,F.getBoundingClientRect()])});if(A.length)c("MessengerVideoAutoplayActions").onScroll(this.props.threadID,C?null:D,c("immutable").Map(A),B)};v.prototype.$MessengerConversation33=function(){return this.props.messages.filter(function(y){return c("MessengerAttachmentRenderer").isSingleSphericalPhotoAttachment(y)}).map(function(y){return y.message_id})};v.prototype.$MessengerConversation28=function(y){__p&&__p();c("ifRequired")("MessengerSphericalRendererActions",function(z){__p&&__p();c("ifRequired")("MessengerSphericalRendererStore",function(A){__p&&__p();var B=this.refs.messageList;if(!B||!y)return;var C=[],D=y.getElement().getBoundingClientRect(),E=A.getMessageIDs(this.props.threadID),F=E||this.$MessengerConversation33()||c("immutable").List();F.map(function(G){var H=c("MessengerAttachmentRenderer").getSphericalPhotoElem(G,B);if(H)C.push([G,H.getBoundingClientRect()])});if(C.length)z.onScroll(this.props.threadID,F,c("immutable").Map(C),D)}.bind(this),function(){})}.bind(this),function(){})};v.prototype.$MessengerConversation17=function(){c("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$MessengerConversation32());var y=this.$MessengerConversation33();if(y&&y.count()!==0)c("ifRequired")("MessengerSphericalRendererActions",function(z){z.updateStore(this.props.threadID,y)}.bind(this),function(){c("Bootloader").loadModules(["MessengerSphericalRendererActions","MessengerSphericalRendererStore"],function(z,A){z.updateStore(this.props.threadID,y)}.bind(this),"MessengerConversation.react")}.bind(this))};v.propTypes={contact:r.instanceOf(c("ImmutableObject")),downExhausted:r.bool,fetchMessages:r.func.isRequired,innerClassName:r.string,isCanonical:r.bool,isLoaded:r.bool,isLoading:r.bool,messages:r.instanceOf(c("immutable").List).isRequired,onVoiceClipCreate:r.func,participants:r.instanceOf(c("immutable").Map),thread:r.object,threadID:r.string.isRequired,upExhausted:r.bool,useManualFetch:r.bool,viewer:r.string.isRequired};function w(y){__p&&__p();var z=c("MercuryIDs").getParticipantIDFromUserID(y.viewer),A=n.getSeenTimestamps(y.threadID),B=new(c("Set"))(y.thread?y.thread.participants:A.keys());B["delete"](z);var C=null;c("immutable").Seq(y.messages).reverse().forEach(function(D){if(D.action_type!==c("MercuryActionType").LOG_MESSAGE){C=D;return false}return true});return A.withMutations(function(A){__p&&__p();c("immutable").Seq(y.messages).reverse().forEach(function(D){__p&&__p();if(B.size===0)return false;if(!B.has(D.author))return;A.update(D.author,function(E){var F=E;if(!E||E.watermark<=D.timestamp)F={watermark:D.timestamp,action:D.timestamp};if(C&&C.timestamp<F.watermark)F={watermark:C.timestamp,action:C.timestamp};return F});B["delete"](D.author)})})}function x(y,z){var A=c("MercuryIDs").getParticipantIDFromUserID(z.viewer);return z.threadID===y.threadID&&z.messages!==y.messages&&!z.messages.isEmpty()&&z.messages.last()!==y.messages.last()&&z.messages.last().author===A}f.exports=c("FluxContainer").create(v,{withProps:true})}),null);
__d("MessengerMessageRequestsInfo.react",["cx","fbt","React"],(function a(b,c,d,e,f,g,h,i){"use strict";var j=function j(){return c("React").createElement("div",{className:"_5u15"},i._("Open a request to get more info about who's messaging you.")," ",i._("They won't know you've seen it until you accept."))};f.exports=j}),null);
__d("MessengerThreadListGridWrapper.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.label;return c("React").createElement("div",null,c("React").createElement("h2",{className:"accessible_elem"},m),c("React").createElement("ul",{"aria-label":m,role:"grid"},this.props.children))};function l(){i.apply(this,arguments)}l.propTypes={label:k.string.isRequired};f.exports=l}),null);
__d("MessengerPlatformAbuseReportType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SPAM:"spam",INAPPROPRIATE:"inappropriate",OTHER_ABUSE:"other_abuse"})}),null);
__d("XMNReportPageConversationActionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messenger_platform/report_page_conversation/submit/",{page_id:{type:"FBID",required:true},report_type:{type:"String",required:true}})}),null);
__d("MNCommerceReportConversationDialog.react",["cx","fbt","AsyncRequest","Link.react","MercuryIDs","MercuryParticipants","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","messengerDialogsRe","MessengerPlatformAbuseReportType","MNCommerceDialogStateActions","MNCommercePromotionBlockDataManager","MNCommercePromotionManageBlockDialogContainer.react","React","XMNReportPageConversationActionController","XUIRadioList.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("XUIRadioList.react").Item,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={error:false,pageName:"",reportType:c("MessengerPlatformAbuseReportType").SPAM},this.$MNCommerceReportConversationDialog9=function(){this.$MNCommerceReportConversationDialog1();var t=function t(u,v){return c("MNCommercePromotionBlockDataManager").block(u,v)},u=this.props.pageID;c("MNCommerceDialogStateActions").showDialog(c("MNCommercePromotionManageBlockDialogContainer.react"),{pageID:u,onConfirmButtonClick:t})}.bind(this),this.$MNCommerceReportConversationDialog7=function(t){this.setState({reportType:t})}.bind(this),this.$MNCommerceReportConversationDialog1=function(){if(this.props.onToggle)this.props.onToggle();else c("messengerDialogsRe").removeDialog()}.bind(this),this.$MNCommerceReportConversationDialog6=function(){var t=c("XMNReportPageConversationActionController").getURIBuilder().setFBID("page_id",this.props.pageID).setString("report_type",this.state.reportType).getURI();new(c("AsyncRequest"))().setURI(t).setHandler(function(){this.$MNCommerceReportConversationDialog1()}.bind(this)).setErrorHandler(function(){this.setState({error:true})}.bind(this)).send()}.bind(this),p}n.prototype.componentWillMount=function(){var o=c("MercuryParticipants").getNow(c("MercuryIDs").getParticipantIDFromUserID(this.props.pageID));this.setState({pageName:o?o.short_name:""})};n.prototype.render=function(){if(this.props.showDialog===false)return null;return c("React").createElement(c("MessengerDialog.react"),{onToggle:this.$MNCommerceReportConversationDialog1},c("React").createElement(c("MessengerDialogHeader.react"),null,i._("Report")),this.$MNCommerceReportConversationDialog2(),this.$MNCommerceReportConversationDialog3())};n.prototype.$MNCommerceReportConversationDialog2=function(){var o=c("React").createElement("div",{className:"_5zjy"},i._("Help us understand what's happening:")),p=this.$MNCommerceReportConversationDialog4(),q=c("React").createElement("div",{className:"_5zjz"},i._("Reporting this conversation will also turn off all messages from {page name}.",[i.param("page name",this.state.pageName)])),r=this.$MNCommerceReportConversationDialog5();return this.state.error?c("React").createElement(c("MessengerDialogBody.react"),{className:"_5zj-"},i._("Sorry, Something went wrong.")):c("React").createElement(c("MessengerDialogBody.react"),{className:"_5zj_"},o,p,q,r)};n.prototype.$MNCommerceReportConversationDialog3=function(){var o=i._("Report"),p=i._("Cancel"),q=i._("OK");if(this.state.error)return c("React").createElement(c("MessengerDialogFooter.react"),{className:"_5zk0"},c("React").createElement(c("MessengerDialogButton.react"),{label:q,onClick:this.$MNCommerceReportConversationDialog1,type:"primary",use:"default"}));return c("React").createElement(c("MessengerDialogFooter.react"),{className:"_5zk0"},c("React").createElement(c("MessengerDialogButton.react"),{label:p,type:"secondary",onClick:this.$MNCommerceReportConversationDialog1,use:"default"}),c("React").createElement(c("MessengerDialogButton.react"),{label:o,onClick:this.$MNCommerceReportConversationDialog6,type:"primary",use:"default"}))};n.prototype.$MNCommerceReportConversationDialog4=function(){return c("React").createElement(c("XUIRadioList.react"),{selectedValue:this.state.reportType,onValueChange:this.$MNCommerceReportConversationDialog7},c("React").createElement(l,{value:c("MessengerPlatformAbuseReportType").SPAM},i._("It's spam")),c("React").createElement(l,{value:c("MessengerPlatformAbuseReportType").INAPPROPRIATE},i._("It's inappropriate")),c("React").createElement(l,{value:c("MessengerPlatformAbuseReportType").OTHER_ABUSE},i._("Other")))};n.prototype.$MNCommerceReportConversationDialog5=function(){return c("React").createElement("div",{className:"_5zk1"},i._("To stop receiving messages without reporting {page name}, you can manage your messages instead.",[i.param("page name",this.state.pageName)]),this.$MNCommerceReportConversationDialog8())};n.prototype.$MNCommerceReportConversationDialog8=function(){return c("React").createElement(c("Link.react"),{className:"_5zk2",onClick:this.$MNCommerceReportConversationDialog9},i._("Manage"))};n.propTypes={pageID:m.string.isRequired,showDialog:m.bool,onToggle:m.func};f.exports=n}),null);
__d("MessengerDeleteAllMenuBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("messengerDeleteAllMenuReactComponent").__setRef("MessengerDeleteAllMenuBootloader.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MessengerDeleteDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("messengerDeleteDialogReactComponent").__setRef("MessengerDeleteDialogBootloader.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MessengerMarkSpamDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("messengerMarkSpamDialogReactComponent").__setRef("MessengerMarkSpamDialogBootloader.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MessengerMuteDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("messengerMuteDialogReactComponent").__setRef("MessengerMuteDialogBootloader.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MessengerRTCGroupCallUnsupportedBrowserDialog.react",["fbt","Link.react","MessengerDialog.react","messengerDialogBodyReact","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","React","UserAgent"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("messengerDialogBodyReact").jsComponent,j=function j(n){var o=n.hasVideo,p=n.onUnmount;return c("React").createElement(c("MessengerDialog.react"),{onToggle:p},c("React").createElement(c("MessengerDialogHeader.react"),null,k(o)),c("React").createElement(i,null,l(o)),c("React").createElement(c("MessengerDialogFooter.react"),null,c("React").createElement(c("MessengerDialogButton.react"),{label:h._("OK"),onClick:p,type:"primary"})))};function k(n){return n?h._("Switch Browsers to Make Group Video Chats"):h._("Switch Browsers to Make Group Calls")}function l(n){return n?h._("Unfortunately, our group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group video chat, open in {link to install chrome}.",[h.param("browser name, i.e. Internet Explorer or Safari",m()),h.param("link to install chrome",c("React").createElement(c("Link.react"),{href:"https://www.google.com/chrome/index.html",target:"_blank"},"Google Chrome"))]):h._("Unfortunately, our group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group call, open in {link to install chrome}.",[h.param("browser name, i.e. Internet Explorer or Safari",m()),h.param("link to install chrome",c("React").createElement(c("Link.react"),{href:"https://www.google.com/chrome/index.html",target:"_blank"},"Google Chrome"))])}function m(){if(c("UserAgent").isBrowser("Firefox"))return h._("Firefox");else if(c("UserAgent").isBrowser("IE"))return h._("Internet Explorer");else if(c("UserAgent").isBrowser("Safari"))return h._("Safari");else return h._("your browser")}f.exports=j}),null);
__d("MessengerRTCGroupCallUnsupportedBrowserDialogController",["DOM","MessengerRTCGroupCallUnsupportedBrowserDialog.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";var h={_container:c("DOM").create("div"),render:function i(j){var k=j.hasVideo;c("ReactDOM").render(c("React").createElement(c("MessengerRTCGroupCallUnsupportedBrowserDialog.react"),{hasVideo:k,onUnmount:function(){return this.unmount()}.bind(this)}),this._container)},unmount:function i(){c("ReactDOM").unmountComponentAtNode(this._container)}};f.exports=h}),null);
__d("MessengerRTCUnavailableDialog.react",["fbt","messengerDialogsRe","MessengerDialog.react","messengerDialogBodyReact","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("messengerDialogBodyReact").jsComponent,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.render=function(){return c("React").createElement(c("MessengerDialog.react"),{onToggle:this.$MessengerRTCUnavailableDialog1},c("React").createElement(c("MessengerDialogHeader.react"),null,h._("Can't Make Call")),c("React").createElement(k,null,this.$MessengerRTCUnavailableDialog2()),c("React").createElement(c("MessengerDialogFooter.react"),null,c("React").createElement(c("MessengerDialogButton.react"),{action:"cancel",label:h._("OK"),type:"primary"})))};m.prototype.$MessengerRTCUnavailableDialog2=function(){return c("React").createElement("div",null,h._("{name} is not available right now.",[h.param("name",this.props.name)]))};m.prototype.$MessengerRTCUnavailableDialog1=function(n){if(!n)c("messengerDialogsRe").removeDialog()};function m(){i.apply(this,arguments)}m.propTypes={name:l.string.isRequired};f.exports=m}),null);
__d("messengerRTCVideoCallButtonReact",["fbt","React","ReasonReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={height:"32px",width:"32px"};function j(o,p){return{clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:o,strokeMiterlimit:"10",strokeWidth:"2"}}var k=j("#888888",0),l=c("ReasonReact").statelessComponent("MessengerRTCVideoCallButtonReact");function m(o,p,q,r){var s=l.slice();s[9]=function(){var t=q!==0?h._("Start a group video chat"):h._("Start a video chat"),u=p!==0?j(o,0):k;return c("React").createElement("div",{style:i,title:t},c("React").createElement("svg",{style:u,viewBox:"0 0 64 64"},c("React").createElement("title",undefined,t),c("React").createElement("g",undefined,c("React").createElement("g",undefined,c("React").createElement("path",{d:"M47,27.8v7.5l9,4.5V23.2L47,27.8z M37.2,17H13.8C10.6,17,8,19.6,8,22.8v17.4c0,3.2,2.6,5.8,5.8,5.8h23.3\nc3.2,0,5.8-2.6,5.8-5.8V22.8C43,19.6,40.4,17,37.2,17z"})))))};return s}var n=c("ReasonReact").wrapReasonForJs(l,function(o){return m(o.customColor,+o.isAvailable,+o.isGroupChat,[])});g.svgWrapperStyle=i;g.svgStyle=j;g.unavailable=k;g.component=l;g.make=m;g.jsComponent=n}),null);
__d("messengerRTCVoiceCallButtonReact",["fbt","React","ReasonReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={height:"32px",width:"32px"};function j(o,p){return{clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:o,strokeMiterlimit:"10",strokeWidth:"2"}}var k=j("#888888",0),l=c("ReasonReact").statelessComponent("MessengerRTCVoiceCallButtonReact");function m(o,p,q,r){var s=l.slice();s[9]=function(){var t=q!==0?h._("Start a group call"):h._("Start a voice call"),u=p!==0?j(o,0):k;return c("React").createElement("div",{style:i,title:t},c("React").createElement("svg",{style:u,viewBox:"0 0 64 64"},c("React").createElement("title",undefined,t),c("React").createElement("path",{d:"M48.3,50.5c-7.7,6.5-24.2-10-24.5-10.3C23.5,39.9,7,23.4,13.5,15.7c4.8-5.7,6.3-3.4,7-2.7\nc0.6,0.5,5.7,7.8,6,9.2c0.3,1.4-2.4,4.6-2.2,5.9c0.2,1.2,3.6,5,5.1,6.5c1.5,1.5,5.3,4.9,6.5,5.1c1.2,0.2,4.4-2.5,5.9-2.2\nc1.4,0.3,8.7,5.4,9.2,6C51.6,44.2,54,45.7,48.3,50.5z"})))};return s}var n=c("ReasonReact").wrapReasonForJs(l,function(o){return m(o.customColor,+o.isAvailable,+o.isGroupChat,[])});g.svgWrapperStyle=i;g.svgStyle=j;g.unavailable=k;g.component=l;g.make=m;g.jsComponent=n}),null);
__d("MessengerRTCCallButton.react",["invariant","immutable","ImmutableObject","Link.react","MercuryIDs","MercuryThreadIDMap","messengerDialogsRe","MessengerRTCUnavailableDialog.react","messengerRTCVideoCallButtonReact","messengerRTCVoiceCallButtonReact","MessengerRTCFunnelLogger","MNRTCCallabilityStore","React","RTCCallState","StoreAndPropBasedStateMixin","FBRTCLogger"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("MercuryThreadIDMap").get(),j=c("messengerRTCVideoCallButtonReact").jsComponent,k=c("messengerRTCVoiceCallButtonReact").jsComponent,l=c("FBRTCLogger").Trigger,m=c("React").PropTypes,n=c("React").createClass({displayName:"MessengerRTCCallButton",mixins:[c("StoreAndPropBasedStateMixin")(c("MNRTCCallabilityStore"))],statics:{calculateState:function o(p){if(c("MercuryIDs").isGroupChat(p.threadID))return{isCallable:true};var q=c("MercuryIDs").getUserIDFromThreadID(p.threadID),r=q?c("MNRTCCallabilityStore").isCallable(q):false;return{isCallable:r}}},propTypes:{className:m.string.isRequired,customColor:m.string.isRequired,isVideo:m.bool.isRequired,participants:m.instanceOf(c("immutable").Map).isRequired,thread:m.instanceOf(c("ImmutableObject")).isRequired,threadID:m.string.isRequired,viewer:m.string.isRequired,calleeName:m.string.isRequired},render:function o(){var p={customColor:this.props.customColor,isAvailable:this.state.isCallable,isGroupChat:c("MercuryIDs").isGroupChat(this.props.threadID)};return c("React").createElement(c("Link.react"),{className:this.props.className,onClick:this._handleStartCall},this.props.isVideo?c("React").createElement(j,p):c("React").createElement(k,p))},_handleStartCall:function o(p){__p&&__p();p.preventDefault();c("MessengerRTCFunnelLogger").startFunnel("FBMessagesPage");if(this.state.isCallable)if(c("MercuryIDs").isGroupChat(this.props.threadID)){c("MessengerRTCFunnelLogger").appendAction("start_in_group_thread");e(["FBRTCCore","FBRTCSupport","MessengerRTCGroupCallUnsupportedBrowserDialogController","MessengerRTCGroupCallParticipantsPickerDialogController"],function(q,r,s,t){__p&&__p();var u=this.props.thread.rtc_call_data;if(u&&u.call_state!==c("RTCCallState").NO_ONGOING_CALL&&u.server_info_data){c("MessengerRTCFunnelLogger").appendAction("join_existing_call");q.startGroupCall({conferenceName:"GROUP:"+this.props.thread.thread_fbid,hasVideo:this.props.isVideo,serverInfoData:u.server_info_data,trigger:u.call_state!==c("RTCCallState").AUDIO_GROUP_CALL?this.props.isVideo?l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:this.props.isVideo?l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON});return}if(!r.isGroupCallWebtrcSupported()){c("MessengerRTCFunnelLogger").endFunnel("unsupported_browser");s.render({hasVideo:this.props.isVideo});return}var v=function(w){c("MessengerRTCFunnelLogger").appendAction("render_participant_picker");t.render({participants:this.props.participants.filter(function(x){var y=x.fbid;return y!==this.props.viewer}.bind(this)),thread:this.props.thread,viewerID:this.props.viewer,trigger:this.props.isVideo?l.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:l.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON,conferenceName:"GROUP:"+w,hasVideo:this.props.isVideo})}.bind(this);if(c("MercuryIDs").isLocalThread(this.props.threadID))i.getServerIDFromClientID(this.props.threadID,function(w){return v(w)});else v(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID))}.bind(this))}else{c("MessengerRTCFunnelLogger").appendAction("start_in_p2p_thread");e(["FBRTCCore"],function(q){var r=c("MercuryIDs").getUserIDFromThreadID(this.props.threadID);r||h(0);q.startOutgoingCall(r,"messenger_dot_com",!this.props.isVideo)}.bind(this))}else{c("MessengerRTCFunnelLogger").endFunnel("callee_not_callable");c("messengerDialogsRe").showDialog(function(){return c("React").createElement(c("MessengerRTCUnavailableDialog.react"),{name:this.props.calleeName})}.bind(this))}}});f.exports=n}),null);
__d("XMessengerDotComSpoofIFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/spoof/fb_iframe_target/",{gk_spoof:{type:"String"}})}),null);
__d("XSpoofMessengerDotComIFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/spoof/messenger_dot_com_iframe/",{redirect_uri:{type:"String",required:true}})}),null);
__d("MessengerSpoof",["Arbiter","DOM","JSXDOM","URI","XSpoofMessengerDotComIFrameController","XMessengerDotComSpoofIFrameController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=6e3;function i(k){var l=c("JSXDOM").iframe({src:j().toString(),width:0,height:0});c("DOM").appendContent(document.body,l);c("Arbiter").subscribeOnce("messengerdotcom_spoof",function(){c("DOM").remove(l);k()});setTimeout(function(){c("Arbiter").inform("messengerdotcom_spoof")},h)}function j(){var k=new(c("URI"))(document.URL),l=c("XMessengerDotComSpoofIFrameController").getURIBuilder().getURI().getQualifiedURI().toString(),m=c("XSpoofMessengerDotComIFrameController").getURIBuilder().setString("redirect_uri",l).getURI();return m.setDomain(k.getDomain().replace("messenger.com","facebook.com")).setPort(k.getPort()).setProtocol("https")}f.exports={init:i}}),null);
__d("MessengerThreadlistMessageRequestsRow.react",["cx","fbt","ix","Image.react","ImmutableObject","LinkWithHiddenURLBar.react","MercuryConfig","MercuryIDs","MercuryParticipants","MessagingTag","MessengerActions","MNAdsLogMessageUtils","React","Keys","intlList","MessengerMessageRequestsTypedLogger","CurrentUser","gkx","shallowEqual"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=50,n=j("86936"),o=c("React").PropTypes;k=babelHelpers.inherits(p,c("React").Component);l=k&&k.prototype;function p(){__p&&__p();var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.$MessengerThreadlistMessageRequestsRow4=function(v){if(this.props.aggregatedThreads.length>0){var w=this.props.aggregatedThreads,x=w.map(function(y){return y.thread_id});c("MessengerActions").selectAggregation(x);this.props.onAggregationClick&&this.props.onAggregationClick(v,w)}else{v.preventDefault();c("MessengerActions").changeFolder(c("MessagingTag").PENDING)}}.bind(this),r}p.prototype.shouldComponentUpdate=function(q){return!c("shallowEqual")(this.props,q)};p.prototype.componentDidUpdate=function(q){if(this.props.isFocused)this.$MessengerThreadlistMessageRequestsRow1&&this.$MessengerThreadlistMessageRequestsRow1.focus&&this.$MessengerThreadlistMessageRequestsRow1.focus()};p.prototype.render=function(){var q=this.props.newMessageRequestThreads.length||this.props.aggregatedThreads.length;if(q===0)return null;var r=this.$MessengerThreadlistMessageRequestsRow2()==0?"_1htf _r0_":"_1htf _5nxb";return c("React").createElement("li",{className:"_5l-3 _1ht1 _2il3 _2kt",ref:function(s){this.$MessengerThreadlistMessageRequestsRow1=s}.bind(this),onKeyPress:this.$MessengerThreadlistMessageRequestsRow3,role:"row",tabIndex:-1},c("React").createElement(c("LinkWithHiddenURLBar.react"),{tabIndex:-1,onAllClicks:this.$MessengerThreadlistMessageRequestsRow4,className:"_1ht5 _5l-3"},c("React").createElement("div",{className:"_5l-3 _1qt3 _5nxe"},c("React").createElement(c("Image.react"),{alt:"",height:m,src:n,width:m}),this.$MessengerThreadlistMessageRequestsRow5()),c("React").createElement("div",{className:"_1qt4 _5l-m"},c("React").createElement("div",{className:"_1qt5 _5l-3"},c("React").createElement("div",{className:"_1ht6 _5nxa"},this.$MessengerThreadlistMessageRequestsRow6())),c("React").createElement("div",{className:"_1qt5 _5l-3"},c("React").createElement("div",{className:r},this.$MessengerThreadlistMessageRequestsRow7())))))};p.prototype.$MessengerThreadlistMessageRequestsRow2=function(){var q=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads;if(!c("MercuryConfig").MCMA)return q.length;var r=0;q.forEach(function(s){return s.unread_count!==0?r++:r});return r};p.prototype.$MessengerThreadlistMessageRequestsRow6=function(){var q=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads;return c("gkx")("AT6GEfChyW-tzylcdm6O_JRhHajnylVXoVE8pv4PNlNhitDF6RnMoDj8H5hMhwblsW44-uzLmxrmI8D6_Amq24p9")?i._({"*":"Connection Requests","_1":"Connection Request"},[i.plural(q.length)]):i._({"*":"New Message Requests","_1":"New Message Request"},[i.plural(q.length)])};p.prototype.$MessengerThreadlistMessageRequestsRow5=function(){var q=this.$MessengerThreadlistMessageRequestsRow2();return q==0?null:c("React").createElement("span",{className:"_5nxf"},i._({"*":"{count}"},[i.param("count",q,[0])]))};p.prototype.componentDidMount=function(){var q,r=this;if(this.props.aggregatedThreads&&this.props.aggregatedThreads.length>0)(function(){var s=c("CurrentUser").getID(),t=r.props.aggregatedThreads.map(function(u){return c("MercuryIDs").getThreadKeyfromThreadIDUserID(u.thread_id,s)});new(c("MessengerMessageRequestsTypedLogger"))().setAction("aggregation_unit_impression").setThreadKeyList(t.filter(function(u){return u}).join(", ")).setEntryPoint("inbox_aggregation").setSurface("inbox").setFolderType("pending").log()})()};p.prototype.$MessengerThreadlistMessageRequestsRow8=function(){__p&&__p();var q=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads,r=i._({"*":"From people you may know","_1":"From someone you may know"},[i.plural(q.length)]),s=c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),t=[];for(var u=0,v=0;v<3&&u<q.length;u++){var w=q[u].participants.find(function(y){return y!==s});if(w){var x=c("MercuryParticipants").getOrFetch(w);if(x){v++;t.push(x.name.split(" ")[0])}}}if(!t||t.length==0)return r;if(q.length>0)c("MNAdsLogMessageUtils").logAdsThreadListImpression(q[0]);return q.length-t.length==0?i._("From {name}",[i.param("name",c("intlList")(t,c("intlList").CONJUNCTIONS.NONE))]):i._({"*":"From {name} and {count} more"},[i.param("name",c("intlList")(t,c("intlList").CONJUNCTIONS.NONE)),i.param("count",q.length-t.length,[0])])};p.prototype.$MessengerThreadlistMessageRequestsRow7=function(){__p&&__p();if(c("MercuryConfig").MCMA)return this.$MessengerThreadlistMessageRequestsRow8();var q=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads,r=i._({"someone":"From someone you may know","people":"From people you may know"},[i["enum"](q.length===1?"someone":"people",{someone:"someone",people:"people"})]),s=c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),t=q[0].participants.find(function(v){return v!==s});if(!t)return r;var u=c("MercuryParticipants").getOrFetch(t);if(!u||!u.name)return r;if(q.length>0)c("MNAdsLogMessageUtils").logAdsThreadListImpression(q[0]);return q.length===1?i._("From {name}",[i.param("name",u.name)]):i._({"*":"From {name} and {count} more"},[i.param("name",u.name),i.param("count",q.length-1,[0])])};p.prototype.$MessengerThreadlistMessageRequestsRow9=function(q){q.preventDefault();var r=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads;this.props.onFocus(r[0].thread_id)};p.prototype.$MessengerThreadlistMessageRequestsRow3=function(q){q.preventDefault();var r=q.charCode;if(r===c("Keys").RETURN)c("MessengerActions").changeFolder(c("MessagingTag").PENDING)};p.propTypes={onAggregationClick:o.func,isFocused:o.bool,newMessageRequestThreads:o.arrayOf(o.instanceOf(c("ImmutableObject"))).isRequired,aggregatedThreads:o.arrayOf(o.instanceOf(c("ImmutableObject"))),viewer:o.string.isRequired};f.exports=p}),null);
__d("MessengerComposerState",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h=c("immutable").Record({step:null,recipients:c("immutable").List()});h.__TCmeta={type:"MessengerComposerState"};f.exports=h}),null);
__d("MessengerComposerSteps",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({NULL:null,SELECT_RECIPIENTS:null,COMPOSE:null});f.exports=h}),null);
__d("MessengerComposerStore",["EditorState","immutable","MessengerActions","MessengerComposerActions","MessengerComposerState","MessengerComposerSteps","MessengerConstants","MessengerDispatcher","MessengerEditorStateManager","MessengerStateStore","MessengerStore","MessengerView"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=new(c("MessengerComposerState"))({step:c("MessengerComposerSteps").NULL,recipients:c("immutable").List()});h=babelHelpers.inherits(k,c("MessengerStore"));i=h&&h.prototype;function k(){i.constructor.call(this);this.$MessengerComposerStore1=j}k.prototype.getState=function(){return this.$MessengerComposerStore1};k.prototype.__onDispatch=function(l){__p&&__p();c("MessengerDispatcher").waitFor([c("MessengerStateStore").getDispatchToken()]);var m=c("MessengerStateStore").getState().detailView,n=this.$MessengerComposerStore1.recipients,o=this.$MessengerComposerStore1.step,p=null,q=null;switch(l.type){case c("MessengerComposerActions").Types.ADD_TOKEN:if(n.some(function(v){return v.getUniqueID()===l.entry.getUniqueID()}))break;p=n.push(l.entry);break;case c("MessengerComposerActions").Types.REMOVE_TOKEN:var r=l.entry.getUniqueID(),s=n.findIndex(function(v){return v.getUniqueID()===r});if(s!==-1)p=n["delete"](s);break;case c("MessengerComposerActions").Types.FOCUS_COMPOSER:if(o===c("MessengerComposerSteps").SELECT_RECIPIENTS)q=c("MessengerComposerSteps").COMPOSE;break;case c("MessengerComposerActions").Types.FOCUS_TYPEAHEAD:if(o===c("MessengerComposerSteps").COMPOSE)q=c("MessengerComposerSteps").SELECT_RECIPIENTS;break;case c("MessengerActions").Types.REPLACE_STATE:var t=c("MessengerStateStore").getPrevState().detailView;if(t!==c("MessengerView").DETAIL.COMPOSE&&m===c("MessengerView").DETAIL.COMPOSE)q=c("MessengerComposerSteps").SELECT_RECIPIENTS;break;case c("MessengerComposerActions").Types.MOVE_DRAFT:c("MessengerEditorStateManager").set(l.threadID,c("MessengerEditorStateManager").get(c("MessengerConstants").NEW_THREAD_KEY));break;case c("MessengerComposerActions").Types.EXIT_COMPOSE_STATE:var u=c("EditorState").createEmpty();setTimeout(function(){c("MessengerEditorStateManager").set(c("MessengerConstants").NEW_THREAD_KEY,c("EditorState").forceSelection(u,u.getSelection()))},0);q=c("MessengerComposerSteps").NULL;p=c("immutable").List();break}if(p||q){this.$MessengerComposerStore1=new(c("MessengerComposerState"))({step:q||o,recipients:p||n});this.emitChange()}};f.exports=new k()}),null);
__d("MessengerThreadlistNewMessageRow.react",["cx","fbt","ix","Image.react","LinkWithHiddenURLBar.react","MercuryIDs","MercuryParticipantListRenderer","MercuryParticipants","MercuryParticipantsImage.react","MessengerActions","MessengerComposerStore","messengerProfileImageWrapperReact","MessengerView","ReactComponentWithPureRenderMixin","PureStoreBasedStateMixin","React","ShimButton.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=c("messengerProfileImageWrapperReact").jsComponent,l=50,m=j("86935"),n=c("React").PropTypes,o=c("React").createClass({displayName:"MessengerThreadlistNewMessageRow",mixins:[c("ReactComponentWithPureRenderMixin"),c("PureStoreBasedStateMixin")(c("MercuryParticipants"),c("MessengerComposerStore"))],propTypes:{isActive:n.bool,onClose:n.func.isRequired},statics:{calculateState:function p(){return{participants:c("MessengerComposerStore").getState().recipients.map(function(q){return c("MercuryParticipants").getOrFetch(c("MercuryIDs").getParticipantIDFromUserID(q.getUniqueID()))}).filter(function(q){return!!q})}}},render:function p(){return c("React").createElement("li",{className:"_5l-3 _1ht1"+(this.props.isActive?" _1ht2":"")},c("React").createElement(c("LinkWithHiddenURLBar.react"),{onAllClicks:this._handleClickRow,className:"_1ht5 _2il3 _5l-3"},this._renderImage(),c("React").createElement("div",{className:"_1qt4 _5l-m"},c("React").createElement("div",{className:"_1qt5 _5l-3"},c("React").createElement("div",{className:"_1ht6"},this._renderTitle()),c("React").createElement(c("ShimButton.react"),{className:"_23ct",onClick:this.props.onClose})),c("React").createElement("div",{className:"_1qt5 _5l-3"},"\xa0"))))},_renderImage:function p(){var q=this.state.participants;if(!q.isEmpty())return c("React").createElement("div",{className:"_1qt3 _5l-3"},c("React").createElement(k,{isMessengerUser:q.size===1&&q.first().is_messenger_user,size:l,showBadge:false},c("React").createElement(c("MercuryParticipantsImage.react"),{participants:q.map(function(r){return r.id}).slice(0,3).toArray(),size:l})));return c("React").createElement("div",{className:"_1qt3 _5l-3"},c("React").createElement(c("Image.react"),{height:l,src:m,width:l}))},_renderTitle:function p(){if(this.state.participants.isEmpty())return i._("New message");return i._("New message to {List of message recipients}",[i.param("List of message recipients",new(c("MercuryParticipantListRenderer"))().renderParticipantList(this.state.participants.toArray()))])},_handleClickRow:function p(q){q.preventDefault();c("MessengerActions").changeDetailView(c("MessengerView").DETAIL.COMPOSE)}});f.exports=o}),null);
__d("XNFXStartForMessageThreadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/nfx/start_message_thread/",{thread_fbid:{type:"String",required:true},responsible_fbid:{type:"Int"},av:{type:"Int"},location:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("keysRe",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=8,i=9,j=13,k=18,l=27,m=32,n=33,o=34,p=35,q=36,r=37,s=38,t=39,u=40,v=46,w=188,x=190,y=65,z=90,A=48,B=96,C=105;g.backspace=h;g.tab=i;g.$$return=j;g.alt=k;g.esc=l;g.space=m;g.page_up=n;g.page_down=o;g.end_=p;g.home=q;g.left=r;g.up=s;g.right=t;g.down=u;g.$$delete=v;g.comma=w;g.period=x;g.a=y;g.z=z;g.zero=A;g.numpad_0=B;g.numpad_9=C}),null);
__d("mNCommerceReportConversationDialogReact",["ReasonReact","MNCommerceReportConversationDialog.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact").wrapJsForReason(c("MNCommerceReportConversationDialog.react"),{pageID:i},j)}g.make=h}),null);
__d("messengerBlockDialogReact",["cx","fbt","bs_curry","React","utilsRe","linkReact","ReasonReact","bs_js_primitive","messengerDialogReact","messengerDialogBodyReact","IgnoreMessagesTypedLogger"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact").statelessComponent("MessengerBlockDialogReact");function k(o,p){return c("React").createElement("div",{className:"_1q73"},i._("If you want, you can also {link}",[i.param("link",c("ReasonReact").element(0,0,c("linkReact").make(0,0,0,0,0,0,[p],0,0,0,0,0,0,["_blank"],0,i._("block {short_name_or_description} on Facebook.",[i.param("short_name_or_description",c("utilsRe").$pipe$unknown(o,i._("this person")))]))))]))}function l(o,p,q,r,s){__p&&__p();var t=j.slice();t[9]=function(){__p&&__p();var u=function u(){c("bs_curry")._1(p,false);return c("bs_curry")._1(o,0)},v;if(q){var w=q[0];v=[[w.short_name],c("bs_js_primitive").null_undefined_to_opt(w.href)]}else v=[0,0];var x=v[1],y=v[0];if(!(r==null)){var z=new(c("IgnoreMessagesTypedLogger"))().setEvent("block_clicked").setThreadID(r).setPlatform("messengerdotcom");z.log()}return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,p,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,i._("Block Messages"))),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[c("React").createElement("div",{className:"_1q73"},i._("Stop getting messages and calls from {short_name_or_description} in Messenger.",[i.param("short_name_or_description",c("utilsRe").$pipe$unknown(y,i._("this person")))])),x?k(y,x[0]):null,c("React").createElement("div",undefined,c("ReasonReact").element(0,0,c("linkReact").make(0,0,0,0,0,0,["https://www.facebook.com/help/389645087895231"],0,0,0,0,0,0,["_blank"],0,i._("Learn more"))))])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0](0,[i._("Block Messages")],0,["danger"],[u],[0],0,0,[]))]))]))};return t}var m=c("ReasonReact").wrapReasonForJs(j,function(o){return l(o.onBlock,o.onToggle,c("bs_js_primitive").null_undefined_to_opt(o.contact),o.threadID,[])}),n=c("utilsRe").$pipe$unknown;g.$pipe$unknown=n;g.component=j;g.renderBlockOnFacebook=k;g.make=l;g.jsComponent=m}),null);
__d("messengerDeleteDialogBootloaderReact",["ReasonReact","MessengerDeleteDialogBootloader.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){return c("ReasonReact").wrapJsForReason(c("MessengerDeleteDialogBootloader.react"),{onArchive:i,onDelete:j,onToggle:k},l)}g.make=h}),null);
__d("messengerIgnoreDialogReact",["cx","fbt","bs_curry","React","gkx","utilsRe","ReasonReact","bs_js_primitive","messengerDialogReact","messengerDialogBodyReact","IgnoreMessagesTypedLogger"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact").statelessComponent("MessengerIgnoreDialogReact");function k(n,o,p,q,r,s){__p&&__p();var t=j.slice();t[9]=function(){var u=+c("gkx")("AT6GEfChyW-tzylcdm6O_JRhHajnylVXoVE8pv4PNlNhitDF6RnMoDj8H5hMhwblsW44-uzLmxrmI8D6_Amq24p9"),v=u!==0?i._("Connection Requests"):i._("Message Requests"),w=function w(){c("bs_curry")._1(n,0);return c("bs_curry")._1(o,false)},x=p?[p[0].short_name]:0;if(!(q==null)){var y=new(c("IgnoreMessagesTypedLogger"))().setEvent("ignore_clicked").setThreadID(q).setPlatform("messengerdotcom");y.log()}return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,o,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,r!==0?i._("Ignore group?"):i._("Ignore this conversation?"))),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[c("React").createElement("div",{className:"_1q73"},r!==0?i._("You won't be notified when someone messages this group, and the group will move to Filtered Messages. We won't tell anyone in the group that the messages have been ignored."):i._("You won't be notified when {short_name_or_description} messages you directly, and the conversation will move to {requests}. We won't tell {sameParam} that the messages have been ignored.",[i.param("short_name_or_description",c("utilsRe").$pipe$unknown(x,i._("this person"))),i.param("requests",v),i.param("sameParam",c("utilsRe").$pipe$unknown(x,i._("this person")))]))])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0](0,[i._("Ignore Messages")],0,["danger"],[w],[0],0,0,[]))]))]))};return t}var l=c("ReasonReact").wrapReasonForJs(j,function(n){return k(n.onIgnore,n.onToggle,c("bs_js_primitive").null_undefined_to_opt(n.contact),n.threadID,n.isGroupChat,[])}),m=c("utilsRe").$pipe$unknown;g.$pipe$unknown=m;g.component=j;g.make=k;g.jsComponent=l}),null);
__d("messengerMarkSpamDialogBootloaderReact",["ReasonReact","MessengerMarkSpamDialogBootloader.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact").wrapJsForReason(c("MessengerMarkSpamDialogBootloader.react"),{onMarkSpam:i,onToggle:j},k)}g.make=h}),null);
__d("messengerMenuReact",["ReasonReact","bs_js_null_undefined","MessengerMenu.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(n){return c("ReasonReact").wrapJsForReason(c("MessengerMenu.react"),{},n)}var i=[h];function j(n,o,p,q,r){return c("ReasonReact").wrapJsForReason(c("MessengerMenu.react").Item,{href:c("bs_js_null_undefined").from_opt(n),label:o,onclick:c("bs_js_null_undefined").from_opt(p),target:c("bs_js_null_undefined").from_opt(q)},r)}var k=[j];function l(n){return c("ReasonReact").wrapJsForReason(c("MessengerMenu.react").Separator,{},n)}var m=[l];g.Menu=i;g.MenuItem=k;g.MenuSeparator=m}),null);
__d("messengerMoveToWorkplaceDialogReact",["fbt","ReasonReact","MercuryViewer","MercuryThreads","MercurySourceType","messengerDialogsRe","MercuryMessageObject","messengerDialogReact","MercuryLogMessageType","MercuryMessageActions","messengerDialogBodyReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact").statelessComponent("MessengerMoveToWorkplaceDialogReact");function j(l){if(l)return 0;else return c("messengerDialogsRe").removeDialog(0)}function k(l,m){__p&&__p();var n=function n(){var p=c("MercuryThreads").get();if(!p.isEmptyLocalThread(l)){var q=c("MercuryMessageObject").get(),r=c("MercuryMessageActions").get(),s=q.constructLogMessageObject(c("MercurySourceType").MESSENGER_WEB,l,c("MercuryLogMessageType").SWITCH_TO_WORK,{removed_participants:[c("MercuryViewer").getID()]});r.send(s,undefined,undefined)}return j(false)},o=i.slice();o[9]=function(){return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,j,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,h._("Move Conversation to Workplace?"))),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[h._("Do you want to move this conversation to Workplace?")])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0](0,[h._("Move Conversation")],0,0,[n],[1],0,0,[]))]))]))};return o}g.component=i;g.handleToggle=j;g.make=k}),null);
__d("messengerMuteDialogBootloaderReact",["ReasonReact","MessengerMuteDialogBootloader.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact").wrapJsForReason(c("MessengerMuteDialogBootloader.react"),{onMute:i,onToggle:j},k)}g.make=h}),null);
__d("messengerPopoverMenuReact",["utilsRe","ReasonReact","bs_js_null_undefined","MessengerPopoverMenu.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n){return c("ReasonReact").wrapJsForReason(c("MessengerPopoverMenu.react"),{disableArrowKeyActivation:c("utilsRe").optionBoolToNullUndefinedBoolean(i),isOpen:c("utilsRe").optionBoolToNullUndefinedBoolean(j),menu:k,onHide:c("bs_js_null_undefined").from_opt(l),onShow:c("bs_js_null_undefined").from_opt(m)},n)}g.make=h}),null);
__d("messengerThreadlistRowActionsReact",["cx","fbt","bs_block","bs_curry","React","keysRe","gkx","utilsRe","MercuryIDs","AsyncDialog","CurrentUser","ReasonReact","joinClasses","AsyncRequest","bs_js_primitive","MoveToWorkUtils","MercuryThreadIDMap","messengerDialogsRe","messengerMenuReact","MercuryParticipants","messengerBlockDialogReact","messengerPopoverMenuReact","messengerIgnoreDialogReact","messengerMuteDialogBootloaderReact","messengerMoveToWorkplaceDialogReact","XNFXStartForMessageThreadController","messengerDeleteDialogBootloaderReact","messengerMarkSpamDialogBootloaderReact","mNCommerceReportConversationDialogReact"],(function aa(ba,a,ca,da,ea,b,fa,c){"use strict";__p&&__p();function d(l){if(l)return 0;else return a("messengerDialogsRe").removeDialog(0)}function e(l){l.preventDefault();l.stopPropagation();return 0}function f(l){if(l.length)return+l.every(function(m){var n=a("MercuryParticipants").getNow(m);if(n==null)return 0;else return+n.employee});else return 0}var g=a("ReasonReact").reducerComponentWithRetainedProps("MessengerThreadlistRowActionsReact"),h="_5blh _4-0h",i="_5blh _4-0h _4-0i";function j(l,m,n,o,p,q,r,s,t,u,v,w,x,ga,ha,ia,y,ja,ka,la,ma,na,z,A,B,C,oa,D,pa){__p&&__p();var E=l?l[0]:"",F=function F(){return a("messengerDialogsRe").showDialog(function(){return a("ReasonReact").element(0,0,a("messengerDeleteDialogBootloaderReact").make(t,u,d,[]))})},G=function G(){if(p)return a("bs_curry")._1(ja,0);else return a("messengerDialogsRe").showDialog(function(){return a("ReasonReact").element(0,0,a("messengerMuteDialogBootloaderReact").make(ha,d,[]))})},H=function H(){if(r)return a("bs_curry")._1(w,0);else return a("bs_curry")._1(ga,0)},I=function I(){return a("messengerDialogsRe").showDialog(function(){return a("ReasonReact").element(0,0,a("messengerMarkSpamDialogBootloaderReact").make(x,d,[]))})},J=function J(){return a("messengerDialogsRe").showDialog(function(){return a("ReasonReact").element(0,0,a("messengerIgnoreDialogReact").make(ka,d,m,D.thread_fbid,+a("MercuryIDs").isGroupChat(D.thread_id),[]))})},K=function K(){if(s)return a("bs_curry")._1(ma,0);else return a("messengerDialogsRe").showDialog(function(){return a("ReasonReact").element(0,0,a("messengerBlockDialogReact").make(la,d,m,D.thread_fbid,[]))})},L=function L(){return a("messengerDialogsRe").showDialog(function(){return a("ReasonReact").element(0,0,a("messengerMoveToWorkplaceDialogReact").make(D.thread_id,[]))})},M=function M(){var U=a("MercuryThreadIDMap").get();U.getServerIDFromClientID(D.thread_id,function(V){a("AsyncDialog").send(new(a("AsyncRequest"))(a("XNFXStartForMessageThreadController").getURIBuilder().setString("thread_fbid",V).getURI()));return 0});return 0},N=function N(){var U=D.other_user_fbid;if(U==null)return 0;else return a("messengerDialogsRe").showDialog(function(){return a("ReasonReact").element(0,0,a("mNCommerceReportConversationDialogReact").make(U,[]))})},O=function O(){return[J,K,F,H,I,G,N,M,L,0]},P=function P(){return 0},Q=function Q(U){var V=+(U.keyCode===a("keysRe").$$return);if(V!==0)return 0;else return 2},R=function R(){return 1},S=function S(U){return[U==null?0:[U]]},T=g.slice();T[8]=function(U){var V=U[1],W=U[0];if(V[3]||V[3]!==W[3])return 1;else return+(V[2]!==W[2])};T[9]=function(U){var V=U[2],W=U[1];if(q){var X=o!==0?n!==0?c._("Leave Chat"):c._("Leave Room"):c._("Leave Group"),Y=c._("Ignore Messages"),Z=s!==0?c._("Unblock Messages"):c._("Block Messages"),$=c._("Move to Workplace"),qa=a("utilsRe").isSomeTrue(B),ra=z||a("utilsRe").isSomeTrue(B),sa=a("utilsRe").isSomeTrue(C),ta=a("utilsRe").isSomeTrue(C),ua=1-+a("CurrentUser").isWorkUser()&&1-s&&(A||+(D.folder==="inbox"&&a("MercuryIDs").isGroupChat(D.thread_id)&&a("gkx")("AT4mycXtTvfXJMAqrd_BSmI0_EEB-8pOs_AaNI2VArui1ThGLeffrrAudIg_2uctK6Ji6Zom3olu5BpcCU5_nD4U"))),va=1-+a("CurrentUser").isWorkUser()&&A,wa=+a("MoveToWorkUtils").isViewerEligible()&&+a("MercuryIDs").isGroupChat(D.thread_id)&&f(D.participants),xa=a("ReasonReact").element(0,0,a("messengerMenuReact").Menu[0]([z!==0?a("ReasonReact").element(0,0,a("messengerMenuReact").MenuItem[0](0,p!==0?c._("Unmute"):c._("Mute"),[V[5]],0,[])):null,qa!==0?a("ReasonReact").element(0,0,a("messengerMenuReact").MenuItem[0](0,c._("Rename"),ia,0,[])):null,ra!==0?a("ReasonReact").element(0,0,a("messengerMenuReact").MenuSeparator[0]([])):null,na!==0?a("ReasonReact").element(0,0,a("messengerMenuReact").MenuItem[0](0,X,v,0,[])):null,a("ReasonReact").element(0,0,a("messengerMenuReact").MenuItem[0](0,c._("Archive"),[t],0,[])),a("ReasonReact").element(0,0,a("messengerMenuReact").MenuItem[0](0,c._("Delete"),[V[2]],0,[])),a("ReasonReact").element(0,0,a("messengerMenuReact").MenuSeparator[0]([])),a("ReasonReact").element(0,0,a("messengerMenuReact").MenuItem[0](0,r!==0?c._("Mark as Read"):c._("Mark as Unread"),[V[3]],0,[])),sa!==0?null:a("ReasonReact").element(0,0,a("messengerMenuReact").MenuItem[0](0,c._("Mark as Spam"),[V[4]],0,[])),ta!==0?a("ReasonReact").element(0,0,a("messengerMenuReact").MenuItem[0](0,c._("Report..."),[V[6]],0,[])):a("ReasonReact").element(0,0,a("messengerMenuReact").MenuItem[0](0,c._("Report Spam or Abuse..."),[V[7]],0,[])),ua!==0?a("ReasonReact").element(0,0,a("messengerMenuReact").MenuItem[0](0,Y,[V[0]],0,[])):null,va!==0?a("ReasonReact").element(0,0,a("messengerMenuReact").MenuItem[0](0,Z,[V[1]],0,[])):null,wa!==0?a("ReasonReact").element(0,0,a("messengerMenuReact").MenuItem[0](0,$,[V[8]],0,[])):null])),ya=+(E===""),za=ya!==0?i:a("joinClasses")(E,i);return a("React").createElement("div",{className:"_3d85"},a("ReasonReact").element(0,[a("bs_curry")._1(W,S)],a("messengerPopoverMenuReact").make([1],[q],xa,[a("bs_curry")._1(W,R)],[a("bs_curry")._1(W,P)],[a("React").cloneElement(a("React").createElement("div",{ref:"button",className:za,role:"button",tabIndex:0,onClick:e}),{"aria-label":c._("Conversation actions")})])))}else{var Aa=+(E===""),Ba=Aa!==0?h:a("joinClasses")(E,h);return a("React").createElement("div",{className:"_3d85"},a("React").cloneElement(a("React").createElement("div",undefined),{"aria-label":c._("Conversation actions"),className:Ba,onClick:a("bs_curry")._1(W,P),onKeyUp:a("bs_curry")._1(W,Q),role:"button",ref:"button",tabIndex:oa}))}};T[10]=O;T[11]=q;T[12]=function(U,V){__p&&__p();if(typeof U==="number")switch(U){case 0:var T=O(0).slice();return a("bs_block").__(3,[(T[9]=1,T),function(){return a("bs_curry")._1(y,true)}]);case 1:var W=V.slice();return a("bs_block").__(3,[(W[9]=0,W),function(){return a("bs_curry")._1(y,false)}]);case 2:return 0}else{var X=U[0],Y=V[9];if(Y!==0)if(X){var Z=X[0],$=V.slice();return a("bs_block").__(4,[($[9]=0,$),function(){return Z.showPopover()}])}else return 0;else return 0}};return T}var k=a("ReasonReact").wrapReasonForJs(g,function(l){return j(a("bs_js_primitive").null_undefined_to_opt(l.className),a("bs_js_primitive").null_undefined_to_opt(l.contact),+l.isGroupChat,+l.isJoinableThread,+l.isMuted,+l.isOpen,+l.isUnread,+l.isBlocked,l.onArchive,l.onDelete,a("bs_js_primitive").null_undefined_to_opt(l.onLeaveGroup),l.onMarkRead,l.onMarkSpam,l.onMarkUnread,l.onMute,a("bs_js_primitive").null_undefined_to_opt(l.onRename),l.onToggle,l.onUnmute,l.onIgnore,l.onBlock,l.onUnblock,+l.showLeaveGroup,+l.showMute,+l.showBlock,a("utilsRe").nullUndefinedBooleanToOptionBool(l.showRename),a("utilsRe").nullUndefinedBooleanToOptionBool(l.showReport),l.tabIndex,l.thread,[])});b.handleReasonDialogToggle=d;b.handleClick=e;b.isEmployeesOnly=f;b.component=g;b.actionButtonClassesClosed=h;b.actionButtonClassesOpen=i;b.make=j;b.jsComponent=k}),null);
__d("messengerThreadlistRowSeenHeadReact",["cx","imageReact","MercuryIDs","ReasonReact","joinClasses","bs_js_primitive","MercuryMessageInfo"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(m,n,o,p){__p&&__p();var q=o.snippet_sender;if(p){var r=p[0];if(r.author===m&&n.watermark>=r.timestamp&&!c("MercuryMessageInfo").isSending(r))return 1-+c("MercuryMessageInfo").hasError(r);else return 0}else if(!(q==null)&&q===m)return+(n.watermark>=o.timestamp);else return 0}var j=c("ReasonReact").statelessComponent("MessengerThreadlistRowSeenHeadReact");function k(m,n,o,p,q,r,s,t){__p&&__p();var u=m?m[0]:"",v=j.slice();v[9]=function(){__p&&__p();var w=+r.is_canonical,x=r.other_user_fbid;if(n)if(w!==0)if(x==null)return null;else if(n[0])return null;else{var y=c("MercuryIDs").getParticipantIDFromUserID(s),z=c("MercuryIDs").getParticipantIDFromUserID(x),A=q.get(z),B=p.get(z);if(!(B==null)&&!(A==null)&&i(y,A,r,o))return c("ReasonReact").element(0,0,c("imageReact").make([c("joinClasses")(u,"_2_a2")],0,[B.image_src],0,[B.name],0,0,[]));else return null}else return null;else return null};return v}var l=c("ReasonReact").wrapReasonForJs(j,function(m){return k(c("bs_js_primitive").null_undefined_to_opt(m.className),c("bs_js_primitive").null_undefined_to_opt(m.isHidden),c("bs_js_primitive").null_undefined_to_opt(m.lastMessage),m.participants,m.readReceipts,m.thread,m.viewer,[])});g.shouldRender=i;g.component=j;g.make=k;g.jsComponent=l}),null);
__d("MessengerThreadlistRow.react",["cx","fbt","ix","Bootloader","FBRTCCore","Image.react","immutable","ImmutableObject","LinkWithHiddenURLBar.react","mercuryBlockedParticipantsRe","MercuryConfig","MercuryIDs","MercuryMessageInfo","MercuryThreadActions","MercuryThreadSnippet.react","mercuryThreadTimestampReact","MercuryThreadTitle.react","MercuryTimestamp","MessagingTag","MessengerActions","MessengerAdminGroupUtils","messengerButtonReact","messengerDialogsRe","MessengerPresenceStatusUtils","MessengerMessageRequestsTypedLogger","messengerThreadImageReact","messengerThreadlistRowActionsReact","messengerThreadlistRowSeenHeadReact","MessengerStateStore","messengerURIUtilsRe","MNAdsMessageUtils","React","ReactDOM","RTCCallState","RTCConfig","FBRTCLogger","UserAgent","CurrentUser","getPageIDFromThreadID","gkx","joinClasses","messengerRTLClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("mercuryBlockedParticipantsRe").get(),n=c("mercuryThreadTimestampReact").jsComponent,o=c("messengerButtonReact").jsComponent,p=c("messengerThreadImageReact").jsComponent,q=c("messengerThreadlistRowActionsReact").jsComponent,r=c("messengerThreadlistRowSeenHeadReact").jsComponent,s=c("FBRTCLogger").Trigger,t=c("React").PropTypes,u=50,v=j("86913"),w=j("86914"),x=function x(z){var A=void 0;switch(z){case"pending":case"other":case"inbox":case"thread":A=z;break;default:A=null}return A};k=babelHelpers.inherits(y,c("React").PureComponent);l=k&&k.prototype;function y(){__p&&__p();var z,A;for(var B=arguments.length,C=Array(B),D=0;D<B;D++)C[D]=arguments[D];return A=(z=l.constructor).call.apply(z,[this].concat(C)),this.state={actionsOpen:false},this.$MessengerThreadlistRow1=0,this.$MessengerThreadlistRow2=null,this.$MessengerThreadlistRow15=function(){__p&&__p();var E=c("CurrentUser").getID(),F=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,E);c("MercuryThreadActions").get()["delete"](this.props.thread.thread_id);if(this.props.isActive)c("MessengerActions").selectThread(null);if(this.props.showAggregation){var G=c("MessengerStateStore").getState().threadIDs;if(G){var H=G.filter(function(I){return this.props.thread.thread_id!==I}.bind(this));c("MessengerActions").selectAggregation(H)}}new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(x(this.props.folder)).setFolderType("pending").setThreadKey(F).setEntryPoint("inbox_banner").log()}.bind(this),this.$MessengerThreadlistRow16=function(E){var F=c("CurrentUser").getID(),G=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,F);if(!E){c("messengerDialogsRe").removeDialog();new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(x(this.props.folder)).setFolderType("pending").setThreadKey(G).setEntryPoint("inbox_banner").log()}}.bind(this),this.$MessengerThreadlistRow3=function(E){E.preventDefault();this.props.onFocus(this.props.thread.thread_id)}.bind(this),this.$MessengerThreadlistRow4=function(E){this.$MessengerThreadlistRow1++;if(this.$MessengerThreadlistRow2)return;this.$MessengerThreadlistRow2=setTimeout(function(){this.props.onSelect&&this.props.onSelect();this.$MessengerThreadlistRow1=0;this.$MessengerThreadlistRow2=null}.bind(this),1e3)}.bind(this),this.$MessengerThreadlistRow5=function(E){this.$MessengerThreadlistRow1--;if(this.$MessengerThreadlistRow1===0){clearTimeout(this.$MessengerThreadlistRow2);this.$MessengerThreadlistRow2=null}}.bind(this),this.$MessengerThreadlistRow7=function(E){this.props.onSelect()}.bind(this),this.$MessengerThreadlistRow8=function(E){if(this.props.logClickHandler){var F=this.props.thread.is_canonical?c("MercuryIDs").getUserIDFromThreadID(this.props.thread.thread_id)||"0":this.props.thread.thread_fbid;this.props.logClickHandler&&this.props.logClickHandler(F)}}.bind(this),this.$MessengerThreadlistRow14=function(E){this.setState({actionsOpen:E})}.bind(this),this.$MessengerThreadlistRow17=function(E){E.preventDefault();E.stopPropagation();var F=window.callWindow&&!window.callWindow.closed&&window.callWindow.focus;if(F)window.callWindow.focus();else{var G=this.props.thread,H=G.rtc_call_data,I=G.thread_fbid;c("FBRTCCore").startGroupCall({conferenceName:"GROUP:"+I,hasVideo:true,serverInfoData:H.server_info_data,trigger:s.MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON})}}.bind(this),A}y.prototype.componentDidUpdate=function(z){if(this.props.isFocused)if(!z.isFocused)if(this.props.isActionsFocused)c("ReactDOM").findDOMNode(this.refs.actions.refs.button).focus();else c("ReactDOM").findDOMNode(this.refs.link).focus();else if(!z.isActionsFocused&&this.props.isActionsFocused)c("ReactDOM").findDOMNode(this.refs.actions.refs.button).focus();else if(z.isActionsFocused&&!this.props.isActionsFocused)c("ReactDOM").findDOMNode(this.refs.link).focus()};y.prototype.render=function(){var z=this.props,A=z.isActive,B=z.isActionsFocused,C=z.isTabbable,D=z.participants,E=z.thread,F=z.viewer,G=E.unread_count>0,H=c("messengerURIUtilsRe").getURIForThreadID(E.thread_id);return c("React").createElement("li",{"aria-live":G?"polite":null,"aria-relevant":A||G?"additions text":null,onFocus:this.$MessengerThreadlistRow3,className:"_5l-3 _1ht1"+(E.folder===c("MessagingTag").PENDING?" _4as3":"")+(this.props.isActive?" _1ht2":"")+(G?" _1ht3":"")+(this.state.actionsOpen?" _13aa":"")+(this.props.isMuted?" _569x":"")+(this.props.isFocused?" _23_m":"")+(G&&c("UserAgent").isBrowser("Chrome")&&c("UserAgent").isPlatform("Mac")?" _5fx8":""),onDragEnter:A?null:this.$MessengerThreadlistRow4,onDragLeave:A?null:this.$MessengerThreadlistRow5,role:"row",ref:function(I){return I&&this.props.registerThreadRefs&&this.props.registerThreadRefs(I)}.bind(this),tabIndex:-1},c("React").createElement("div",{className:"_5l-3 _1ht5",id:this.$MessengerThreadlistRow6(E.thread_id),role:"gridcell",tabIndex:-1},c("React").createElement(c("LinkWithHiddenURLBar.react"),{href:H.toString(),onClick:this.$MessengerThreadlistRow7,onAllClicks:this.$MessengerThreadlistRow8,className:"_1ht5 _2il3 _5l-3",s:"true",ref:"link",role:"link",tabIndex:C&&!B?0:-1},c("React").createElement("div",{"aria-hidden":true,className:"_1qt3 _5l-3"},c("React").createElement(p,{participants:D,size:u,thread:E,viewer:F})),c("React").createElement("div",{className:"_1qt4 _5l-m"},c("React").createElement("div",{className:"_1qt5 _5l-3"},c("React").createElement(c("MercuryThreadTitle.react"),{className:"_1ht6",showUnreadCount:false,thread:E,useShortName:false,viewer:F}),c("React").createElement("div",null,c("MNAdsMessageUtils").isAdsMessageRequest(E)?c("MNAdsMessageUtils").renderAdsMessageRequestStatus():this.$MessengerThreadlistRow9(E))),c("React").createElement("div",{className:"_1qt5 _5l-3"},c("React").createElement(c("MercuryThreadSnippet.react"),{className:c("joinClasses")("_1htf",c("messengerRTLClasses")(E.snippet,true)),participants:D,shouldRenderYou:true,thread:E,viewer:F})),this.$MessengerThreadlistRow10(),this.$MessengerThreadlistRow11()))),this.$MessengerThreadlistRow12())};y.prototype.$MessengerThreadlistRow12=function(){if(this.props.showActions===false)return null;var z=this.props,A=z.isActionsFocused,B=z.isTabbable,C=z.participants,D=z.thread,E=z.viewer,F=c("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(this.props.participants,D),G=F&&F.contact,H=m.isMessageBlocked(D),I=c("MessengerAdminGroupUtils").isJoinableThread(D),J=c("MessengerAdminGroupUtils").isGroupChat(D),K=D.unread_count>0;return c("React").createElement("div",{role:"gridcell"},c("React").createElement("div",{"aria-describedby":this.$MessengerThreadlistRow6(D.thread_id),"aria-haspopup":"true","aria-label":i._("Actions"),className:"_2j6 _5l-3",tabIndex:B&&A?0:-1,role:"button"},c("React").createElement(r,{className:"_5bli",isHidden:this.state.actionsOpen,lastMessage:this.props.lastMessage,participants:C,readReceipts:this.props.readReceipts,thread:D,viewer:E}),this.$MessengerThreadlistRow13(),c("React").createElement(q,{contact:G,isGroupChat:J,isJoinableThread:I,isMuted:this.props.isMuted,isOpen:this.state.actionsOpen,isUnread:K,isBlocked:H,onArchive:this.props.onArchiveSetting,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onToggle:this.$MessengerThreadlistRow14,onUnmute:this.props.onUnmute,onIgnore:this.props.onIgnore,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showLeaveGroup:this.props.showLeaveGroup,showMute:true,showIgnoreGroup:c("gkx")("AT4mycXtTvfXJMAqrd_BSmI0_EEB-8pOs_AaNI2VArui1ThGLeffrrAudIg_2uctK6Ji6Zom3olu5BpcCU5_nD4U"),showBlock:D.is_canonical_user&&D.other_user_fbid&&E!==D.other_user_fbid,showReport:c("getPageIDFromThreadID")(this.props.thread.thread_id),tabIndex:-1,thread:D,ref:"actions"}),c("React").createElement("div",{className:"_56ck"})))};y.prototype.$MessengerThreadlistRow13=function(){var z=this.props.lastMessage;if(this.state.actionsOpen||!z)return null;var A=c("MercuryMessageInfo").isSending(z),B=c("MercuryMessageInfo").hasError(z);if(!A&&!B)return null;return c("React").createElement(c("Image.react"),{className:"_wtw"+(A?" _3qh2":""),src:A?w:v})};y.prototype.$MessengerThreadlistRow9=function(z){return c("React").createElement(n,{className:"_1ht7",time:z.timestamp,title:c("MercuryTimestamp").getAbsoluteTimestamp(z.timestamp),text:c("MercuryTimestamp").getRelativeTimestamp(z.timestamp)})};y.prototype.$MessengerThreadlistRow10=function(){__p&&__p();if(this.props.thread.folder!==c("MessagingTag").PENDING||!c("MercuryConfig").EPB)return null;var z=c("CurrentUser").getID(),A=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,z);return c("React").createElement("div",{className:"_5l-3"},c("React").createElement(o,{className:"_3yvh",type:"primary",label:i._("Accept"),onClick:function(B){__p&&__p();B.preventDefault();B.stopPropagation();if(this.props.showAggregation){var C=c("MessengerStateStore").getState().threadIDs;if(C){var D=C.filter(function(E){return this.props.thread.thread_id!==E}.bind(this));c("MessengerActions").selectAggregation(D)}}c("MercuryThreadActions").get().changeFolder(this.props.thread.thread_id,c("MessagingTag").INBOX);new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(x(this.props.folder)).setFolderType("pending").setThreadKey(A).setEntryPoint("inbox_banner").log()}.bind(this)}),c("React").createElement(o,{className:"_3yvh _1d-z",type:"faded",label:i._("Decline"),onClick:function(B){B.preventDefault();B.stopPropagation();c("Bootloader").loadModules(["messengerDeclineDialogReact"],function(C){var D=C.jsComponent,E=c("MercuryIDs").isGroupChat(this.props.thread.thread_id);c("messengerDialogsRe").showDialog(function(){return c("React").createElement(D,{onBlock:this.props.onBlock,onDelete:this.$MessengerThreadlistRow15,onToggle:this.$MessengerThreadlistRow16,isGroupChat:E})}.bind(this));new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(x(this.props.folder)).setFolderType("pending").setThreadKey(A).setEntryPoint("inbox_banner").log()}.bind(this),"MessengerThreadlistRow.react")}.bind(this)}))};y.prototype.$MessengerThreadlistRow11=function(){if(!c("RTCConfig").RtcConferencingGK||!this.props.thread.rtc_call_data||this.props.thread.rtc_call_data.call_state===c("RTCCallState").NO_ONGOING_CALL)return null;var z=window.callWindow&&!window.callWindow.closed?i._("Return to Call"):i._("Join Call");return c("React").createElement(o,{className:"_4ry5",label:z,onClick:this.$MessengerThreadlistRow17,type:"primary"})};y.prototype.$MessengerThreadlistRow6=function(z){return"row_header_id_"+z};y.propTypes={isActive:t.bool.isRequired,isActionsFocused:t.bool,isFocused:t.bool,isMuted:t.bool.isRequired,lastMessage:t.instanceOf(c("ImmutableObject")),logClickHandler:t.func,onArchive:t.func.isRequired,onArchiveSetting:t.func.isRequired,onDelete:t.func.isRequired,onMarkRead:t.func.isRequired,onMarkSpam:t.func.isRequired,onMarkUnread:t.func.isRequired,onMute:t.func.isRequired,onSelect:t.func.isRequired,onUnmute:t.func.isRequired,onIgnore:t.func.isRequired,onBlock:t.func.isRequired,onUnblock:t.func.isRequired,participants:t.instanceOf(c("immutable").Map).isRequired,readReceipts:t.instanceOf(c("immutable").OrderedMap).isRequired,registerThreadRefs:t.func,showAggregation:t.bool,thread:t.instanceOf(c("ImmutableObject")).isRequired,viewer:t.string.isRequired};f.exports=y}),null);
__d("messengerConfirmBlockThreadDialogReact",["fbt","ReasonReact","messengerDialogsRe","messengerDialogReact","messengerDialogBodyReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact").statelessComponent("MessengerConfirmBlockThreadDialogReact");function j(l,m){var n=function n(q){if(q)return 0;else return c("messengerDialogsRe").removeDialog(0)},o=function o(){return n(false)},p=i.slice();p[9]=function(){return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,n,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,h._("You have blocked {sender name}",[h.param("sender name",l)]))),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[h._("You can access people you've blocked by going to the filtered requests list.")])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0](0,[h._("OK")],0,0,[o],[1],0,0,[]))]))]))};return p}var k=c("ReasonReact").wrapReasonForJs(i,function(l){return j(l.participantName,[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d("messengerConfirmLeaveGroupDialogReact",["bs_curry","bs_js_boolean","ReasonReact","messengerDialogsRe","messengerDialogReact","MessengerAdminGroupUtils","messengerDialogBodyReact"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ReasonReact").statelessComponent("MessengerConfirmLeaveGroupDialogReact");function i(l){if(l)return 0;else return c("messengerDialogsRe").removeDialog(0)}function j(l,m,n,o){var p=function p(o,r){c("bs_curry")._1(m,0);return c("messengerDialogsRe").removeDialog(0)},q=h.slice();q[9]=function(r){var s=c("bs_js_boolean").to_js_boolean(l),t=c("MessengerAdminGroupUtils").getLeaveGroupBodyText(s,n),u=c("MessengerAdminGroupUtils").getLeaveGroupButtonText(s,n),v=c("MessengerAdminGroupUtils").getLeaveGroupTitleText(s,n);return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,i,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,v)),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[t])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0](0,[u],0,["danger"],[c("bs_curry")._1(r[0],p)],[0],0,0,[]))]))]))};return q}var k=c("ReasonReact").wrapReasonForJs(h,function(l){return j(+l.isViewerAdmin,l.onLeave,l.thread,[])});g.component=h;g.handleToggle=i;g.make=j;g.jsComponent=k}),null);
__d("MessengerThreadlistRowContainer.react",["fbt","IgnoreMessagesTypedLogger","ImmutableObject","MercuryConfig","MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercuryMessages","MercuryParticipants","mercuryRogerRe","MercuryThreadActions","MercuryThreadInfo","MercuryThreadlistRowContainer.react","MercuryTriodeSourceUtil","MessagingSourceEnum","MessengerActions","messengerDialogsRe","messengerConfirmLeaveGroupDialogReact","messengerConfirmBlockThreadDialogReact","messengerBlockDialogReact","MessageRequestUtils","MessengerAdminGroupUtils","MessengerMessageRequestsTypedLogger","MessengerThreadlistRow.react","MessagingTag","MNPlatformTagsDataManager","ReactComponentWithPureRenderMixin","React","ReactDOM","StoreAndPropBasedStateMixin","CurrentUser"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("mercuryRogerRe").get(),j=c("messengerConfirmLeaveGroupDialogReact").jsComponent,k=c("messengerConfirmBlockThreadDialogReact").jsComponent,l=c("messengerBlockDialogReact").jsComponent,m=c("React").PropTypes,n=c("React").createClass({displayName:"MessengerThreadlistRowContainer",mixins:[c("ReactComponentWithPureRenderMixin"),c("StoreAndPropBasedStateMixin")(c("MercuryMessages"),i)],propTypes:{isActive:m.bool.isRequired,isTabbable:m.bool,folder:m.string,onOverrideSelect:m.func,showAggregation:m.bool,showActions:m.bool,thread:m.instanceOf(c("ImmutableObject")).isRequired,viewer:m.string.isRequired},statics:{calculateState:function o(p){var q=c("MercuryMessages").getForFBID(p.viewer),r=p.thread.thread_id,s=q.getThreadMessagesRangeNow(r,0,1)[0];return{lastMessage:s||null,readReceipts:i.getSeenTimestamps(r)}}},componentDidUpdate:function o(p){if(this.props.isActive&&!p.isActive)this.props.onScrollIntoView(c("ReactDOM").findDOMNode(this))},render:function o(){return c("React").createElement(c("MercuryThreadlistRowContainer.react"),babelHelpers["extends"]({},this.props,{ChildClass:c("MessengerThreadlistRow.react"),isMuted:c("MercuryThreadInfo").isMuted(this.props.thread),lastMessage:this.state.lastMessage,onArchive:this._handleArchive,onArchiveSetting:this._handleArchiveFromSetting,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onSelect:this._handleSelect,onUnmute:this._handleUnmute,onIgnore:this._handleIgnore,onBlock:this._handleBlockFromSettingOrDecline,onUnblock:this._handleUnblock,readReceipts:this.state.readReceipts,showActions:this.props.showActions,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical}))},_handleArchiveFromSetting:function o(){var p=this.props.isActive;this._getThreadActions().archive(this.props.thread.thread_id);p&&c("MessengerActions").selectThread(null)},_handleArchive:function o(){if(c("MercuryConfig").WMBF)this._handleBlockFromSettingOrDecline();else{var p=this.props.isActive;this._getThreadActions().archive(this.props.thread.thread_id);p&&c("MessengerActions").selectThread(null)}},_handleDelete:function o(){var p=this.props.isActive;this._getThreadActions()["delete"](this.props.thread.thread_id);p&&c("MessengerActions").selectThread(null)},_handleMarkRead:function o(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function o(){var p=this.props.isActive;this._getThreadActions().markSpam(this.props.thread.thread_id);p&&c("MessengerActions").selectThread(null)},_handleMarkUnread:function o(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function o(p){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,p)},_handleSelect:function o(){__p&&__p();var p=c("CurrentUser").getID(),q=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,p);if(this.props.onOverrideSelect){this.props.onOverrideSelect(this.props.thread);return}c("MessengerActions").selectThread(this.props.thread.thread_id);var r=c("MercuryIDs").getUserIDFromThreadID(this.props.thread.thread_id),s=void 0;switch(this.props.folder){case"inbox":s="inbox";break;case"pending":s="pending";break;case"other":s="other";break}if(this.props.thread.folder!==c("MessagingTag").INBOX)new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_thread_open").setThreadID(r).setSurface(s).setFolderType(this.props.thread.folder).setThreadKey(q).log();c("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(c("MessagingSourceEnum").MESSENGER_WEB_SEARCH,r)},_handleUnmute:function o(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleLeaveGroup:function o(){var p,q=this;if(this.props.viewer)(function(){var r=c("MessengerAdminGroupUtils").isViewerAdmin(q.props.thread.admin_ids,q.props.viewer);c("messengerDialogsRe").showDialog(function(){return c("React").createElement(j,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:r,thread:this.props.thread})}.bind(q))})()},_handleIgnore:function o(){var p=this.props.isActive;this._getThreadActions().changeFolder(this.props.thread.thread_id,"other");p&&c("MessengerActions").selectThread(null);new(c("IgnoreMessagesTypedLogger"))().setEvent("ignore_confirmed").setThreadID(this.props.thread.thread_fbid).setPlatform("messengerdotcom").log()},_handleBlockFromSettingOrDecline:function o(){var p,q=this;if(c("MercuryConfig").WMBF)(function(){var r=c("MercuryParticipants").getNow(c("MercuryIDs").getParticipantIDFromUserID(q.props.thread.other_user_fbid)),s=r&&r.short_name||h._("sender");c("messengerDialogsRe").showDialog(function(){return c("React").createElement(l,{onBlock:function(){this._handleConfirmBlock(s)}.bind(this),contact:r,onToggle:this._handleBlockDialogToggle})}.bind(q))})();else this._getThreadActions().blockOnMessengerDotCom(this.props.thread.thread_id)},_handleBlockDialogToggle:function o(){c("messengerDialogsRe").removeDialog()},_handleConfirmBlock:function o(p){var q=this.props.thread.thread_id;if(q)this._getThreadActions().blockIgnoreOnMessengerDotCom(this.props.isActive,q,function(){this._handleAfterBlock(p)}.bind(this))},_handleAfterBlock:function o(p){var q=this.props.thread;c("messengerDialogsRe").showDialog(function(){return c("React").createElement(k,{participantName:p})});var r=c("MercuryIDs").getThreadKeyfromThreadIDUserID(q.thread_id,c("CurrentUser").getID()),s=!!q&&c("MessageRequestUtils").isFiltered(q);new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(q.thread_id)).setSurface("thread").setFolderType(s?c("MessagingTag").OTHER:c("MessagingTag").PENDING).setThreadKey(r).setEntryPoint(null).log()},_handleUnblock:function o(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_onLeaveGroupConfirm:function o(){if(!c("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)){var p=this._getMessageObject().constructLogMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),this.props.thread.thread_id,c("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)]});this._getMessageActions().send(p)}},_getThreadActions:function o(){return c("MercuryThreadActions").getForFBID(this.props.viewer)},_getMessageActions:function o(){return c("MercuryMessageActions").getForFBID(this.props.viewer)},_getMessageObject:function o(){return c("MercuryMessageObject").getForFBID(this.props.viewer)}});f.exports=n}),null);
__d("abstractCheckboxInputReact",["bs_js_boolean","ReasonReact","AbstractCheckboxInput.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){return c("ReasonReact").wrapJsForReason(c("AbstractCheckboxInput.react"),{className:i,checked:c("bs_js_boolean").to_js_boolean(j),onChange:k},l)}g.make=h}),null);
__d("abstractPopoverButtonReact",["ReasonReact","bs_js_null_undefined","AbstractPopoverButton.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n){return c("ReasonReact").wrapJsForReason(c("AbstractPopoverButton.react"),{config:c("bs_js_null_undefined").from_opt(i),haschevron:c("bs_js_null_undefined").from_opt(j),image:c("bs_js_null_undefined").from_opt(k),label:c("bs_js_null_undefined").from_opt(l),maxwidth:c("bs_js_null_undefined").from_opt(m)},n)}g.make=h}),null);
__d("archiveWarningReact",["cx","ix","React","imageReact","bs_js_boolean","ReasonReact","TooltipData","bs_js_primitive","bs_js_null_undefined"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact").statelessComponent("ArchiveWarningReact");function k(m,n,o){__p&&__p();var p=j.slice();p[9]=function(){__p&&__p();var q=c("TooltipData").propsFor("All employee-to-employee conversations will be archived","above");if(m!==0){var r=m!==0?i("28105"):i("28106");return c("React").cloneElement(c("ReasonReact").element(0,0,c("imageReact").make(["titanArchiveWarning button"+(c("bs_js_boolean").to_js_boolean(1-n)?" hidden_elem":"")],0,[r],0,0,0,0,[])),{"data-tooltip-content":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-tooltip-content"])),"data-hover":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-hover"])),"data-tooltip-position":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-tooltip-position"]))})}else if(n!==0){var s=c("React").createElement("i",{className:"_3olv _14lt"});return c("React").cloneElement(c("React").createElement("div",{className:"_3a61"},s),{"data-tooltip-content":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-tooltip-content"])),"data-hover":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-hover"])),"data-tooltip-position":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-tooltip-position"]))})}else return null};return p}var l=c("ReasonReact").wrapReasonForJs(j,function(m){return k(+m.isFBAtWork,+m.shown,[])});g.component=j;g.make=k;g.jsComponent=l}),null);
__d("chatEmojiSkinTonePreferencePickerReact",["ReasonReact","ChatEmojiSkinTonePreferencePicker.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact").wrapJsForReason(c("ChatEmojiSkinTonePreferencePicker.react"),{currentPreference:i,onSelect:j},k)}g.make=h}),null);
__d("chatSidebarSheetReact",["ReasonReact","ChatSidebarSheet.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact").wrapJsForReason(c("ChatSidebarSheet.react"),{className:i},j)}g.make=h}),null);
__d("mercuryThreadTitleReact",["utilsRe","ReasonReact","bs_js_null_undefined","MercuryThreadTitle.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p){return c("ReasonReact").wrapJsForReason(c("MercuryThreadTitle.react"),{className:c("bs_js_null_undefined").from_opt(i),thread:j,viewer:k,isNewThread:c("utilsRe").optionBoolToNullUndefinedBoolean(l),showUnreadCount:c("utilsRe").optionBoolToNullUndefinedBoolean(m),useShortName:c("utilsRe").optionBoolToNullUndefinedBoolean(n),useAndSeparator:c("utilsRe").optionBoolToNullUndefinedBoolean(o)},p)}g.make=h}),null);
__d("messageRequestLoggerRe",["MessengerMessageRequestsTypedLogger"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){new(c("MessengerMessageRequestsTypedLogger"))().setSurface("inbox").setFolderType(k).setAction("message_requests_thread_impression").addToExtraData("threads",i).setThreadKeyList(j).log();return 0}g.logItemImpression=h}),null);
__d("messengerChatOnOffToggleReact",["cx","fbt","bs_curry","React","linkReact","bs_js_boolean","ReasonReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact").statelessComponent("MessengerChatOnOffToggleReact");function k(l,m,n){var o=function o(n,q){if(m)return c("bs_curry")._1(m[0],c("bs_js_boolean").to_js_boolean(1-l));else return 0},p=j.slice();p[9]=function(q){var r=l!==0?i._("Go Offline"):i._("Go Online");return c("ReasonReact").element(0,0,c("linkReact").make([r],0,["tooltip"],[r],["center"],["above"],0,[c("bs_curry")._1(q[0],o)],0,0,0,0,0,0,0,c("React").createElement("div",{className:"_3dwl"+(l?" _337l":"")},c("React").createElement("div",{className:"_3dwf"+(l?" _3dwk":"")}))))};return p}g.component=j;g.make=k}),null);
__d("messengerCheckboxInputReact",["cx","ReasonReact","abstractCheckboxInputReact"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("ReasonReact").statelessComponent("MessengerCheckboxInputReact");function j(k,l,m){var n=i.slice();n[9]=function(){return c("ReasonReact").element(0,0,c("abstractCheckboxInputReact").make("_55sg _4ng2",k,l,[]))};return n}g.component=i;g.make=j}),null);
__d("messengerCustomColorUtilsRe",["cssVar","CurrentUser"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(j){__p&&__p();var k=j.custom_color,l=0;if(k==null)l=1;else if(k==="")l=1;else return k;if(l===1){var m=+c("CurrentUser").isWorkUser();if(m!==0)return"#1479fb";else return"#0084ff"}}g.customColorOrBlue=i}),null);
__d("messengerDeleteAllMenuBootloaderReact",["ReasonReact","MessengerDeleteAllMenuBootloader.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n){return c("ReasonReact").wrapJsForReason(c("MessengerDeleteAllMenuBootloader.react"),{filter:i,folder:j,viewer:k,threadIDs:l,aggregationView:m},n)}g.make=h}),null);
__d("messengerCalculateTruncationState",["Style"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k,l,m){__p&&__p();if(!l||!j)return;var n=m?m.offsetWidth:0,o=Math.ceil(.5*(i.offsetWidth+l.offsetWidth)),p=i.offsetWidth-k.offsetWidth-12;if(o<=p){c("Style").set(i,"text-align","center");c("Style").set(j,"width","auto");c("Style").set(j,"margin-left","auto")}else{if(document.body.dir==="rtl")c("Style").set(i,"text-align","right");else{c("Style").set(i,"text-align","left");c("Style").set(j,"margin-left",n+"px")}var q=Math.max(i.offsetWidth-n-k.offsetWidth-11,0);c("Style").set(j,"width",q+"px")}}f.exports=h}),null);
__d("messengerInfoPanelButtonReact",["React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={height:"32px",width:"32px"};function i(l){return c("React").createElement("svg",{viewBox:"0 0 64 64"},c("React").createElement("g",undefined,c("React").createElement("g",undefined,c("React").createElement("path",{style:{fill:l},d:"M32,10c-12.2,0-22,9.8-22,22s9.8,22,22,22s22-9.8,22-22S44.2,10,32,10z M32,19c1.6,0,3,1.4,3,3s-1.4,3-3,3 c-1.6,0-3-1.4-3-3S30.4,19,32,19z M36,45h-2h-4h-2v-1h2V29h-2v-1h2h4v1v15h2V45z"}))))}function j(l){var m={fill:l};return c("React").createElement("svg",{style:{stroke:l},viewBox:"0 0 64 64"},c("React").createElement("g",undefined,c("React").createElement("polygon",{style:m,points:"34,44 34,29 34,28 30,28 28,28 28,29 30,29 30,44 28,44 28,45 30,45 34,45 36,45 36,44"}),c("React").createElement("circle",{style:m,cx:"32",cy:"22",r:"3"})),c("React").createElement("path",{style:{fill:"none",stroke:l,strokeMiterlimit:"10",strokeWidth:"2"},d:"M32,11c11.6,0,21,9.4,21,21s-9.4,21-21,21s-21-9.4-21-21S20.4,11,32,11z"}))}function k(l,m){return c("React").createElement("div",{style:h},m!==0?j(l):i(l))}g.svgWrapperStyle=h;g.selected=i;g.notSelected=j;g.make=k}),null);
__d("messengerPresenceStatusReact",["fbt","React","ReasonReact","bs_js_primitive"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact").statelessComponent("MessengerPresenceStatusReact");function j(l,m,n,o,p){__p&&__p();var q=i.slice();q[9]=function(){__p&&__p();var r,s=0;if(m!==0&&o)r=h._("Active on {platform}",[h.param("platform",o[0])]);else s=1;if(s===1)r=n?h._("Active {time} ago",[h.param("time",n[0])]):o?o[0]:null;var t={};if(l)t.className=l[0];return c("React").createElement("span",t,r)};return q}var k=c("ReasonReact").wrapReasonForJs(i,function(l){return j(c("bs_js_primitive").null_undefined_to_opt(l.className),+l.isUserActive,c("bs_js_primitive").null_undefined_to_opt(l.lastActive),c("bs_js_primitive").null_undefined_to_opt(l.platform),[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d("messengerRTCCallButtonReact",["bs_js_boolean","ReasonReact","MessengerRTCCallButton.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q){return c("ReasonReact").wrapJsForReason(c("MessengerRTCCallButton.react"),{className:i,customColor:j,isVideo:c("bs_js_boolean").to_js_boolean(k),participants:l,thread:m,threadID:n,viewer:o,calleeName:p},q)}g.make=h}),null);
__d("montageThreadViewContainerReact",["ReasonReact","bs_js_null_undefined","MontageThreadViewContainer.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact").wrapJsForReason(c("MontageThreadViewContainer.react"),{threadID:i,onResize:c("bs_js_null_undefined").from_opt(j)},k)}g.make=h}),null);
__d("messengerDetailViewHeaderReact",["cx","fbt","bs_curry","Event","React","ReactDOM","debounce","linkReact","RTCConfig","bs_js_boolean","ReasonReact","FBRTCSupport","bs_js_primitive","MercuryConfig","WorkModeConfig","bs_js_null_undefined","MercuryThreadInfo","messengerDomIDsRe","archiveWarningReact","MercuryParticipantTypes","mercuryThreadTitleReact","messengerLocalTimeReact","WorkFocusModeController","MessengerJoinableModeType","MessengerWebDriverTestIDs","messengerCustomColorUtilsRe","messengerRTCCallButtonReact","messengerPresenceStatusReact","messengerInfoPanelButtonReact","montageThreadViewContainerReact","messengerCalculateTruncationState"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("WorkFocusModeController").MessengerWorkAvailabilityStatus;function k(w){var x=c("bs_js_null_undefined").from_opt(w[0][0]),y=c("bs_js_null_undefined").from_opt(w[1][0]),z=c("bs_js_null_undefined").from_opt(w[2][0]),A=c("bs_js_null_undefined").from_opt(w[3][0]),B=c("bs_js_null_undefined").from_opt(w[4][0]);return c("messengerCalculateTruncationState")(x,y,z,A,B)}function l(w,x){x[2][3][0]=w==null?0:[c("ReactDOM").findDOMNode(w)];return 0}function m(w,x){x[2][1][0]=w==null?0:[w];return 0}function n(w,x){x[2][0][0]=w==null?0:[w];return 0}function o(w,x){x[2][2][0]=w==null?0:[w];return 0}function p(w,x){x[2][4][0]=w==null?0:[w];return 0}function q(w,x){if(w.has_montage&&c("MercuryConfig").MontageThreadViewer)return c("React").createElement("div",{ref:c("bs_curry")._1(x[0],p),className:"_1cwz"},c("ReasonReact").element(0,0,c("montageThreadViewContainerReact").make(w.thread_id,0,[])));else return null}function r(w,x){__p&&__p();var y=x.filter(function(B,C,D){if(B==null)return false;else{var z=B.fbid;if(z==null)return false;else return c("bs_js_boolean").to_js_boolean(+(z!==w))}}),z=y.count(),A=y.first();if(z!==1||A==null)return null;else return c("ReasonReact").element(0,0,c("messengerLocalTimeReact").make("_5eu7",c("bs_js_primitive").null_undefined_to_opt(A.timezone),[]))}function s(w,x,y){var z=+(c("FBRTCSupport").isWebrtcSupported()&&c("FBRTCSupport").isOSSupported()),A=w?+(w[0].contact.type===c("MercuryParticipantTypes").PAGE):0,B=x?+(x[0].joinable_mode===c("MessengerJoinableModeType").JOINABLE):0,C;if(x){var D=x[0];C=+(D.participants.length>1)&&+c("MercuryThreadInfo").canReply(D)&&(+D.is_canonical||y&&+c("RTCConfig").RtcConferencingVideoGK||1-y&&c("RTCConfig").RtcConferencingGK)}else C=0;if(z&&!A&&!B)return C;else return 0}var t=c("ReasonReact").reducerComponent("MessengerDetailViewHeaderReact");function u(w,x,y,z,A,B,C){__p&&__p();var D=function D(){if(s(w,A,0))if(A){var G=A[0],H=G.thread_id;return c("React").createElement("li",undefined,c("ReasonReact").element(0,0,c("messengerRTCCallButtonReact").make("_30yy",c("messengerCustomColorUtilsRe").customColorOrBlue(G),0,z,G,H,B,w?w[0].contact.name:"",[])))}else return null;else return null},E=function E(){__p&&__p();if(s(w,A,1))if(A){var G=A[0],H=G.thread_id,I;if(w){var J=+w[0].isUserActive;I=J!==0?"_3qfl":""}else I="";return c("React").createElement("li",undefined,c("ReasonReact").element(0,0,c("messengerRTCCallButtonReact").make("_30yy",c("messengerCustomColorUtilsRe").customColorOrBlue(G),1,z,G,H,B,w?w[0].contact.name:"",[])),c("React").createElement("div",{className:I}))}else return null;else return null},F=function F(){__p&&__p();var G;if(j==null)G=0;else{var H=+j.displayFocusBanner(B,z);G=H!==0?[j]:0}if(G)return[0,c("React").createElement(G[0],{className:"_2v6o",viewer:B,thread:c("bs_js_null_undefined").from_opt(A),participants:z})];else if(w){var I=w[0];return[0,c("ReasonReact").element(0,0,c("messengerPresenceStatusReact").make(["_2v6o"],+I.isUserActive,c("bs_js_primitive").null_undefined_to_opt(I.lastActive),[I.platform],[]))]}else return[1,null]};return[t[0],t[1],t[2],t[3],function(G){var H=G[2];H[5][0]=[c("Event").listen(window,"resize",c("debounce")(function(){return k(H)},20))];return 0},function(G){return k(G[1][2])},function(G){var H=G[2][5][0];if(H)return H[0].remove();else return 0},t[7],t[8],function(G){if(A){var H=A[0],I=1-+z.isEmpty()&&+z.every(function(L,C,M){if(L==null)return false;else return L.employee}),J=i._("Conversation Information"),K=F(0);return c("React").createElement("div",{ref:c("bs_curry")._1(G[0],n),className:"_5742"+(c("bs_js_boolean").to_js_boolean(K[0])?" _1_fz":"")},q(H,G),c("React").createElement("div",{key:"threadTitle",ref:c("bs_curry")._1(G[0],m),className:"_5743"},c("React").createElement("h2",{className:"_17w2",id:c("messengerDomIDsRe").ids.THREAD_TITLE},c("ReasonReact").element(0,[c("bs_curry")._1(G[0],l)],c("mercuryThreadTitleReact").make(["_3oh-"],H,B,0,0,0,0,[]))),K[1],r(B,z)),c("React").createElement("ul",{key:"buttonsContainer",ref:c("bs_curry")._1(G[0],o),className:"_fl2"},c("React").createElement("li",undefined,c("ReasonReact").element(0,0,c("archiveWarningReact").make(+c("WorkModeConfig").is_work_user,I,[]))),D(0),E(0),c("React").createElement("li",undefined,c("React").cloneElement(c("ReasonReact").element(0,0,c("linkReact").make(0,["_30yy"],0,0,0,0,0,[y],0,0,["button"],0,0,0,[J],[])),{"aria-expanded":x!==0?false:true,"aria-label":J,"data-testid":c("MessengerWebDriverTestIDs").INFO_PANEL_BUTTON},c("messengerInfoPanelButtonReact").make(c("messengerCustomColorUtilsRe").customColorOrBlue(H),x)),c("React").cloneElement(c("React").createElement("div",undefined),{"aria-owns":c("messengerDomIDsRe").ids.THREAD_INFO_PANEL}))))}else return null},function(){return[[0],[0],[0],[0],[0],[0]]},t[11],function(C,G){return 0},t[13]]}var v=c("ReasonReact").wrapReasonForJs(t,function(w){return u(c("bs_js_primitive").null_undefined_to_opt(w.contactData),+w.infoPanelCollapsed,w.onInfoPanelToggle,w.participants,c("bs_js_primitive").null_undefined_to_opt(w.thread),w.viewer,[])});g.messengerWorkAvailabilityStatus_=j;g.calculateTruncationState=k;g.findMercuryTitle=l;g.findTitle=m;g.findRoot=n;g.findButtons=o;g.findMontage=p;g.renderMontageThread=q;g.renderLocalTime=r;g.shouldShowCallButton=s;g.component=t;g.make=u;g.jsComponent=v}),null);
__d("messengerDirectRe",["ReasonReact","MessengerDirect"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ReasonReact").statelessComponent("MessengerDirectRe");function i(l,m){var n=h.slice();n[9]=function(){return null};return n}var j=c("MessengerDirect").module,k=j==null?i:function(l,m){return c("ReasonReact").wrapJsForReason(j,{viewer:l},m)};g.component=h;g.emptyComponent=i;g.make=k}),null);
__d("messengerFlexScrollableAreaReact",["ReasonReact","bs_js_null_undefined","MessengerFlexScrollableArea.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact").wrapJsForReason(c("MessengerFlexScrollableArea.react"),{onScroll:c("bs_js_null_undefined").from_opt(i)},j)}g.make=h}),null);
__d("messengerGraphQLSearchTypeaheadReact",["utilsRe","bs_js_boolean","ReasonReact","bs_js_null_undefined","MessengerGraphQLSearchTypeahead.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){return c("ReasonReact").wrapJsForReason(c("MessengerGraphQLSearchTypeahead.react"),{className:i,enableMessageSearch:c("bs_js_boolean").to_js_boolean(j),excludeGroups:c("bs_js_boolean").to_js_boolean(k),excludePages:c("bs_js_boolean").to_js_boolean(l),hasHoverState:c("bs_js_boolean").to_js_boolean(m),hideClearButton:c("utilsRe").optionBoolToNullUndefinedBoolean(n),hideResults:c("utilsRe").optionBoolToNullUndefinedBoolean(o),isFocused:c("utilsRe").optionBoolToNullUndefinedBoolean(p),onBlur:q,onChange:r,onClear:s,onFocus:t,onScrollIntoView:u,onSelect:v,placeholder:w,queryString:c("bs_js_null_undefined").from_opt(x),shouldQueryInternalBot:c("bs_js_boolean").to_js_boolean(y),shouldQueryVCEndpoint:c("bs_js_boolean").to_js_boolean(z),typeaheadViewClassName:A,viewer:B},C)}g.make=h}),null);
__d("ServiceWorkerLoginAndLogout",["ClientServiceWorkerMessage"],(function a(b,c,d,e,f,g){function h(j){new(c("ClientServiceWorkerMessage"))(j,null).sendViaController()}var i={login:function j(){h("login")},logout:function j(){h("logout")}};f.exports=i}),null);
__d("XMessengerDotComLogoutController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/logout/",{next:{type:"String"}})}),null);
__d("XWorkLogoutController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/work/logout/",{next:{type:"String"}})}),null);
__d("MessengerSettingsStore",["CacheStorage","MessengerSettingsActions","MessengerStore","MessengerDotComSettingsInitialData"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=new(c("CacheStorage"))("localstorage"),k="desktopNotifsEnabled";h=babelHelpers.inherits(l,c("MessengerStore"));i=h&&h.prototype;function l(){i.constructor.call(this);this.$MessengerSettingsStore1=babelHelpers["extends"]({},c("MessengerDotComSettingsInitialData"),{desktopNotifsEnabled:this.$MessengerSettingsStore2()})}l.prototype.getSettings=function(){return this.$MessengerSettingsStore1};l.prototype.$MessengerSettingsStore2=function(){return j.get(k,false)};l.prototype.$MessengerSettingsStore3=function(m){j.set(k,m)};l.prototype.__onDispatch=function(m){switch(m.type){case c("MessengerSettingsActions").Types.CHANGE_SETTINGS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,m.newSettings);this.emitChange();break;case c("MessengerSettingsActions").Types.CHANGE_DESKTOP_NOTIFS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,{desktopNotifsEnabled:m.desktopNotifsEnabled});this.$MessengerSettingsStore3(m.desktopNotifsEnabled);this.emitChange();break}};f.exports=new l()}),null);
__d("messengerViewerCardReact",["cx","React","ReasonReact","joinClasses","imageBlockReact","messengerContactImageReact","messengerChatOnOffToggleReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact").statelessComponent("MessengerViewerCardReact");function j(l,m,n,o,p){var q=l?l[0]:"",r=i.slice();r[9]=function(){if(o){var s=o[0];return c("ReasonReact").element(0,0,c("imageBlockReact").make([c("joinClasses")(q,"_1u5d")],0,0,["medium"],[c("ReasonReact").element(0,0,c("messengerContactImageReact").StraightJSComponent[0](["_1u5h"],0,[1],0,34,[s.image_src],0,[])),c("React").createElement("div",{className:"_1u5i"},c("React").createElement("div",{className:"_364g"},s.name)),c("ReasonReact").element(0,0,c("messengerChatOnOffToggleReact").make(m,n,[]))]))}else return c("React").createElement("div",undefined)};return r}var k=34;g.imageSize=k;g.component=i;g.make=j}),null);
__d("messengerSettingsDialogReact",["cx","fbt","bs_array","bs_block","bs_curry","React","linkReact","bs_js_boolean","MercuryIDs","CurrentUser","ReasonReact","EmojiActions","bs_js_primitive","EmojiStateStore","PresencePrivacy","messengerDialogsRe","MercuryParticipants","messengerDialogReact","SubscriptionsHandler","messengerSpinnerReact","MessengerSettingsStore","MessengerSettingsActions","messengerViewerCardReact","messengerCheckboxInputReact","MessengerDesktopNotifications","chatEmojiSkinTonePreferencePickerReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact").reducerComponent("MessengerSettingsDialogReact");function k(x){if(x)return 0;else return c("messengerDialogsRe").removeDialog(0)}function l(){return c("messengerDialogsRe").removeDialog(0)}function m(x,y){var z=y[2][1];c("PresencePrivacy").setVisibility(z!==0?c("PresencePrivacy").OFFLINE:c("PresencePrivacy").ONLINE);return 0}function n(x,y){var z=x[2];if(z)return c("ReasonReact").element(0,0,c("messengerViewerCardReact").make(["_3xld"],x[1],[c("bs_curry")._1(y,m)],[z[0]],[]));else return c("ReasonReact").element(0,0,c("messengerSpinnerReact").make(0,0,0,[]))}function o(x,y){c("MessengerSettingsActions").changeDesktopNotifs(c("bs_js_boolean").to_js_boolean(1-+y[2][3].desktopNotifsEnabled),c("bs_curry")._1(y[1],function(){return 1}));return 0}function p(x){var y=x[2];if(y[4])return i._("You can allow Messenger to send you desktop notifications from your browser preferences.");else return c("bs_array").of_list([c("ReasonReact").element(["notifications-checkox"],0,c("messengerCheckboxInputReact").make(+y[3].desktopNotifsEnabled&&y[5],c("bs_curry")._1(x[0],o),[])),[c("React").createElement("span",{key:"notifications-checkbox-label",className:"_1pr_"},i._("Desktop notifications enabled")),0]])}function q(x){if(c("MessengerDesktopNotifications").isSupported())return c("React").createElement("div",{className:"_374b"+(x[2][4]?" _2bd0":"")},c("React").createElement("div",{className:"_374c"},i._("Notifications")),c("React").createElement("div",{className:"_374d"},p(x)));else return null}function r(){if(c("CurrentUser").isWorkUser())return null;else return c("React").createElement("div",{className:"_374b"},c("React").createElement("div",{className:"_374c"},i._("Payments")),c("React").createElement("div",{className:"_374d"},c("ReasonReact").element(0,0,c("linkReact").make(0,0,0,0,0,0,["https://secure.facebook.com/settings?tab=payments&ref=messengerdotcom_settings"],0,0,0,0,0,0,["_blank"],0,[i._("Manage on Facebook")]))))}function s(){if(c("CurrentUser").isWorkUser())return null;else return c("React").createElement("div",{className:"_374b"},c("React").createElement("div",{className:"_374c"},i._("Blocking")),c("React").createElement("div",{className:"_374d"},c("ReasonReact").element(0,0,c("linkReact").make(0,0,0,0,0,0,["https://www.facebook.com/settings?tab=blocking"],0,0,0,0,0,0,["_blank"],0,[i._("Manage on Facebook")]))))}function t(x,y){var z=y[2][0];if(z&&x===z[0])return 0;else{c("EmojiActions").changeEmojiColor(x);return 0}}function u(x){var y=x[2][0];if(y)return c("ReasonReact").element(0,0,c("chatEmojiSkinTonePreferencePickerReact").make(y[0],c("bs_curry")._1(x[0],t),[]));else return c("ReasonReact").element(0,0,c("messengerSpinnerReact").make(0,0,0,[]))}function v(x){var y=x.target;c("MessengerSettingsActions").changeSettings({sound_enabled:y.checked});return 0}function w(x,y){__p&&__p();var z=j.slice();z[4]=function(A){var B=A[1],C=new(c("SubscriptionsHandler"))();C.addSubscriptions(c("PresencePrivacy").subscribe("privacy-changed",c("bs_curry")._1(B,function(){return 0})),c("PresencePrivacy").subscribe("privacy-user-presence-changed",c("bs_curry")._1(B,function(){return 0})),c("MessengerSettingsStore").addListener("change",c("bs_curry")._1(B,function(){return 0})),c("EmojiStateStore").addListener(c("bs_curry")._1(B,function(){return 0})),c("MercuryParticipants").addListener("change",c("bs_curry")._1(B,function(){return 0})));A[2][6][0]=[C];return 0};z[6]=function(A){var B=A[2][6][0];if(B){B[0].release();return 0}else return 0};z[9]=function(A){var B=A[2];return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,k,0,0,0,["default"],[544],[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Title[0](0,[i._("Settings")])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0](0,[i._("Done")],0,0,[l],[0],0,0,[]))])),c("React").createElement("div",{className:"_374b"},c("React").createElement("div",{className:"_374c"},i._("Account")),c("React").createElement("div",{className:"_374d"},n(B,A[0]))),c("React").createElement("div",{className:"_374b"},c("React").createElement("div",{className:"_374c"},i._("Sounds")),c("React").createElement("div",{className:"_374d"},c("ReasonReact").element(0,0,c("messengerCheckboxInputReact").make(+B[3].sound_enabled,v,[])),c("React").createElement("span",{className:"_1pr_"},i._("Enabled")))),q(A),r(0),s(0),c("React").createElement("div",{className:"_374b"},c("React").createElement("div",{className:"_374c"},i._("Emoji")),c("React").createElement("div",{className:"_374d _5jb0"},u(A)))]))};z[10]=function(){return[[c("EmojiStateStore").getState().emojiColor],+(c("PresencePrivacy").getVisibility()===c("PresencePrivacy").ONLINE),c("bs_js_primitive").null_undefined_to_opt(c("MercuryParticipants").getOrFetch(c("MercuryIDs").getParticipantIDFromUserID(x))),c("MessengerSettingsStore").getSettings(),+c("MessengerDesktopNotifications").isDenied(),+c("MessengerDesktopNotifications").isGranted(),[0]]};z[12]=function(A,B){if(A!==0){var z=B.slice();return c("bs_block").__(0,[(z[4]=1,z)])}else return c("bs_block").__(0,[[[c("EmojiStateStore").getState().emojiColor],+(c("PresencePrivacy").getVisibility()===c("PresencePrivacy").ONLINE),c("bs_js_primitive").null_undefined_to_opt(c("MercuryParticipants").getOrFetch(c("MercuryIDs").getParticipantIDFromUserID(x))),c("MessengerSettingsStore").getSettings(),+c("MessengerDesktopNotifications").isDenied(),+c("MessengerDesktopNotifications").isGranted(),B[6]]])};return z}g.component=j;g.handleToggle=k;g.handleDone=l;g.handleTogglePresence=m;g.renderAccountSection=n;g.handleNotificationsChange=o;g.renderNotificationsContent=p;g.renderNotificationsSection=q;g.renderPaymentsSection=r;g.renderBlockingSection=s;g.handleChooseEmojiColor=t;g.renderEmojiColorSection=u;g.handleSoundChange=v;g.make=w}),null);
__d("messengerSettingsMenuReact",["cx","fbt","Run","Form","goURI","gkx","utilsRe","linkReact","AsyncDialog","CurrentUser","ReasonReact","AsyncRequest","CacheStorage","MessagingTag","MercuryConfig","MessengerView","MercuryFilters","MessengerSpoof","MessengerConfig","MessengerActions","messengerDialogsRe","messengerMenuReact","MessengerEnvironment","XWorkLogoutController","messengerPopoverMenuReact","abstractPopoverButtonReact","ServiceWorkerLoginAndLogout","messengerSettingsDialogReact","XMessengerDotComLogoutController"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(r){r.preventDefault();return 0}function k(){var r=+c("CurrentUser").isWorkUser();return c("ReasonReact").element(0,0,c("messengerMenuReact").MenuItem[0]([r!==0?"https://www.facebook.com/workplace":"https://www.messenger.com/about"],i._("About"),0,["_blank"],[]))}function l(){var r=c("utilsRe").$pipe$unknown(c("MercuryConfig").WorkTermsURI==null?0:[c("MercuryConfig").WorkTermsURI],"https://www.facebook.com/policies");return c("ReasonReact").element(0,0,c("messengerMenuReact").MenuItem[0]([r],i._("Terms"),0,["_blank"],[]))}function m(){var r=c("utilsRe").$pipe$unknown(c("MercuryConfig").WorkPrivacyURI==null?0:[c("MercuryConfig").WorkPrivacyURI],"https://www.facebook.com/privacy/explanation");return c("ReasonReact").element(0,0,c("messengerMenuReact").MenuItem[0]([r],i._("Privacy Policy"),0,["_blank"],[]))}function n(){var r=c("utilsRe").$pipe$unknown(c("MercuryConfig").WorkCookiesURI==null?0:[c("MercuryConfig").WorkCookiesURI],"https://www.facebook.com/help/cookies");return c("ReasonReact").element(0,0,c("messengerMenuReact").MenuItem[0]([r],i._("Cookie Policy"),0,["_blank"],[]))}var o=c("ReasonReact").statelessComponent("MessengerSettingsMenuReact");function p(r,s,t,u,v){__p&&__p();var w=function w(L){L.preventDefault();return c("messengerDialogsRe").showDialog(function(){return c("ReasonReact").element(0,0,c("messengerSettingsDialogReact").make(u,[]))})},x=function x(L){L.preventDefault();var H=+(t===c("MessengerView").MASTER.RECENT);c("MessengerActions").changeMasterView(H!==0?c("MessengerView").MASTER.PEOPLE:c("MessengerView").MASTER.RECENT);return 0},y=function y(L){L.preventDefault();var H=+(s===c("MessagingTag").PENDING);c("MessengerActions").changeFolder(H!==0?c("MessagingTag").INBOX:c("MessagingTag").PENDING);return 0},z=function z(L){L.preventDefault();var H=+(s===c("MessagingTag").ACTION_ARCHIVED);c("MessengerActions").changeFolder(H!==0?c("MessagingTag").INBOX:c("MessagingTag").ACTION_ARCHIVED);return 0},A=function A(L){L.preventDefault();c("MessengerSpoof").init(function(){c("goURI")(window.location.href,true,undefined);return 0});return 0},B=function B(){var L=new(c("CacheStorage"))("localstorage");c("Run").onUnload(function(){L.clear();c("ServiceWorkerLoginAndLogout").logout();return 0});var H=+c("CurrentUser").isWorkUser();c("Form").post((H!==0?c("XWorkLogoutController"):c("XMessengerDotComLogoutController")).getURIBuilder().getURI(),{});return 0},C=function C(L){L.preventDefault();c("AsyncDialog").send(new(c("AsyncRequest"))("/ajax/bugs/report"));return 0},D=function D(L){L.preventDefault();var H=+(r===c("MercuryFilters").UNREAD);c("MessengerActions").changeFilter(H!==0?c("MercuryFilters").ALL:c("MercuryFilters").UNREAD);return 0},E=function E(){return c("ReasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,i._("Log Out"),[B],0,[]))},F=function F(){var H=+c("gkx")("AT6GEfChyW-tzylcdm6O_JRhHajnylVXoVE8pv4PNlNhitDF6RnMoDj8H5hMhwblsW44-uzLmxrmI8D6_Amq24p9");return c("ReasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,H!==0?i._("Connection Requests"):i._("Connection Requests"),[y],0,[]))},G=function G(){return c("ReasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,i._("Archived Threads"),[z],0,[]))},H=+c("CurrentUser").isWorkUser(),I=H!==0?"/help/work/682468881954082":"https://www.facebook.com/help/735006619902401",J=function J(){return c("ReasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,"[FB-Only] Copy Spoofs",[A],0,[]))},K=o.slice();K[9]=function(){var H=+(t===c("MessengerView").MASTER.RECENT),L=+(t===c("MessengerView").MASTER.RECENT),M=+(t===c("MessengerView").MASTER.RECENT&&s===c("MessagingTag").INBOX),N=+(r===c("MercuryFilters").UNREAD),O=+(c("MessengerEnvironment").messengerdotcom||c("CurrentUser").isWorkUser()),P=+(c("MessengerEnvironment").messengerdotcom||c("CurrentUser").isWorkUser()),Q=+(c("MessengerEnvironment").messengerdotcom||c("CurrentUser").isWorkUser()&&(c("MercuryConfig").WorkTermsURI==null?0:[c("MercuryConfig").WorkTermsURI])!==0),R=+(c("MessengerEnvironment").messengerdotcom||c("CurrentUser").isWorkUser()&&(c("MercuryConfig").WorkPrivacyURI==null?0:[c("MercuryConfig").WorkPrivacyURI])!==0),S=+(c("MessengerEnvironment").messengerdotcom||c("CurrentUser").isWorkUser()&&(c("MercuryConfig").WorkCookiesURI==null?0:[c("MercuryConfig").WorkCookiesURI])!==0),T=+c("MessengerConfig").GKSpoof,U=+(c("MessengerEnvironment").messengerdotcom||c("CurrentUser").isWorkUser()),V=+(c("MessengerEnvironment").messengerdotcom||c("CurrentUser").isWorkUser()),W=c("ReasonReact").element(0,0,c("messengerMenuReact").Menu[0]([c("ReasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,i._("Settings"),[w],0,[])),c("ReasonReact").element(0,0,c("messengerMenuReact").MenuSeparator[0]([])),c("ReasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,H!==0?i._("Active Contacts"):i._("Recent Messages"),[x],0,[])),L!==0?F(0):null,M!==0?G(0):null,c("ReasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,N!==0?i._("All Threads"):i._("Unread Threads"),[D],0,[])),O!==0?c("ReasonReact").element(0,0,c("messengerMenuReact").MenuSeparator[0]([])):null,P!==0?k(0):null,Q!==0?l(0):null,R!==0?m(0):null,S!==0?n(0):null,c("ReasonReact").element(0,0,c("messengerMenuReact").MenuSeparator[0]([])),c("ReasonReact").element(0,0,c("messengerMenuReact").MenuItem[0]([I],i._("Help"),0,["_blank"],[])),c("ReasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,i._("Report a Problem"),[C],0,[])),T!==0?J(0):null,U!==0?c("ReasonReact").element(0,0,c("messengerMenuReact").MenuSeparator[0]([])):null,V!==0?E(0):null])),X=i._("Settings, help and more"),Y={button:c("ReasonReact").element(0,0,c("linkReact").make([X],["_30yy _2fug"],0,0,0,0,0,0,0,0,["button"],0,0,0,[X],[])),defaultMaxWidth:200};return c("ReasonReact").element(0,0,c("messengerPopoverMenuReact").make(0,0,W,0,0,[c("ReasonReact").element(0,0,c("abstractPopoverButtonReact").make([Y],[false],0,0,[200],[]))]))};return K}var q=c("utilsRe").$pipe$unknown;g.preventDefault=j;g.$pipe$unknown=q;g.renderAbout=k;g.renderPolicies=l;g.renderPrivacy=m;g.renderCookies=n;g.component=o;g.make=p}),null);
__d("messengerMasterViewHeaderReact",["cx","fbt","bs_curry","React","gkx","linkReact","CurrentUser","ReasonReact","MessagingTag","MercuryConfig","MessengerView","MessengerActions","messengerDirectRe","MessengerURIConstants","messengerSettingsMenuReact","messengerDeleteAllMenuBootloaderReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact").statelessComponent("MessengerMasterViewHeaderReact");function k(o){o.preventDefault();c("MessengerActions").changeDetailView(c("MessengerView").DETAIL.COMPOSE);return 0}function l(o){o.preventDefault();c("MessengerActions").changeFolder(c("MessagingTag").PENDING);return 0}function m(o,p,q,r,s,t,u,v){__p&&__p();var w=+c("gkx")("AT6GEfChyW-tzylcdm6O_JRhHajnylVXoVE8pv4PNlNhitDF6RnMoDj8H5hMhwblsW44-uzLmxrmI8D6_Amq24p9"),x=w!==0?i._("Back to Connection Requests"):i._("Back to Message Requests"),y=function y(F){F.preventDefault();if(q!==c("MessengerView").MASTER.RECENT)c("MessengerActions").changeMasterView(c("MessengerView").MASTER.RECENT);if(s)c("bs_curry")._1(t,0);c("MessengerActions").changeFolder(c("MessagingTag").INBOX);return 0},z=function z(){var F=s||+(p===c("MessagingTag").PENDING||p===c("MessagingTag").ACTION_ARCHIVED||q!==c("MessengerView").MASTER.RECENT),G=F!==0?y:l,H=F!==0?i._("Back to Recent Messages"):x;return c("ReasonReact").element(0,0,c("linkReact").make([H],["_30yy _2oc9"],0,0,0,0,0,[G],0,0,["button"],0,0,0,[H],[]))},A=function A(){__p&&__p();if(p===c("MessagingTag").PENDING||s){var w=+c("gkx")("AT6GEfChyW-tzylcdm6O_JRhHajnylVXoVE8pv4PNlNhitDF6RnMoDj8H5hMhwblsW44-uzLmxrmI8D6_Amq24p9");if(w!==0)return i._("Connection Requests");else return i._("Back to Message Requests")}else if(p===c("MessagingTag").OTHER)return i._("Filtered Requests");else if(q===c("MessengerView").MASTER.PEOPLE)return i._("Active Now");else if(c("CurrentUser").isWorkUser())return i._("Workplace Chat");else return i._("Messenger")},B=function B(){return c("React").createElement("div",{className:"_4kzu"},c("ReasonReact").element(0,0,c("messengerSettingsMenuReact").make(o,p,q,r,[])))},C=function C(){return c("React").createElement("div",{className:"_4kzu"},c("ReasonReact").element(0,0,c("messengerDeleteAllMenuBootloaderReact").make(o,p,r,u,s,[])))},D=function D(){var F=i._("New Message");return c("ReasonReact").element(0,0,c("linkReact").make([F],["_30yy _2oc8"],0,0,0,0,[c("MessengerURIConstants").COMPOSE_SUBPATH],[k],0,0,["button"],0,0,0,[F],[]))},E=j.slice();E[9]=function(){var w=s||+(p!==c("MessagingTag").INBOX||q!==c("MessengerView").MASTER.RECENT),F=w!==0?z(0):B(0),G=(s||+(p===c("MessagingTag").PENDING||p===c("MessagingTag").OTHER))&&+c("MercuryConfig").MessengerInboxRequests,H=G!==0?C(0):D(0);return c("React").createElement("div",{className:"_36ic _5l-3",role:"banner"},F,c("ReasonReact").element(0,0,c("bs_curry")._2(c("messengerDirectRe").make,r,[])),c("React").createElement("div",{className:"_1tqi"},A(0)),H)};return E}var n=c("ReasonReact").wrapReasonForJs(j,function(o){return m(o.filter,o.folder,o.view,o.viewer,+o.aggregationView,o.onBackToRecent,o.threadIDs,[])});g.component=j;g.handleAddClick=k;g.handleFilteredRequestsBackArrowClick=l;g.make=m;g.jsComponent=n}),null);
__d("messengerMessageRequestsInfoReact",["ReasonReact","MessengerMessageRequestsInfo.react"],(function a(b,c,d,e,f,g){"use strict";function h(i){return c("ReasonReact").wrapJsForReason(c("MessengerMessageRequestsInfo.react"),{},i)}g.make=h}),null);
__d("messengerThreadListGridWrapperReact",["ReasonReact","MessengerThreadListGridWrapper.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact").wrapJsForReason(c("MessengerThreadListGridWrapper.react"),{label:i},j)}g.make=h}),null);
__d("messengerThreadlistLinkRowReact",["cx","fbt","React","linkReact","ReasonReact"],(function a(b,c,d,e,f,g,h,i){"use strict";function j(k){return c("React").createElement("li",{className:"_5l-3 _1ht1 _2ogr"},c("React").createElement("div",{className:"_2ogs"},c("ReasonReact").element(0,0,c("linkReact").make(0,["_2ogt"],0,0,0,0,0,[k],0,0,0,0,0,0,0,i._("See Filtered Requests")))))}g.make=j}),null);
__d("messengerThreadlistMessageRequestsRowReact",["ReasonReact","MessengerThreadlistMessageRequestsRow.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o){return c("ReasonReact").wrapJsForReason(c("MessengerThreadlistMessageRequestsRow.react"),{onAggregationClick:i,isFocused:j,onFocus:k,newMessageRequestThreads:l,aggregatedThreads:m,viewer:n},o)}g.make=h}),null);
__d("messengerThreadlistNewMessageRowReact",["bs_js_boolean","ReasonReact","MessengerThreadlistNewMessageRow.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact").wrapJsForReason(c("MessengerThreadlistNewMessageRow.react"),{isActive:c("bs_js_boolean").to_js_boolean(i),onClose:j},k)}g.make=h}),null);
__d("messengerThreadlistRowContainerReact",["utilsRe","bs_js_boolean","ReasonReact","bs_js_null_undefined","MessengerThreadlistRowContainer.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q,r,s){return c("ReasonReact").wrapJsForReason(c("MessengerThreadlistRowContainer.react"),{folder:c("bs_js_null_undefined").from_opt(i),isActive:c("utilsRe").optionBoolToBoolean(j),isFocused:c("utilsRe").optionBoolToBoolean(k),isActionsFocused:c("utilsRe").optionBoolToBoolean(l),isTabbable:c("utilsRe").optionBoolToBoolean(m),onFocus:n,onScrollIntoView:o,thread:p,viewer:q,showAggregation:c("bs_js_boolean").to_js_boolean(r)},s)}g.make=h}),null);
__d("xUIButtonReact",["ReasonReact","XUIButton.react","bs_js_null_undefined"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(l){if(l)switch(l[0]){case 0:return["default"];case 1:return["special"];case 2:return["confirm"]}else return 0}function i(l){if(l)switch(l[0]){case 0:return["small"];case 1:return["medium"];case 2:return["large"];case 3:return["xlarge"];case 4:return["xxlarge"]}else return 0}function j(l){if(l)if(l[0]!==0)return["dark"];else return["light"];else return 0}function k(l,m,n,o,p,q,r,s,t,u){return c("ReasonReact").wrapJsForReason(c("XUIButton.react"),{className:c("bs_js_null_undefined").from_opt(l),onClick:c("bs_js_null_undefined").from_opt(m),label:c("bs_js_null_undefined").from_opt(n),use:c("bs_js_null_undefined").from_opt(h(o)),size:c("bs_js_null_undefined").from_opt(i(p)),borderShade:c("bs_js_null_undefined").from_opt(j(q)),suppressed:c("bs_js_null_undefined").from_opt(r),href:c("bs_js_null_undefined").from_opt(s),target:c("bs_js_null_undefined").from_opt(t)},u)}g.stringOfUse=h;g.stringOfSize=i;g.stringOfBorderShade=j;g.make=k}),null);
__d("workChatThreadlistNewsfeedActionReact",["cx","fbt","bs_block","bs_curry","React","gkx","bs_js_boolean","bs_pervasives","ReasonReact","AsyncRequest","xUIButtonReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact").reducerComponent("WorkChatThreadlistNewsfeedActionReact");function k(){__p&&__p();var m=j.slice();m[4]=function(n){n[2][1][0]=[setInterval(c("bs_curry")._1(n[1],function(){return 1}),6e4)];return 0};m[9]=function(n){var o=n[2][0],p=o!==0?i._({"*":"{post count} unread posts","_1":"{post count} unread post"},[i.param("post count",c("bs_pervasives").string_of_int(o)),i.plural(o)]):i._("Go to News Feed"),q=n[2][0],r=q!==0?2:0,s=+c("gkx")("AT5bsDZiHMWtE2UowLAt2aHF1xqlqGKl8yICLll1Wu-J_t74abq6btJr92TeaiK_cpisH5W4HQQB08thCKN0MwcDBLaAz1ePIpoBNZzuZ0lxOg");if(s!==0)return c("React").createElement("div",{className:"_6364"+(c("bs_js_boolean").to_js_boolean(+(r===0))?" _1ngy":"")},c("ReasonReact").element(0,0,c("xUIButtonReact").make(0,[c("bs_curry")._1(n[1],function(){return 0})],[p],[r],0,0,0,["/feed?ref=chat_threadlist"],["_blank"],[])));else return null};m[10]=function(){return[0,[0]]};m[12]=function(n,o){if(typeof n==="number")if(n!==0)return c("bs_block").__(2,[function(p){new(c("AsyncRequest"))("/ajax/litestand/newsfeed_count").setHandler(c("bs_curry")._1(p[1],function(q){return[q.payload]})).send();return 0}]);else return c("bs_block").__(0,[[0,o[1]]]);else return c("bs_block").__(0,[[n[0],o[1]]])};return m}var l=6e4;g.component=j;g.updateInterval=l;g.make=k}),null);
__d("WorkchatThreadListInviteRow.react",["cssVar","cx","fbt","Link.react","MercuryConfig","MessengerAddIconSVG.react","React","WorkInviteSource","XWorkInviteCoworkersDialogController"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").PureComponent);l=k&&k.prototype;function m(){l.constructor.call(this);this.state={inviteURI:c("XWorkInviteCoworkersDialogController").getURIBuilder().setEnum("source",c("WorkInviteSource").WWW_CHAT_THREAD_LIST).getURI()}}m.prototype.render=function(){if(!c("MercuryConfig").ShowInviteSurface)return null;return c("React").createElement("li",{className:"_5l-3 _1q5x",role:"row",tabIndex:0},c("React").createElement("div",{className:"_5l-3 _1q5y",id:"work_thread_list_invite_row",role:"gridcell",tabIndex:-1},c("React").createElement(c("Link.react"),{href:"#",ajaxify:this.state.inviteURI,rel:"dialog",className:"_1q5y _1q61 _5l-3",s:"true",ref:"link",role:"link",tabIndex:-1},c("React").createElement("div",{className:"_5l-3 _1q60"},c("React").createElement("div",{"aria-hidden":true,className:"_1qt3 _5l-3"},c("React").createElement(c("MessengerAddIconSVG.react"),{className:"_1q5z",customColor:"#0084ff"})),c("React").createElement("div",{className:"_1qt4 _5l-m"},c("React").createElement("div",{className:"_1qt5 _5l-3"},c("React").createElement("div",{className:"_1ht6"},j._("Invite Coworkers"))))))))};f.exports=m}),null);
__d("workchatThreadListInviteRowReact",["ReasonReact","WorkchatThreadListInviteRow.react"],(function a(b,c,d,e,f,g){"use strict";function h(i){return c("ReasonReact").wrapJsForReason(c("WorkchatThreadListInviteRow.react"),{},i)}g.make=h}),null);
__d("messengerThreadlistReact",["cx","csx","fbt","bs_array","bs_block","bs_curry","React","Parent","gkx","utilsRe","ReactDOM","debounce","linkReact","bs_caml_array","MercuryIDs","bs_pervasives","CurrentUser","ReasonReact","bs_js_primitive","MessagingTag","MessengerView","MercuryFilters","MessengerActions","MercuryThreadInfo","KeyEventController","SubscriptionsHandler","chatSidebarSheetReact","messengerSpinnerReact","messageRequestLoggerRe","MessengerTypeaheadUtils","MessengerComposerActions","MercuryTypeaheadConstants","MessengerSearchFunnelLogger","messengerNewMessagesNoticeReact","messengerThreadlistLinkRowReact","messengerFlexScrollableAreaReact","workchatThreadListInviteRowReact","messengerMessageRequestsInfoReact","messengerThreadListGridWrapperReact","messengerGraphQLSearchTypeaheadReact","MessengerSearchFunnelLoggerConstants","messengerThreadlistRowContainerReact","messengerThreadlistNewMessageRowReact","workChatThreadlistNewsfeedActionReact","messengerThreadlistMessageRequestsRowReact"],(function aa(ba,a,ca,da,ea,b,fa,ga,c){"use strict";__p&&__p();function d(u,v,w){if(w)if(u.length>0&&v.length>0){var x=a("bs_caml_array").caml_array_get(a("bs_caml_array").caml_array_get(u,0),0),y=a("bs_caml_array").caml_array_get(a("bs_caml_array").caml_array_get(v,0),0);if(x.unread_count>0&&x.thread_id!==w[0]&&x!==y)return+a("MercuryThreadInfo").isMuted(x);else return 0}else return 0;else return 0}function e(u,v){var w=+u.ctrlKey,x=+u.metaKey,y=+u.shiftKey,z=+a("KeyEventController").filterEventTypes(u,v),A=+a("KeyEventController").filterEventTargets(u,v),B=a("Parent").bySelector(u.target,"._150g");if(w!==0||x!==0||y!==0||!(z!==0&&A!==0&&B==null))return 0;else return 1}function f(u){return a("bs_block").__(3,[u])}function g(u,v,w){__p&&__p();var x=w.findIndex(function(z){__p&&__p();var A=z.length;if(A!==1)if(A!==0&&u&&a("bs_caml_array").caml_array_get(z,0).thread_id===u[0])return 1;else return 0;else{var B=z[0];if(u&&B.thread_id===u[0])return 1;else return 0}}),y=a("bs_pervasives").min(a("bs_pervasives").max(x+v|0,0),w.length-1|0);return a("bs_caml_array").caml_array_get(a("bs_caml_array").caml_array_get(w,y),0).thread_id}function h(u){return a("bs_block").__(4,[u])}function i(u,v){v.preventDefault();return a("bs_block").__(2,[u])}function j(u){u.preventDefault();return 4}function k(){a("MessengerSearchFunnelLogger").startFunnel("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");return 0}function l(){a("MessengerSearchFunnelLogger").endFunnel("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");return 1}function m(u){return a("bs_block").__(1,[u.target.value])}function n(u,v){var w=v[2][6];if(w){a("MessengerTypeaheadUtils").scrollEntryIntoView(u,w[0]);return 0}else return 0}function o(u){u.preventDefault();a("MessengerActions").changeFolder(a("MessagingTag").OTHER);return 0}function p(u){u.preventDefault();a("MessengerActions").changeFolder(a("MessagingTag").INBOX);a("MessengerActions").changeFilter(a("MercuryFilters").ALL);return 0}function q(u,v,w,x){__p&&__p();var y=[];a("bs_array").iter(function(B){__p&&__p();var C=v[B];if(C!==undefined){var D=C[1],E=C[0];if(E==null)return 0;else{var F=a("ReactDOM").findDOMNode(E).getBoundingClientRect();if(F.top>u.top-10&&F.bottom<u.bottom+10){y.push({threadID:D.thread_id,unread:+(D.unread_count>0)});return 0}else return 0}}else return 0},Object.keys(v));if(y.length){var z=a("bs_array").map(function(B){return a("MercuryIDs").getThreadKeyfromThreadIDUserID(B.threadID,x)},y),A=z.join(",");return a("messageRequestLoggerRe").logItemImpression(y,A,w)}else return 0}var r=a("debounce")(function(u){var v=u[1],w=u[0],x=w[6];if(x){var y=x[0].getArea().getElement().getBoundingClientRect();q(y,w[7],a("MessagingTag").PENDING,v);return q(y,w[8],a("MessagingTag").OTHER,v)}else return 0},500);function s(u,v,w,x){var y=v[2],z=y[0],A=z&&z[0]===a("bs_caml_array").caml_array_get(x,0).thread_id?true:false;return a("ReasonReact").element([a("bs_caml_array").caml_array_get(x,0).thread_id],0,a("messengerThreadlistMessageRequestsRowReact").make(w,A,a("bs_curry")._1(v[1],f),[],x,u,[]))}function ha(u,v,w){__p&&__p();var x=w[2];if(u.folder===a("MessagingTag").PENDING){x[7][u.thread_id]=[v,u];return 0}else if(u.folder===a("MessagingTag").OTHER){x[8][u.thread_id]=[v,u];return 0}else return 0}function ia(u,v,w,x,y,z){var A=w[2],B=u&&u[0]===z.thread_id?1:0,C=A[0],D=C?1:0,E=A[0],F=E&&E[0]===z.thread_id?1:0,G=B!==0?D!==0&&F===0?0:1:F!==0?1:0,H=+(z.folder===a("MessagingTag").PENDING||z.folder===a("MessagingTag").OTHER);return a("ReasonReact").element([z.thread_id],[H!==0?a("bs_curry")._1(w[0],function(I,J){return ha(z,I,J)}):function(){return 0}],a("messengerThreadlistRowContainerReact").make([x],[B],[F],[A[2]],[G],a("bs_curry")._1(w[1],f),a("bs_curry")._1(w[0],n),z,v,y,[]))}function ja(u){return a("bs_block").__(0,[u==null?0:[u]])}function ka(u,v){var w=u[1],x=u[0],y=w==null?a("MessengerSearchFunnelLoggerConstants").OTHER:w===a("MercuryTypeaheadConstants").FRIEND_TYPE?a("MessengerSearchFunnelLoggerConstants").USER_CONTACT:w===a("MercuryTypeaheadConstants").NON_FRIEND_TYPE?a("MessengerSearchFunnelLoggerConstants").USER_NON_CONTACT:w===a("MercuryTypeaheadConstants").FB4C_TYPE?a("MessengerSearchFunnelLoggerConstants").COWORKER:w===a("MercuryTypeaheadConstants").GAME_TYPE?a("MessengerSearchFunnelLoggerConstants").GAME:w===a("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE||w===a("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE||w===a("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE?a("MessengerSearchFunnelLoggerConstants").PAGE:a("MessengerSearchFunnelLoggerConstants").OTHER;a("MessengerActions").selectThread(x,w);a("MessengerSearchFunnelLogger").logResultSelection("WWW_MESSENGER_SEARCH_SESSION_FUNNEL",v[2][3],x,y);return 0}var t=a("ReasonReact").reducerComponentWithRetainedProps("MessengerThreadlistReact");function la(u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,oa){__p&&__p();var K=function K(L,M,N){__p&&__p();var O=N[3],G=O[0],P=typeof L==="number"?L!==0?G.length-1|0:(-G.length|0)-1|0:L[0],Q=+M.altKey,R=a("Parent").bySelector(M.target,"._4rv3"),S=N[2][0],T=a("Parent").bySelector(M.target,"._1ht1"),U=0;if(Q!==0)if(R==null)U=1;else{var V=O[4];if(V!==0)if(P===1&&G.length>0){a("MessengerActions").selectThread(a("bs_caml_array").caml_array_get(a("bs_caml_array").caml_array_get(G,0),0).thread_id,null);return 0}else return 0;else{var W=G.findIndex(function(Y){if(Y.length!==1)return 0;else{var Z=Y[0],Q=O[2];if(Q&&Q[0]===Z.thread_id)return 1;else return 0}});if(W!==-1){var X=a("bs_caml_array").caml_array_get(G,W+P|0);a("MessengerActions").selectThread(a("bs_caml_array").caml_array_get(X,0).thread_id);if(O[1]&&W===0&&P===-1)a("MessengerActions").changeDetailView(a("MessengerView").DETAIL.COMPOSE);if(W===(G.length-1|0))return a("bs_curry")._1(O[3],0);else return 0}else return 0}}else U=1;if(U===1)if(S&&!(T==null)){M.preventDefault();return a("bs_curry")._2(N[1],h,P)}else return 0},pa=function pa(){a("MessengerSearchFunnelLogger").logClearQuery("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");if(v)a("bs_curry")._1(v[0],0);return 2},qa=function qa(){return 3},ra=function ra(L,oa){__p&&__p();L.stopPropagation();a("MessengerComposerActions").exitComposeState();if(B){var M=G.find(function(N){var O=N.length;if(O!==1)if(O!==0)return+(a("bs_js_primitive").undefined_to_opt(N.find(function(M){return+(M.unread_count===0)}))===0);else return 0;else{var P=N[0];return+(P.unread_count===0)}});a("MessengerActions").selectThread(M!==undefined?a("bs_caml_array").caml_array_get(M,0).thread_id:null,null);return 0}else return 0},sa=function sa(L,oa){L.preventDefault();return a("bs_curry")._1(D,0)},ta=function ta(z,A,J,L){__p&&__p();var M=0,N=0;if(J!==0)return null;else if(z)if(z[0]!==0)return null;else N=2;else N=2;if(N===2)if(A)if(A[0]!==0)return a("React").createElement("div",{className:"_19hf"},a("ReasonReact").element(0,0,a("messengerSpinnerReact").make(0,0,0,[])));else M=1;else M=1;if(M===1)return a("React").createElement("div",{className:"_19hf"},a("ReasonReact").element(0,0,a("linkReact").make(0,0,0,0,0,0,["#"],[a("bs_curry")._1(L[0],sa)],0,0,0,0,[-1],0,0,[c._("Show Older")])))},ua=function ua(L){__p&&__p();if(G.length)return a("ReasonReact").element(0,0,a("messengerThreadListGridWrapperReact").make(c._("Conversation List"),[a("bs_array").map(function(R){if(R.length!==1)return s(H,L,I,R);else{var S=R[0];return ia(u,H,L,x,J,S)}},G)]));else{var M;if(x===a("MessagingTag").INBOX){var N=+(w===a("MercuryFilters").UNREAD);M=N!==0?c._("No unread messages found."):c._("No messages found.")}else if(x===a("MessagingTag").PENDING){var O=+a("gkx")("AT6GEfChyW-tzylcdm6O_JRhHajnylVXoVE8pv4PNlNhitDF6RnMoDj8H5hMhwblsW44-uzLmxrmI8D6_Amq24p9");M=O!==0?c._("No Connection requests found."):c._("No Message requests found.")}else M=c._("No filtered requests found.");var P=+(x!==a("MessagingTag").INBOX||w!==a("MercuryFilters").ALL),Q=P!==0?a("ReasonReact").element(0,0,a("linkReact").make(0,0,0,0,0,0,0,[p],0,0,0,0,0,0,0,[c._("Return to inbox.")])):null;return a("React").createElement("div",{className:"_3blk"},M,a("React").createElement("div",{className:"_3bll"},Q))}};return[t[0],t[1],t[2],function(L){__p&&__p();var M=L[3],N=L[2];if(M[5]!==x||J!==M[6])r([N,H]);var O=N[6],P=O?+O[0].isScrolledToTop():0,Q=d(G,M[0],u),R=0;if(P!==0)R=1;else if(Q!==0)if(E){var S=E[0],T=N.slice(),U=+(S.length===0);T[3]=U!==0?S:N[3];T[4]=1;return T}else return N;else R=1;if(R===1)if(E){var V=E[0],W=N.slice(),X=+(V.length===0);W[3]=X!==0?V:N[3];W[4]=N[4]&&1-P;return W}else return N},function(L){__p&&__p();var M=L[2],N=new(a("SubscriptionsHandler"))(),O=[-1],P=[1],Q=[-5],R=[5];N.addSubscriptions(a("KeyEventController").registerKey("UP",a("bs_curry")._1(L[0],function(S,T){return K(O,S,T)}),e),a("KeyEventController").registerKey("DOWN",a("bs_curry")._1(L[0],function(S,T){return K(P,S,T)}),e),a("KeyEventController").registerKey("PAGE_UP",a("bs_curry")._1(L[0],function(S,T){return K(Q,S,T)})),a("KeyEventController").registerKey("PAGE_DOWN",a("bs_curry")._1(L[0],function(S,T){return K(R,S,T)})),a("KeyEventController").registerKey("HOME",a("bs_curry")._1(L[0],function(S,T){return K(0,S,T)})),a("KeyEventController").registerKey("END",a("bs_curry")._1(L[0],function(S,T){return K(1,S,T)})),a("KeyEventController").registerKey("LEFT",a("bs_curry")._1(L[1],function(S){return i(0,S)})),a("KeyEventController").registerKey("RIGHT",a("bs_curry")._1(L[1],function(S){return i(1,S)})));r([M,H]);M[5][0]=[N];return 0},function(L){var M=L[1],N=L[0],O=+(M[2][1]!==N[2][1]),P=y&&1-N[3][1],Q=M[2][6];if(O!==0&&P!==0&&Q){Q[0].scrollToTop();return 0}else return 0},function(L){var M=L[2][5][0];if(M){M[0].release();return 0}else return 0},t[7],t[8],function(L){var M=L[2],N=M[4]&&1-M[1],O=c._("Conversations"),P=E?1:0,Q=+(x===a("MessagingTag").INBOX),R;if(Q!==0){var S=+a("CurrentUser").isWorkUser();R=a("ReasonReact").element(0,0,a("messengerGraphQLSearchTypeaheadReact").make("_5iwm"+(M[1]||+(M[3].length>0)?" _5iwn":"")+" _150g",1,0,0,0,[+(M[3]==="")&&1-P],[P],[M[1]],a("bs_curry")._1(L[1],l),a("bs_curry")._1(L[1],m),a("bs_curry")._1(L[1],pa),a("bs_curry")._1(L[1],k),a("bs_curry")._1(L[0],n),function(Y,Z){return a("bs_curry")._2(L[0],ka,[Y,Z])},S!==0?c._("Search Workplace Chat"):c._("Search Messenger"),[M[3]],1,1,"_11_d",H,[]))}else R=null;var T=+a("CurrentUser").isWorkUser()&&1-M[1],U=+(x===a("MessagingTag").PENDING),V=+(x===a("MessagingTag").INBOX&&C.length>0),W=+(x===a("MessagingTag").PENDING),X=+a("CurrentUser").isWorkUser();return a("React").createElement("div",{className:"_2xhi"},a("ReasonReact").element(0,0,a("chatSidebarSheetReact").make("_p0g",[])),a("ReasonReact").element(0,0,a("messengerNewMessagesNoticeReact").make(N,a("bs_curry")._1(L[1],j),0,[])),a("ReasonReact").element(0,[a("bs_curry")._1(L[1],ja)],a("messengerFlexScrollableAreaReact").make([a("bs_curry")._1(L[1],qa)],[R,T!==0?a("ReasonReact").element(0,0,a("workchatThreadListInviteRowReact").make([])):null,U!==0?a("ReasonReact").element(0,0,a("messengerMessageRequestsInfoReact").make([])):null,a("React").cloneElement(a("React").createElement("div",{className:M[1]&&1-P?"accessible_elem":"",role:"navigation"}),{"aria-label":O},V!==0?a("ReasonReact").element(0,0,a("messengerThreadlistMessageRequestsRowReact").make(I,false,a("bs_curry")._1(L[1],f),C,[],H,[])):null,y!==0?a("ReasonReact").element(0,0,a("messengerThreadlistNewMessageRowReact").make(B,a("bs_curry")._1(L[0],ra),[])):null,ua(L),W!==0?a("messengerThreadlistLinkRowReact").make(o):null,F?a("bs_curry")._1(F[0],0):ta(z,A,J,L))])),X!==0?a("ReasonReact").element(0,0,a("workChatThreadlistNewsfeedActionReact").make([])):null)},function(){return[0,0,0,"",0,[0],0,{},{}]},[G,y,u,D,B,x,J],function(L,M){__p&&__p();if(typeof L==="number")switch(L){case 0:var N=M.slice();return a("bs_block").__(0,[(N[1]=1,N)]);case 1:var O=M.slice();return a("bs_block").__(0,[(O[1]=0,O[3]="",O)]);case 2:var P=M.slice();return a("bs_block").__(0,[(P[3]="",P)]);case 3:if(M[1])return 0;else{var Q=M[6];if(Q){var R=Q[0],S=+R.isScrolledToBottom(),T=+R.isScrolledToTop(),U=M[4];if(S!==0){var V=0;if(T!==0)if(U!==0){var W=M.slice();return a("bs_block").__(3,[(W[4]=0,W),function($){a("bs_curry")._1(D,0);return r([$[2],H])}])}else V=1;else V=1;if(V===1)return a("bs_block").__(2,[function($){a("bs_curry")._1(D,0);return r([$[2],H])}])}else{var X=0;if(T!==0)if(U!==0){var Y=M.slice();return a("bs_block").__(3,[(Y[4]=0,Y),function($){return r([$[2],H])}])}else X=1;else X=1;if(X===1)return a("bs_block").__(2,[function($){return r([$[2],H])}])}}else return 0}break;case 4:var Z=M.slice();return a("bs_block").__(3,[(Z[4]=0,Z),function($){var Q=$[2][6];if(Q){Q[0].scrollToTop();return 0}else return 0}])}else switch(L.tag|0){case 0:var va=M.slice();return a("bs_block").__(1,[(va[6]=L[0],va)]);case 1:var wa=M.slice();return a("bs_block").__(0,[(wa[3]=L[0],wa)]);case 2:var xa=M.slice();return a("bs_block").__(0,[(xa[2]=L[0],xa)]);case 3:var ya=M.slice();return a("bs_block").__(0,[(ya[0]=[L[0]],ya)]);case 4:var za=M.slice();return a("bs_block").__(0,[(za[0]=[g(M[0],L[0],G)],za)])}},t[13]]}var ma=a("ReasonReact").wrapReasonForJs(t,function(u){var v=a("utilsRe").nullUndefinedBooleanToOptionBool(u.isComposing);return la(a("bs_js_primitive").null_undefined_to_opt(u.activeThreadID),a("bs_js_primitive").null_undefined_to_opt(u.clearQuery),u.filter,u.folder,v?v[0]:0,a("utilsRe").nullUndefinedBooleanToOptionBool(u.isLoaded),a("utilsRe").nullUndefinedBooleanToOptionBool(u.isLoading),+u.isNewMessageActive,u.newMessageRequestThreads,u.onLoadMoreRequest,a("bs_js_primitive").null_undefined_to_opt(u.queryString),a("bs_js_primitive").null_undefined_to_opt(u.renderLoadMore),a("bs_array").map(function(w){return[].concat(w)},u.threads),u.viewer,u.onAggregationClick,+u.showAggregation,[])}),na=10;b.hasNewUnreadMessages=d;b.filterKeyEvent=e;b.handleThreadFocus=f;b.getFocusedThreadId=g;b.updateThreadFocus=h;b.handleActionsFocus=i;b.handleNewMessageNoticeClick=j;b.handleFocus=k;b.handleBlur=l;b.handleChange=m;b.handleScrollIntoView=n;b.handleFilteredRequestsClick=o;b.handleReturnToInboxClick=p;b.impressionOffset=na;b.logNodeImpressions=q;b.checkAndUpdateMessageRequestImpressions=r;b.renderAggregatedRequests=s;b.setter=ha;b.renderThread=ia;b.setScrollable=ja;b.handleSelect=ka;b.component=t;b.make=la;b.jsComponent=ma}),null);