if (self.CavalryLogger) { CavalryLogger.start_js(["+xIYL"]); }

__d("UFIOrderingModeSelector.react",["cx","invariant","ix","Image.react","InlineBlock.react","Link.react","PopoverMenu.react","React","ReactXUIMenu","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("ReactXUIMenu").SelectableMenu,n=c("ReactXUIMenu").SelectableItem;k=babelHelpers.inherits(o,c("React").Component);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.onMenuItemClick=function(u,v){this.props.onOrderChanged(v.item.getValue())}.bind(this),q}o.prototype.render=function(){if(this.props.orderingModes.length===0)return null;var p=this.props.orderingModes.filter(function(r){return r.value==this.props.selectedMode}.bind(this)).map(function(r){return r.name}).pop();p||i(0);var q=c("React").createElement(m,{className:"_4tju",onItemClick:this.onMenuItemClick},this.props.orderingModes.map(function(r){return c("React").createElement(n,{key:r.value,value:r.value,label:r.name,selected:r.value===this.props.selectedMode},c("React").createElement("div",{className:"_3scm"},c("React").createElement("div",{className:"_3scn"},r.name),c("React").createElement("div",{className:"_3sco"},r.description)))}.bind(this)));return c("React").createElement("div",{className:"_3scp"},c("React").createElement(c("InlineBlock.react"),null,c("React").createElement(c("PopoverMenu.react"),{className:"_3scs",menu:q,alignh:this.props.alignh||"right"},c("React").createElement(c("Link.react"),null,p,c("React").createElement("div",{className:"_3sct"})))))};f.exports=o}),null);
__d("CommentsOrderingModeSelectorUsageTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:CommentsOrderingModeSelectorUsageLoggerConfig",this.$CommentsOrderingModeSelectorUsageTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:CommentsOrderingModeSelectorUsageLoggerConfig",this.$CommentsOrderingModeSelectorUsageTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$CommentsOrderingModeSelectorUsageTypedLogger1={};return this};h.prototype.updateData=function(j){this.$CommentsOrderingModeSelectorUsageTypedLogger1=babelHelpers["extends"]({},this.$CommentsOrderingModeSelectorUsageTypedLogger1,j);return this};h.prototype.setAvailableOrders=function(j){this.$CommentsOrderingModeSelectorUsageTypedLogger1.available_orders=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setEndOrder=function(j){this.$CommentsOrderingModeSelectorUsageTypedLogger1.end_order=j;return this};h.prototype.setPostFbid=function(j){this.$CommentsOrderingModeSelectorUsageTypedLogger1.post_fbid=j;return this};h.prototype.setPostOwnerFbid=function(j){this.$CommentsOrderingModeSelectorUsageTypedLogger1.post_owner_fbid=j;return this};h.prototype.setStartOrder=function(j){this.$CommentsOrderingModeSelectorUsageTypedLogger1.start_order=j;return this};h.prototype.setVC=function(j){this.$CommentsOrderingModeSelectorUsageTypedLogger1.vc=j;return this};var i={available_orders:true,end_order:true,post_fbid:true,post_owner_fbid:true,start_order:true,vc:true};f.exports=h}),null);
__d("UFIOrderingModeSelectorContainer.react",["CommentsOrderingModeSelectorUsageTypedLogger","Random","React","SubscriptionsHandler","UFIConfig","UFIInstanceAction","UFIOrderingModeSelector.react","UFIOrderingModeStore","UFISharedDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={selectedMode:c("UFIOrderingModeStore").getState().get(this.props.contextArgs.instanceid)},this.$UFIOrderingModeSelectorContainer1=null,this.onOrderChanged=function(q){var r=this.props.feedback;if(r.orderingmodes&&c("UFIConfig").logChangeOrderingModeUsageSampleRate>c("Random").random()){var s=r.orderingmodes.map(function(t){return t.value});new(c("CommentsOrderingModeSelectorUsageTypedLogger"))().setStartOrder(this.state.selectedMode).setEndOrder(q).setPostFbid(r.commentstargetfbid).setPostOwnerFbid(r.ownerid).setAvailableOrders(s).log()}c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").changeOrderingMode(this.props.contextArgs,q))}.bind(this),m}k.prototype.componentDidMount=function(){this.$UFIOrderingModeSelectorContainer1=new(c("SubscriptionsHandler"))();this.$UFIOrderingModeSelectorContainer1.addSubscriptions(c("UFIOrderingModeStore").addListener(function(){if(!this.$UFIOrderingModeSelectorContainer1)return;this.setState({selectedMode:c("UFIOrderingModeStore").getState().get(this.props.contextArgs.instanceid)})}.bind(this)))};k.prototype.componentWillUnmount=function(){if(this.$UFIOrderingModeSelectorContainer1){this.$UFIOrderingModeSelectorContainer1.release();this.$UFIOrderingModeSelectorContainer1=null}};k.prototype.shouldComponentUpdate=function(l,m){return this.state.selectedMode!==m.selectedMode};k.prototype.render=function(){return c("React").createElement(c("UFIOrderingModeSelector.react"),{alignh:this.props.alignh||"right",onOrderChanged:this.onOrderChanged,orderingModes:this.props.feedback.orderingmodes,selectedMode:this.state.selectedMode})};k.propTypes={feedback:j.shape({defaultcommentorderingmode:j.string.isRequired,orderingmodes:j.arrayOf(j.shape({name:j.string.isRequired,description:j.string.isRequired,selected:j.bool.isRequired,value:j.string.isRequired})).isRequired,commentstargetfbid:j.string.isRequired,ownerid:j.string.isRequired}).isRequired,contextArgs:j.object.isRequired,alignh:j.string};f.exports=k}),null);
__d("PageLikeButtonLazy",["Arbiter","Bootloader","Event","PageLikeConstants","SubscriptionsHandler","ifRequired","setImmediate"],(function a(b,c,d,e,f,g){__p&&__p();var h=new(c("SubscriptionsHandler"))(),i=[],j=false,k=false,l=c("PageLikeConstants").LIKED,m=c("PageLikeConstants").UNLIKED,n=c("PageLikeConstants").SPM_CALLOUT,o=c("PageLikeConstants").LAZY_CLICK,p={init:function q(r,s,t,u,v,w,x,y,z,A,B,C){p._initWithArgs(r,s,t,u,v,w,x,y,z,A,B,C)},_initWithArgs:function q(){for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];c("ifRequired")("PageLikeButton",function(u){return u.init.apply(u,s)},function(){s[11]=babelHelpers["extends"]({},s[11],{isLazy:true});this._startListening(s[1]);i.push(s)}.bind(this))},_startListening:function q(r){__p&&__p();if(!j){j=true;h.addSubscriptions(c("Arbiter").subscribe([l,m,n],function(event,s){c("Arbiter").inform(event+".lazy",s,c("Arbiter").BEHAVIOR_PERSISTENT);this._bootload()}.bind(this)))}h.addSubscriptions(c("Event").listen(r,"click",function(event){c("Arbiter").inform(o,{event:event,node:r},c("Arbiter").BEHAVIOR_PERSISTENT);c("setImmediate")(function(){return this._bootload()}.bind(this))}.bind(this)))},_bootload:function q(){if(k)return;k=true;c("Bootloader").loadModules(["PageLikeButton"],function(r){h.release();i.forEach(function(s){return r.init.apply(r,s)})},"PageLikeButtonLazy")}};f.exports=p}),null);
__d("HoverButton",["csx","cx","AsyncRequest","CSS","DOM","URI"],(function a(b,c,d,e,f,g,h,i){__p&&__p();function j(k,l,m,n){"use strict";this._button=k;this._flyout=l;this._flyoutAjaxify=n;this._flyoutContent=m;l.subscribe("show",this._onShow.bind(this));l.subscribe("hide",this._onHide.bind(this))}j.prototype.showFlyoutBriefly=function(){"use strict";this.showFlyout();this._flyout.hideFlyoutDelayed(5e3)};j.prototype.showFlyout=function(){"use strict";this._flyout.showFlyout(this._button,true);this._flyout.inform("show",this._button)};j.prototype.hideFlyout=function(){"use strict";this._flyout.hideFlyout(true);this._flyout.inform("hide",this._button)};j.prototype.enableButton=function(){"use strict";this._flyout.initNode(this._button)};j.prototype.disableButton=function(){"use strict";this.hideFlyout();this._flyout.deactivateNode(this._button)};j.prototype._onShow=function(k,l){"use strict";__p&&__p();c("CSS").addClass(l,"_52nd");if(c("CSS").hasClass(l,"uiButton")||c("CSS").matchesSelector(l,"._42fu"))c("CSS").addClass(l,"selected");if(this._flyoutAjaxify){c("CSS").addClass(this._flyoutContent,"async_saving");new(c("AsyncRequest"))().setURI(new(c("URI"))(this._flyoutAjaxify)).setHandler(function(m){c("CSS").removeClass(this._flyoutContent,"async_saving");c("DOM").setContent(this._flyoutContent,m.payload)}.bind(this)).send();this._flyoutAjaxify=null}};j.prototype._onHide=function(k,l){"use strict";c("CSS").removeClass(l,"_52nd");if(c("CSS").hasClass(l,"uiButton")||c("CSS").matchesSelector(l,"._42fu"))c("CSS").removeClass(l,"selected")};j.prototype.destroy=function(){"use strict";this.hideFlyout();this._flyout.destroy()};j.prototype.suppressNextMouseEnter=function(){"use strict";this._flyout.setActiveNode(this._button)};Object.assign(j.prototype,{_button:null,_flyout:null,_flyoutAjaxify:null,_flyoutContent:null});f.exports=j}),null);
__d("SwapButton",["DOM","Event","Focus"],(function a(b,c,d,e,f,g){__p&&__p();function h(j,k,l){c("DOM").insertAfter(k,j);c("DOM").remove(k);l&&c("Focus").setWithoutOutline(j)}function i(j,k,l){"use strict";this._swapperButton=j;this._swappeeButton=k;c("Event").listen(j,"click",h.bind(null,k,j,true));if(l)c("Event").listen(k,"click",h.bind(null,j,k,true))}i.prototype.swap=function(j){"use strict";if(this._swapperButton.parentNode)h(this._swappeeButton,this._swapperButton,j)};i.prototype.unswap=function(j){"use strict";if(!this._swapperButton.parentNode)h(this._swapperButton,this._swappeeButton,j)};i.prototype.toggle=function(j){"use strict";if(this._swapperButton.parentNode)this.swap(j);else this.unswap(j)};i.prototype.getCurrentButton=function(){"use strict";return this._swapperButton.parentNode?this._swapperButton:this._swappeeButton};Object.assign(i.prototype,{_swapperButton:null,_swappeeButton:null});f.exports=i}),null);
__d("HoverFlyout",["Arbiter","ArbiterMixin","DataStore","Event","Keys","mixin","removeFromArray","shield"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k,l,m,n){"use strict";__p&&__p();i.constructor.call(this);if(k){this._showDelay=m;this._hideDelay=n;this.init(k);if(l)this.initNode(l)}c("Arbiter").subscribe("SwapButtonDEPRECATED/focusOnJoinButton",c("shield")(this.hideFlyout,this),c("Arbiter").SUBSCRIBE_ALL)}j.prototype.init=function(k){"use strict";__p&&__p();this._flyout=k;this._showDelay=this._showDelay||0;this._hideDelay=this._hideDelay||100;this._showTimeout=null;this._hideTimeout=null;this._flyoutSubscriptions=[this._flyout.subscribe("mouseenter",this._onFlyoutMouseEnter.bind(this)),this._flyout.subscribe("mouseleave",c("shield")(this.hideFlyout,this))];this._nodes=[];this._dataStoreUnique="HoverFlyout_"+Date.now()+"_listeners";return this};j.prototype.initNode=function(k){"use strict";if(this._nodes.includes(k))return this;this._nodes.push(k);c("DataStore").set(k,this._dataStoreUnique,[c("Event").listen(k,"mouseenter",this._onNodeMouseEnter.bind(this,k)),c("Event").listen(k,"mouseleave",c("shield")(this.hideFlyout,this)),c("Event").listen(k,"click",this._onNodeMouseEnter.bind(this,k)),c("Event").listen(k,"keydown",this._onNodeKeyEscape.bind(this))]);return this};j.prototype.deactivateNode=function(k){"use strict";var l=c("DataStore").get(k,this._dataStoreUnique);if(l)while(l.length)l.pop().remove();c("removeFromArray")(this._nodes,k)};j.prototype.setShowDelay=function(k){"use strict";this._showDelay=k;return this};j.prototype.setHideDelay=function(k){"use strict";this._hideDelay=k;return this};j.prototype.showFlyout=function(k,l){"use strict";this.setActiveNode(k);if(l){this._flyout.setContext(k).show();this.inform("show",k)}else this._showTimeout=setTimeout(this.showFlyout.bind(this,k,true),this._showDelay);return this};j.prototype.hideFlyout=function(k){"use strict";clearTimeout(this._showTimeout);if(k){this._flyout.hide();this._activeNode&&this.inform("hide",this._activeNode);this._activeNode=null}else this._hideTimeout=setTimeout(this.hideFlyout.bind(this,true),this._hideDelay)};j.prototype.hideFlyoutDelayed=function(k){"use strict";clearTimeout(this._showTimeout);clearTimeout(this._hideTimeout);this._hideTimeout=setTimeout(this.hideFlyout.bind(this,true),k)};j.prototype.getActiveNode=function(){"use strict";return this._activeNode};j.prototype.setActiveNode=function(k){"use strict";clearTimeout(this._hideTimeout);if(this._activeNode&&this._activeNode!==k)this.hideFlyout(true);this._activeNode=k;return this};j.prototype.clearNodes=function(){"use strict";for(var k=this._nodes.length;k>0;k--)this.deactivateNode(this._nodes[k-1])};j.prototype.destroy=function(){"use strict";while(this._flyoutSubscriptions.length)this._flyout.unsubscribe(this._flyoutSubscriptions.pop());this.clearNodes()};j.prototype._onNodeMouseEnter=function(k){"use strict";if(this._activeNode===k)clearTimeout(this._hideTimeout);else this.showFlyout(k)};j.prototype._onFlyoutMouseEnter=function(){"use strict";clearTimeout(this._hideTimeout)};j.prototype._onNodeKeyEscape=function(event){"use strict";if(c("Event").getKeyCode(event)===c("Keys").ESC){this._activeNode&&this.inform("hide",this._activeNode);this._activeNode=null}};f.exports=b.HoverFlyout||j}),null);