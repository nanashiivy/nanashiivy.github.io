if (self.CavalryLogger) { CavalryLogger.start_js(["EEMNI"]); }

__d("EntityPresenceManager",["Arbiter","ChannelConstants","EntityPresenceConfig","RTISubscriptionManager","UserActivity"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="entity_presence",i={users:0,activePing:null,start:function k(){__p&&__p();this.users++;if(c("EntityPresenceConfig").activePingEnabled){c("RTISubscriptionManager").activePing();if(this.activePing===null)this.activePing=setInterval(function(){if(c("UserActivity").isOnTab()){c("RTISubscriptionManager").activePing();c("Arbiter").inform(c("ChannelConstants").ENTITY_PRESENCE_ACTIVE_PING)}},c("EntityPresenceConfig").activePingFrequency)}},stop:function k(){this.users--;if(this.users==0&&this.activePing!==null){clearInterval(this.activePing);this.activePing=null}}},j={enter:function k(l,m){var n=h+"/"+l+"/"+m,o=c("RTISubscriptionManager").subscribe(n,function(){});i.start();return{called:false,leave:function p(){if(this.called)return;i.stop();o.fastUnsubscribe();this.called=true}}}};f.exports=j}),null);
__d("EntityPresenceTypeEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({GMS_SRT:"gms_srt",LIVE_VIDEO:"live_video",LIVING_ROOM:"living_room"})}),null);
__d("FacecastStreamingCommentHealthTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:FacecastStreamingCommentHealthLoggerConfig",this.$FacecastStreamingCommentHealthTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:FacecastStreamingCommentHealthLoggerConfig",this.$FacecastStreamingCommentHealthTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$FacecastStreamingCommentHealthTypedLogger1={};return this};h.prototype.updateData=function(j){this.$FacecastStreamingCommentHealthTypedLogger1=babelHelpers["extends"]({},this.$FacecastStreamingCommentHealthTypedLogger1,j);return this};h.prototype.setAppID=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.appid=j;return this};h.prototype.setAppversion=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.appversion=j;return this};h.prototype.setClientUserID=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.client_userid=j;return this};h.prototype.setCommentID=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.comment_id=j;return this};h.prototype.setGqlsContext=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.gqls_context=j;return this};h.prototype.setProtocol=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.protocol=j;return this};h.prototype.setSessionID=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.session_id=j;return this};h.prototype.setVC=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.vc=j;return this};var i={appid:true,appversion:true,client_userid:true,comment_id:true,gqls_context:true,protocol:true,session_id:true,vc:true};f.exports=h}),null);
__d("LiveVideoCurrentlyWatchingViewersQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1756845024340619"};j.getQueryID=function(){"use strict";return"276588582806153"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("UFILiveVideoAnnouncementQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1481223005303189"};j.getQueryID=function(){"use strict";return"1472251976201226"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("LiveVideoCommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1801134146583279",queryID:"1953941831486464"})}),null);
__d("UFILiveVideoCommentSubscription",["BaseGraphQLSubscription","LiveVideoCommentCreateWebGraphQLSubscription","uuid"],(function a(b,c,d,e,f,g){var h=babelHelpers["extends"]({},c("BaseGraphQLSubscription"),{_getTopic:function i(j){return"gqls/live_video_comment_create_subscribe/feedback_id_"+j},_getQueryID:function i(){return c("LiveVideoCommentCreateWebGraphQLSubscription").getDocID()},_getQueryParameters:function i(j){return{input:JSON.stringify({client_subscription_id:c("uuid")(),feedback_id:j})}},_getSubscriptionCallName:function i(){return"live_video_comment_create_subscribe"}});f.exports=h}),null);
__d("LivingRoomCommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1474457399328916",queryID:"1978782722411442"})}),null);
__d("UFILivingRoomCommentSubscription",["BaseGraphQLSubscription","LivingRoomCommentCreateWebGraphQLSubscription","uuid"],(function a(b,c,d,e,f,g){var h=babelHelpers["extends"]({},c("BaseGraphQLSubscription"),{_getTopic:function i(j){return"gqls/living_room_comment_create_subscribe/feedback_id_"+j},_getQueryID:function i(){return c("LivingRoomCommentCreateWebGraphQLSubscription").getDocID()},_getQueryParameters:function i(j){return{input:JSON.stringify({client_subscription_id:c("uuid")(),feedback_id:j})}},_getSubscriptionCallName:function i(){return"living_room_comment_create_subscribe"}});f.exports=h}),null);
__d("VideoAnnouncementSurface",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({POST:"post",STORIES:"stories",ALL:"all"})}),null);
__d("XLiveStreamingCommentsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/videos/livecomments/",{eft_id:{type:"String",required:true}})}),null);
__d("XLiveStreamingRankingExperimentAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/videos/livecomments/exp/",{eft_id:{type:"String",required:true}})}),null);
__d("UFILiveStreamingComments",["fbt","Arbiter","AsyncRequest","BanzaiODS","CurrentUser","EntityPresenceManager","EntityPresenceTypeEnum","FacecastStreamingCommentDelayTypedLogger","FacecastStreamingCommentHealthTypedLogger","FeedbackSourceType","LiveVideoCurrentlyWatchingVideoPresenceConfig","LiveVideoCurrentlyWatchingViewersQueryWebGraphQLQuery","Map","Set","StreamingReactionsTrayEvents","TimeSlice","UFICentralUpdates","UFIConfig","UFIConstants","UFIFeedbackTargets","UFILiveStreamingCommentsConfig","UFILiveVideoAnnouncementQueryWebGraphQLQuery","UFILiveVideoCommentSubscription","UFILivingRoomCommentSubscription","UFIStreamingStateType","UFISubscriptionUpdates","UFIToplevelStreamedCommentList","VideoAnnouncementSurface","VideoBroadcastStatus","XLiveStreamingCommentsAsyncController","XLiveStreamingRankingExperimentAsyncController","clearInterval","setInterval","uuid"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=new(c("Map"))(),j=1e4,k=1e4,l=1e4,m=7e3,n=2e3;c("BanzaiODS").setEntitySample("feedback",1e-4);function o(p,q,r,s,t,u,v,w,x){__p&&__p();var y,z=this;this.eftID=p;this.totalCommentCount=q;this.tailCommentFBID=r;this.queue=[];this.ufiPayloadBuffer=[];this.fireworksAnimating=false;this.liveVideoAnnouncements=[];this.liveVideoCachedCurrentViewers=new(c("Set"))();this.liveVideoCurrentViewerFetchCounter=0;this.localCommentBodies=new(c("Set"))();this.mayShortCircuitRendering=false;this.mayLogExposure=true;this.isViewerTheOwner=u;this.isLiveAudio=v;this.hasDisplayedFirstViewerJoinEvent=false;this.contextArgs=x;this.interval=c("setInterval")(function(){return this.renderNextPayload()}.bind(this),c("UFILiveStreamingCommentsConfig").liveCommentRenderDelayMS);c("UFIFeedbackTargets").getFeedbackTarget(this.eftID,function(A){this.$UFILiveStreamingComments1(A,x)}.bind(this));if(this.contextArgs.shouldLogFacecastStreamingCommentDelay)(function(){var A=c("uuid")();z.healthLoggerInterval=c("setInterval")(function(){var B=new(c("FacecastStreamingCommentHealthTypedLogger"))().setCommentID(this.tailCommentFBID).setSessionID(A);if(this.subscription)B.setGqlsContext(this.subscription.getContext().transformContext);B.log()}.bind(z),k)})();if(s){this.$UFILiveStreamingComments2(true,w);this.liveVideoAnnouncementFetchInterval=c("setInterval")(function(){this.$UFILiveStreamingComments2(false)}.bind(this),l)}if(t){this.liveVideoCurrentViewerFetchInterval=c("setInterval")(function(){var A=c("LiveVideoCurrentlyWatchingViewersQueryWebGraphQLQuery").getURI({video_id:this.eftID});new(c("AsyncRequest"))().setURI(A).setHandler(function(B){this.$UFILiveStreamingComments3(B.payload)}.bind(this)).send();this.liveVideoCurrentViewerFetchCounter+=1}.bind(this),n);if(!v&&c("LiveVideoCurrentlyWatchingVideoPresenceConfig").videoPresenceGK)this.presenceToken=c("EntityPresenceManager").enter(c("EntityPresenceTypeEnum").LIVE_VIDEO,this.eftID)}c("UFICentralUpdates").subscribe("update-comments",function(A,B){if(B.comments&&B.comments.length)B.comments.forEach(function(C){if(C.parentcommentid)return;if(C.__typename==="local")this.trackLocalComment(C)}.bind(this))}.bind(this));c("Arbiter").subscribe(c("StreamingReactionsTrayEvents").FireworksAnimating,function(A,B){__p&&__p();this.fireworksAnimating=B;if(this.fireworksAnimating){clearTimeout(this.timeoutID);this.timeoutID=setTimeout(c("TimeSlice").guard(function(){if(this.fireworksAnimating){this.fireworksAnimating=false;c("BanzaiODS").bumpEntityKey("streaming_comments","comment_fetching_unpause_failure")}}.bind(this),"UFILiveStreaming fireWorksAnimatingTimeout",{isContinuation:false}),j)}else this.backFillComments()}.bind(this))}o.prototype.$UFILiveStreamingComments1=function(p,q){__p&&__p();var r=Date.now();if(q.icebreakerAccessTokenForCommentSubscription){this.subscription=c("UFILiveVideoCommentSubscription").subscribeWithIcebreaker_EXPERIMENTAL(p.targetfbid,function(s){return this.$UFILiveStreamingComments4(s,r)}.bind(this),q.icebreakerAccessTokenForCommentSubscription);return}if(q.isLivingRoom){this.subscription=c("UFILivingRoomCommentSubscription").subscribe(p.targetfbid,function(s){return this.$UFILiveStreamingComments5(s,r)}.bind(this));return}this.subscription=c("UFILiveVideoCommentSubscription").subscribe(p.targetfbid,function(s){return this.$UFILiveStreamingComments4(s,r)}.bind(this))};o.prototype.$UFILiveStreamingComments4=function(p,q){c("UFISubscriptionUpdates").handleLiveStreamingComment(this.eftID,p.live_video_comment_create_subscribe,Date.now()-q,this.contextArgs.shouldLogFacecastStreamingCommentDelay||false)};o.prototype.$UFILiveStreamingComments5=function(p,q){c("UFISubscriptionUpdates").handleLiveStreamingComment(this.eftID,p.living_room_comment_create_subscribe,Date.now()-q,this.contextArgs.shouldLogFacecastStreamingCommentDelay||false)};o.prototype.enqueueSubscribedComment=function(p,q){if(this.contextArgs.isLivingRoom)this.$UFILiveStreamingComments6(p);else this.$UFILiveStreamingComments7(p);this.$UFILiveStreamingComments8(q)};o.prototype.enqueueSubscribedTipJarEvent=function(p,q){this.$UFILiveStreamingComments7({comments:[this.$UFILiveStreamingComments9(p,q)],streamingstate:c("UFIStreamingStateType").LIVE,priority:0})};o.prototype.$UFILiveStreamingComments2=function(p,q){if(this.liveVideoAnnouncements.length)return;var r=this.contextArgs.source===c("FeedbackSourceType").LIVE_VIDEO_STORIES?c("VideoAnnouncementSurface").STORIES:c("VideoAnnouncementSurface").POST,s=c("UFILiveVideoAnnouncementQueryWebGraphQLQuery").getURI({video_id:this.eftID,surface:r});new(c("AsyncRequest"))().setURI(s).setHandler(function(t){this.$UFILiveStreamingComments10(t.payload,q)}.bind(this)).send()};o.prototype.$UFILiveStreamingComments10=function(p,q){__p&&__p();var r,s=p.data.video;if(!s){c("clearInterval")(this.liveVideoAnnouncementFetchInterval);c("clearInterval")(this.liveVideoAnnouncementRenderInterval);return}var t=s.announcements.edges;if(!t.length)return;(r=this.liveVideoAnnouncements).push.apply(r,t);if(!this.liveVideoAnnouncementRenderInterval){this.$UFILiveStreamingComments11();this.liveVideoAnnouncementRenderInterval=c("setInterval")(function(){this.$UFILiveStreamingComments11()}.bind(this),q||m)}};o.prototype.$UFILiveStreamingComments11=function(){if(this.liveVideoAnnouncements.length){var p=this.liveVideoAnnouncements.pop();this.$UFILiveStreamingComments7({comments:[this.$UFILiveStreamingComments12(p)],streamingstate:c("UFIStreamingStateType").LIVE,priority:0})}};o.prototype.$UFILiveStreamingComments3=function(p){__p&&__p();var q=p.data.video;if(!q||q.broadcast_status!==c("VideoBroadcastStatus").LIVE){c("clearInterval")(this.liveVideoCurrentViewerFetchInterval);return}var r=q.live_video_current_viewers.edges;if(!r.length)return;var s=void 0,t=void 0,u=[];for(var v=r,w=Array.isArray(v),x=0,v=w?v:v[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var y;if(w){if(x>=v.length)break;y=v[x++]}else{x=v.next();if(x.done)break;y=x.value}var z=y,A=z.node.id;if(!this.liveVideoCachedCurrentViewers.has(A)){if(!s){s=z.node.id;t=(z.node.profile_picture||{}).uri}u.push(z.node.name)}}for(var B=r,C=Array.isArray(B),D=0,B=C?B:B[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var E;if(C){if(D>=B.length)break;E=B[D++]}else{D=B.next();if(D.done)break;E=D.value}var F=E,G=F.node.id;this.liveVideoCachedCurrentViewers.add(G)}if(!s)return;var H=this.$UFILiveStreamingComments13(s,t,u);this.$UFILiveStreamingComments7({comments:[H],streamingstate:c("UFIStreamingStateType").LIVE,priority:0})};o.prototype.$UFILiveStreamingComments13=function(p,q,r){var s=false;if(!this.isViewerTheOwner&&!this.hasDisplayedFirstViewerJoinEvent){this.hasDisplayedFirstViewerJoinEvent=true;s=true}return{accentColor:null,ctaAction:"none",ctaGlyphName:null,ctaState:false,ctaTextOff:"",ctaTextOn:"",ftentidentifier:this.eftID,glyphName:null,id:this.eftID+p+"_"+this.liveVideoCurrentViewerFetchCounter,image:q,isAnnouncement:true,isJoinEvent:true,joinEventData:{isFirstViewerJoinEvent:s,isLiveAudio:this.isLiveAudio,newlyJoinedViewerNames:r},targetID:null}};o.prototype.$UFILiveStreamingComments9=function(p,q){var r=q.tip_jar_tip_event_subscribe.tip_jar_transaction;return{author:r.tip_giver.id,body:{text:h._("sent {The amount of the gift money}!",[h.param("The amount of the gift money",r.currency_quantity_tipped.formatted)])},cancomment:false,ftentidentifier:p.targetfbid,id:p.targetfbid+"_"+r.id,fbid:r.id,tipOptionIndex:r.tip_option_index.toString(),__typename:"saved"}};o.prototype.$UFILiveStreamingComments12=function(p){var q=p.node;return{accentColor:q.accent_color,body:{text:q.message},broadcastSubscriptionStatus:q.broadcast_subscription_status,ctaAction:q.cta_action,ctaGlyphName:q.cta_glyph,ctaState:q.cta_state,ctaTextOff:q.cta_text_off,ctaTextOn:q.cta_text_on,ftentidentifier:this.eftID,glyphName:q.glyph_name,id:this.eftID+q.name+q.level,image:q.image,isAnnouncement:true,isJoinEvent:false,targetID:q.target&&q.target.id}};o.prototype.$UFILiveStreamingComments7=function(p){__p&&__p();if(this.resemblesLocalComment(p.comments[0]))return;this.tailCommentFBID=p.comments[0].fbid;this.queue.push(p);this.queue=o.pruneQueue(this.queue);if(this.queue.length===1&&this.mayShortCircuitRendering){c("BanzaiODS").bumpEntityKey("streaming_comments","short_circuit_render");c("clearInterval")(this.interval);this.renderNextPayload();this.interval=c("setInterval")(function(){return this.renderNextPayload()}.bind(this),c("UFILiveStreamingCommentsConfig").liveCommentRenderDelayMS)}};o.prototype.$UFILiveStreamingComments6=function(p){if(this.resemblesLocalComment(p.comments[0]))return;this.tailCommentFBID=p.comments[0].fbid;this.renderPayload(p)};o.prototype.$UFILiveStreamingComments8=function(p){var q=p-this.queue.length;if(q>this.totalCommentCount){this.totalCommentCount=q;c("UFIToplevelStreamedCommentList").getCommentList(this.eftID).updateCommentCount(this.totalCommentCount)}};o.prototype.$UFILiveStreamingComments14=function(){var p=c("UFIToplevelStreamedCommentList").getCommentList(this.eftID);while(this.queue.length){var q=this.queue.shift();if(!p.hasComment(q.comments[0]))return q}return null};o.prototype.renderPayload=function(p){__p&&__p();if(!p){this.mayShortCircuitRendering=true;return}if(this.fireworksAnimating)this.ufiPayloadBuffer.push(p);else{c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.STREAMING,p);if(this.contextArgs.shouldLogFacecastStreamingCommentDelay)new(c("FacecastStreamingCommentDelayTypedLogger"))().setCommentID(p.comments[0].fbid).setEvent("render").log();c("BanzaiODS").bumpEntityKey("feedback","facecast_live_comment_rendered")}this.mayShortCircuitRendering=false;if(c("CurrentUser").isLoggedIn()&&this.mayLogExposure){new(c("AsyncRequest"))().setURI(c("XLiveStreamingRankingExperimentAsyncController").getURIBuilder().setString("eft_id",this.eftID).getURI()).send();this.mayLogExposure=false}};o.prototype.renderNextPayload=function(){this.renderPayload(this.$UFILiveStreamingComments14())};o.prototype.backFillComments=function(){__p&&__p();for(var p=this.ufiPayloadBuffer,q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var s;if(q){if(r>=p.length)break;s=p[r++]}else{r=p.next();if(r.done)break;s=r.value}var t=s;c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.STREAMING,t)}this.ufiPayloadBuffer=[]};o.prototype.getNextURI=function(){return c("XLiveStreamingCommentsAsyncController").getURIBuilder().setString("eft_id",this.eftID).getURI()};o.prototype.trackLocalComment=function(p){var q=o.hashCommentData(p);this.localCommentBodies.add(q)};o.prototype.resemblesLocalComment=function(p){if(p.isAnnouncement)return false;var q=o.hashCommentData(p);return this.localCommentBodies.has(q)};o.prototype.stopStream=function(){c("clearInterval")(this.interval);c("clearInterval")(this.healthLoggerInterval);c("clearInterval")(this.liveVideoAnnouncementFetchInterval);c("clearInterval")(this.liveVideoAnnouncementRenderInterval);if(this.subscription)this.subscription.unsubscribe();if(this.presenceToken)this.presenceToken.leave()};o.hashCommentData=function(p){var q=p.author;if(p.body)q+=":"+p.body.text;if(p.attachment)q+=":"+p.attachment.fbid;return q};o.pruneQueue=function(p){__p&&__p();var q=p.length-c("UFIConfig").facecastWWWCommentQueueThreshold;if(q<=0)return p;var r=p.map(function(s,t){return{index:t,priority:s.priority}}).sort(function(s,t){var u=s.priority-t.priority;return u!==0?u:s.index-t.index}).map(function(s){return s.index}).slice(0,q);return p.filter(function(s,t){return r.indexOf(t)===-1})};o.start=function(p,q,r,s,t,u,v,w,x){var y=i.get(p),z=!y||!y.liveVideoAnnouncementFetchInterval&&s||!y.liveVideoCurrentViewerFetchInterval&&t;if(!z)return;if(y)y.stopStream();i.set(p,new o(p,q,r,s,t,u,v,w,x))};o.enqueueSubscribedComment=function(p,q,r){var s=i.get(p);if(!s)return;s.enqueueSubscribedComment(q,r)};o.enqueueSubscribedTipJarEvent=function(p,q){var r=i.get(p.targetfbid);if(!r)return;r.enqueueSubscribedTipJarEvent(p,q)};o.stop=function(p){var q=i.get(p);if(!q)return;q.stopStream()};f.exports=o}),null);
__d("FormSubmit",["AsyncRequest","AsyncResponse","CSS","DOMQuery","Event","Form","Parent","trackReferrer"],(function a(b,c,d,e,f,g){__p&&__p();var h={buildRequest:function i(j,k){__p&&__p();var l=(c("Form").getAttribute(j,"method")||"GET").toUpperCase(),m=k&&c("Parent").byTag(k,"button")||k,n=m&&c("Parent").byClass(m,"stat_elem")||j;if(c("CSS").hasClass(n,"async_saving"))return null;if(m&&(m.form!==j||m.nodeName!="INPUT"&&m.nodeName!="BUTTON"||m.type!="submit")){var o=c("DOMQuery").scry(j,".enter_submit_target")[0];o&&(m=o)}var p=c("Form").serialize(j,m);c("Form").setDisabled(j,true);var q=c("Form").getAttribute(j,"ajaxify")||c("Form").getAttribute(j,"action"),r=!!c("Form").getAttribute(j,"data-cors");c("trackReferrer")(j,q);return new(c("AsyncRequest"))().setAllowCrossOrigin(r).setURI(q).setData(p).setNectarModuleDataSafe(j).setReadOnly(l=="GET").setMethod(l).setRelativeTo(j).setStatusElement(n).setInitialHandler(c("Form").setDisabled.bind(null,j,false)).setHandler(function(s){c("Event").fire(j,"success",{response:s})}).setErrorHandler(function(s){if(c("Event").fire(j,"error",{response:s})!==false)c("AsyncResponse").defaultErrorHandler(s)}).setFinallyHandler(c("Form").setDisabled.bind(null,j,false))},send:function i(j,k){var l=h.buildRequest(j,k);if(l)l.send();return l}};f.exports=h}),null);
__d("AsyncFormRequestUtils",["Arbiter"],(function a(b,c,d,e,f,g){var h={subscribe:function i(j,k,l){c("Arbiter").subscribe("AsyncRequest/"+k,function(m,n){var o=n.request.relativeTo;if(o&&o===j)l(n)})}};f.exports=h}),null);
__d("VideoBroadcastSubscriptionAction",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SUBSCRIBE:"subscribe",SUBSCRIBE_SUGGESTED:"subscribe_suggested",UNSUBSCRIBE:"unsubscribe"})}),null);
__d("VideoRightButtonBase",["cx","csx","AsyncFormRequestUtils","CSS","DOM","Event","FormSubmit","LayerRefocusOnHide","Run","SubscriptionsHandler","throttle"],(function a(b,c,d,e,f,g,h,i){__p&&__p();function j(k,l,m,n,o,p,q,r){"use strict";__p&&__p();this.$VideoRightButtonBase1=[];this.$VideoRightButtonBase2=l;this.$VideoRightButtonBase3=p;this.$VideoRightButtonBase4=o;this.$VideoRightButtonBase5=k;this.$VideoRightButtonBase6=q.hiddenAfterFinish;this.$VideoRightButtonBase7=q.hiddenWhilePaused;this.$VideoRightButtonBase8=q.allowHide;this.$VideoRightButtonBase9=new(c("SubscriptionsHandler"))();this.$VideoRightButtonBase10=false;this.$VideoRightButtonBase11=false;this.$VideoRightButtonBase12=false;this.$VideoRightButtonBase13=r;this.$VideoRightButtonBase14=false;if(this.$VideoRightButtonBase13){this.$VideoRightButtonBase13.disableBehavior(c("LayerRefocusOnHide"));var s=c("DOM").scry(this.$VideoRightButtonBase13.getContentRoot(),"._36gl")[0];if(s)c("Event").listen(s,"click",function(){this.$VideoRightButtonBase14=false;this.$VideoRightButtonBase13=null;this.nuxViewClicked()}.bind(this));this.$VideoRightButtonBase13.subscribe("hide",function(){if(this.$VideoRightButtonBase14)this.nuxViewHidden();this.$VideoRightButtonBase14=false;this.$VideoRightButtonBase13=null}.bind(this))}}j.prototype.setupAllHandlers=function(){"use strict";__p&&__p();this.$VideoRightButtonBase9=new(c("SubscriptionsHandler"))();var k=this.$VideoRightButtonBase5.getRootNode();c("Run").onLeave(function(){this.$VideoRightButtonBase9.release()}.bind(this));this.$VideoRightButtonBase9.addSubscriptions(c("Event").listen(k,"mousemove",c("throttle")(function(){return this.$VideoRightButtonBase15()}.bind(this),200)),c("Event").listen(k,"mouseenter",function(){if(this.$VideoRightButtonBase6&&this.$VideoRightButtonBase11||this.$VideoRightButtonBase7&&this.$VideoRightButtonBase12)return;this.$VideoRightButtonBase16=true;this.$VideoRightButtonBase15();if(this.$VideoRightButtonBase13){this.$VideoRightButtonBase13.show();this.$VideoRightButtonBase14=true}}.bind(this)),c("Event").listen(k,"mouseleave",function(){this.$VideoRightButtonBase17();this.$VideoRightButtonBase16=false}.bind(this)),this.$VideoRightButtonBase5.addListener("beginPlayback",function(){this.$VideoRightButtonBase11=false;this.$VideoRightButtonBase12=false}.bind(this)),this.$VideoRightButtonBase5.addListener("finishPlayback",function(){this.$VideoRightButtonBase17();this.$VideoRightButtonBase11=true}.bind(this)),this.$VideoRightButtonBase5.addListener("pausePlayback",function(){this.$VideoRightButtonBase17();this.$VideoRightButtonBase12=true}.bind(this)));c("Event").listen(this.$VideoRightButtonBase2,"click",function(){__p&&__p();if(this.$VideoRightButtonBase18)clearTimeout(this.$VideoRightButtonBase18);if(this.$VideoRightButtonBase1.length===0){this.$VideoRightButtonBase3.setAttribute("value",this.nextActionOnToggle(this.$VideoRightButtonBase10));c("FormSubmit").send(this.$VideoRightButtonBase4)}if(this.$VideoRightButtonBase10){this.toggleSwitchOffAnimation(this.$VideoRightButtonBase2);this.$VideoRightButtonBase1.push(false);this.$VideoRightButtonBase10=false}else{this.toggleSwitchOnAnimation(this.$VideoRightButtonBase2);this.$VideoRightButtonBase1.push(true);this.$VideoRightButtonBase10=true}}.bind(this));var l=function(m){var n=this.$VideoRightButtonBase3.getAttribute("value")===this.nextActionOnToggle(true);if(this.$VideoRightButtonBase1.length>1){var o=this.$VideoRightButtonBase1[this.$VideoRightButtonBase1.length-1],p=o;if(n&&!p||!n&&p){this.$VideoRightButtonBase3.setAttribute("value",this.nextActionOnToggle(p));c("FormSubmit").send(this.$VideoRightButtonBase4)}}this.$VideoRightButtonBase1=[]}.bind(this);c("AsyncFormRequestUtils").subscribe(this.$VideoRightButtonBase4,"response",l)};j.prototype.$VideoRightButtonBase17=function(){"use strict";if(!this.$VideoRightButtonBase14&&this.$VideoRightButtonBase8)c("CSS").addClass(this.$VideoRightButtonBase2,"_55c1")};j.prototype.$VideoRightButtonBase15=function(){"use strict";if(this.$VideoRightButtonBase16){c("CSS").removeClass(this.$VideoRightButtonBase2,"_55c1");clearTimeout(this.$VideoRightButtonBase19);this.$VideoRightButtonBase19=setTimeout(function(){return this.$VideoRightButtonBase17()}.bind(this),3e3)}};j.prototype.toggleSwitchOnAnimation=function(){"use strict";throw new Error("This should be overwritten by children")};j.prototype.toggleSwitchOffAnimation=function(){"use strict";throw new Error("This should be overwritten by children")};j.prototype.nextActionOnToggle=function(k){"use strict";throw new Error("This should be overwritten by children")};j.prototype.nuxViewClicked=function(){"use strict";throw new Error("This should be overwritten by children")};j.prototype.nuxViewHidden=function(){"use strict";throw new Error("This should be overwritten by children")};f.exports=j}),null);
__d("XLiveSubscribeAsyncNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/live/subscribe/nux/",{action:{type:"String"},video_id:{type:"String"}})}),null);
__d("VideoLiveFollowButton",["cx","fbt","AsyncRequest","VideoRightButtonBase","CSS","VideoBroadcastSubscriptionAction","DOM","XLiveSubscribeAsyncNuxController"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("VideoRightButtonBase"));k=j&&j.prototype;function l(m,n,o,p,q,r,s,t,u,v){"use strict";__p&&__p();k.constructor.call(this,m,n,o,q,r,s,t,v);this.$VideoLiveFollowButton1=o;this.$VideoLiveFollowButton2=q;this.$VideoLiveFollowButton3=p;this.$VideoLiveFollowButton4=s.getAttribute("value")===c("VideoBroadcastSubscriptionAction").UNSUBSCRIBE;if(this.$VideoLiveFollowButton4)this.setSwitchOnState(n);else this.setSwitchOffState(n);this.$VideoLiveFollowButton5=m.getVideoID();this.setupAllHandlers();this.$VideoLiveFollowButton6=u}l.prototype.nuxViewClicked=function(){"use strict";this.sendNuxSeenRequest("dismiss")};l.prototype.sendNuxSeenRequest=function(m){"use strict";new(c("AsyncRequest"))().setURI(c("XLiveSubscribeAsyncNuxController").getURIBuilder().getURI()).setData({action:m,video_id:this.$VideoLiveFollowButton5}).send()};l.prototype.nuxViewHidden=function(){"use strict";this.sendNuxSeenRequest("hide")};l.prototype.setSwitchOffState=function(m){"use strict";var n=i._("Live Notifications");c("CSS").removeClass(m,"_-kc");c("CSS").show(this.$VideoLiveFollowButton3);c("CSS").removeClass(this.$VideoLiveFollowButton1,"_knu");c("DOM").setContent(this.$VideoLiveFollowButton2,n)};l.prototype.setSwitchOnState=function(m){"use strict";var n=i._("Live Notifications");c("CSS").addClass(m,"_-kc");c("CSS").hide(this.$VideoLiveFollowButton3);c("CSS").addClass(this.$VideoLiveFollowButton1,"_knu");c("DOM").setContent(this.$VideoLiveFollowButton2,n)};l.prototype.nextActionOnToggle=function(m){"use strict";if(m)return c("VideoBroadcastSubscriptionAction").UNSUBSCRIBE;else return c("VideoBroadcastSubscriptionAction").SUBSCRIBE};l.prototype.toggleSwitchOnAnimation=function(m){"use strict";this.setSwitchOnState(m)};l.prototype.toggleSwitchOffAnimation=function(m){"use strict";this.setSwitchOffState(m)};f.exports=l}),null);